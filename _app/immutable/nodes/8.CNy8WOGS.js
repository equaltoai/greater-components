import{a as d,b as h,g as Ee,h as q,j as Ye,s as X,f as ze,c as We,t as He}from"../chunks/BTgIKdxS.js";import{al as lt,ak as ot,p as xe,h as _e,Q as be,b as Fe,d as G,s as o,c as r,t as I,a as Se,g as e,u as ve,r as t,f as Oe,R as ke,bl as it}from"../chunks/D-WlePPY.js";import{c as Me}from"../chunks/D4O329PC.js";import{D as nt}from"../chunks/DhBnkOx0.js";import{C as ct}from"../chunks/DeXdVqsM.js";import{b as vt,s as ge,c as dt,d as z,r as Ce,g as Qe,e as he,h as Je,j as ut,k as _t,i as gt}from"../chunks/EAUZg0eb.js";import{p as F,i as K}from"../chunks/COMTHQNu.js";import{b as Ge}from"../chunks/gQNFtiqf.js";import{b as ht,e as Ve}from"../chunks/CyXc35a2.js";import"../chunks/ByEp1Jo3.js";const Ze=Symbol("discovery-context"),pt={enableColorSearch:!0,enableMoodMap:!0,enableStyleFilter:!0,enableVisualSearch:!0,enableVoiceSearch:!1,showFilters:!0,showSuggestions:!0,resultsPerPage:24,defaultSort:"relevance",class:""};function Be(_){return typeof _=="function"?_():_}function ft(_,s={},S={}){const c={get store(){return Be(_)},get config(){return{...pt,...Be(s)}},get handlers(){return Be(S)},searchMode:"text",sortBy:Be(s).defaultSort??"relevance",filtersExpanded:!1,visualSearchResult:null,activeFilterCount:0};return ot(Ze,c),c}function Te(){const _=lt(Ze);if(!_)throw new Error("Discovery context not found. Ensure this component is used within a DiscoveryEngine.Root component.");return _}function $e(_){let s=0;return _.styles?.length&&s++,_.mediums?.length&&s++,_.tags?.length&&s++,_.colorPalette?.colors?.length&&s++,_.mood&&s++,(_.dateRange?.from||_.dateRange?.to)&&s++,(_.priceRange?.min!==void 0||_.priceRange?.max!==void 0)&&s++,_.aiUsage&&_.aiUsage!=="any"&&s++,_.forSaleOnly&&s++,_.featuredOnly&&s++,s}function mt(_){return _===0?"No results":_===1?"1 result":_>=1e3?`${(_/1e3).toFixed(1)}K+ results`:`${_} results`}var yt=h('<div class="discovery-engine__loading svelte-1vkye6y" aria-live="polite" aria-busy="true"><span class="sr-only svelte-1vkye6y">Searching...</span></div>'),bt=h('<section aria-label="Artwork discovery"><a href="#discovery-results" class="skip-link svelte-1vkye6y">Skip to results</a> <div class="discovery-engine__content svelte-1vkye6y"><!></div> <!></section>');function kt(_,s){xe(s,!0);let S=F(s,"handlers",19,()=>({})),c=F(s,"enableColorSearch",3,!0),oe=F(s,"enableMoodMap",3,!0),ae=F(s,"enableStyleFilter",3,!0),O=F(s,"enableVisualSearch",3,!0),g=F(s,"showFilters",3,!0),N=F(s,"showSuggestions",3,!0),U=F(s,"class",3,"");const b=ve(()=>({enableColorSearch:c(),enableMoodMap:oe(),enableStyleFilter:ae(),enableVisualSearch:O(),showFilters:g(),showSuggestions:N()})),T=ft(()=>s.store,()=>e(b),()=>S());let $=_e(be({loading:!0,results:[],filters:{},suggestions:[],error:null}));Fe(()=>(G($,s.store.get(),!0),s.store.subscribe(p=>{G($,p,!0),T.activeFilterCount=$e(p.filters)})));const W=ve(()=>["discovery-engine",T.filtersExpanded&&"discovery-engine--filters-expanded",e($).loading&&"discovery-engine--loading",U()].filter(Boolean).join(" "));var E=bt(),Q=o(r(E),2),R=r(Q);vt(R,()=>s.children),t(Q);var B=o(Q,2);{var V=P=>{var p=yt();d(P,p)};K(B,P=>{e($).loading&&P(V)})}t(E),I(()=>{ge(E,1,dt(e(W)),"svelte-1vkye6y"),z(E,"data-search-mode",T.searchMode),z(E,"data-loading",e($).loading)}),d(_,E),Se()}var xt=h('<div class="search-bar__loading svelte-6p9cb7" aria-label="Searching..."><svg class="search-bar__spinner svelte-6p9cb7" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke-width="2" stroke-dasharray="32" stroke-linecap="round"></circle></svg></div>'),St=h('<button type="button" class="search-bar__clear svelte-6p9cb7" aria-label="Clear search"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-6p9cb7"><path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round"></path></svg></button>'),Ct=h('<button type="button" class="search-bar__visual svelte-6p9cb7" aria-label="Search by image" title="Upload image to find similar artworks"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-6p9cb7"><rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2"></rect><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"></circle><path d="M21 15l-5-5L5 21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <input type="file" accept="image/*" class="sr-only svelte-6p9cb7" aria-label="Upload image for visual search"/>',1),wt=ze('<svg class="search-bar__suggestion-icon svelte-6p9cb7" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M12 8v4l3 3" stroke-width="2" stroke-linecap="round"></path><circle cx="12" cy="12" r="9" stroke-width="2"></circle></svg>'),Mt=ze('<svg class="search-bar__suggestion-icon svelte-6p9cb7" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke-width="2"></circle><path d="M21 21l-4.35-4.35" stroke-width="2" stroke-linecap="round"></path></svg>'),jt=h('<li role="option"><button type="button" class="search-bar__suggestion-btn" tabindex="-1"><span class="search-bar__suggestion-content"><!> <span class="search-bar__suggestion-text svelte-6p9cb7"> </span></span></button></li>'),Ft=h('<ul id="search-suggestions" class="search-bar__suggestions svelte-6p9cb7" role="listbox" aria-label="Search suggestions"></ul>'),Et=h('<div role="search"><div class="search-bar__input-wrapper svelte-6p9cb7"><svg class="search-bar__icon svelte-6p9cb7" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke-width="2"></circle><path d="M21 21l-4.35-4.35" stroke-width="2" stroke-linecap="round"></path></svg> <input type="search" class="search-bar__input svelte-6p9cb7" aria-label="Search artworks" role="combobox" aria-autocomplete="list" autocomplete="off"/> <!> <!> <!> <button type="submit" class="search-bar__submit svelte-6p9cb7" aria-label="Search">Search</button></div> <!></div>');function Rt(_,s){xe(s,!0);let S=F(s,"placeholder",3,"Search artworks, artists, styles..."),c=F(s,"showVisualSearch",3,!0),oe=F(s,"showRecent",3,!0),ae=F(s,"maxSuggestions",3,8),O=F(s,"debounceMs",3,300),g=F(s,"searchAsYouType",3,!0),N=F(s,"minSearchChars",3,2),U=F(s,"class",3,"");const b=Te(),{store:T,config:$,handlers:W}=b;let E=_e(""),Q=_e(!1),R=_e(!1),B=_e(-1),V=_e(void 0),P=null,p=_e(!1);Fe(()=>()=>{P&&clearTimeout(P)});let M=_e(be(T.get()));Fe(()=>T.subscribe(w=>{G(M,w,!0)}));const l=ve(()=>!e(Q)||!$.showSuggestions?[]:!e(E).trim()&&oe()?e(M).recentSearches.slice(0,ae()).map((a,w)=>({id:`recent-${w}`,text:a,type:"query"})):[]);async function u(){e(E).trim()&&(G(R,!1),await T.search(e(E).trim()),W.onSearch?.(e(E).trim()))}function f(a){G(E,a.text,!0),G(R,!1),u(),W.onSuggestionSelect?.(a)}function C(a){const Z=a.target.files?.[0];Z&&(b.searchMode="visual",W.onVisualSearch?.(Z))}function H(a){if(!e(R)||e(l).length===0){a.key==="Enter"&&(a.preventDefault(),u());return}switch(a.key){case"ArrowDown":a.preventDefault(),G(B,Math.min(e(B)+1,e(l).length-1),!0);break;case"ArrowUp":a.preventDefault(),G(B,Math.max(e(B)-1,-1),!0);break;case"Enter":if(a.preventDefault(),e(B)>=0){const w=e(l)[e(B)];w&&f(w)}else u();break;case"Escape":G(R,!1),G(B,-1);break}}function re(a){const w=a.target;G(E,w.value,!0),G(R,!0),G(B,-1),P&&(clearTimeout(P),P=null),g()&&e(E).trim().length>=N()?(G(p,!0),P=setTimeout(async()=>{try{await T.search(e(E).trim()),W.onSearch?.(e(E).trim())}finally{G(p,!1)}},O())):e(E).trim().length===0&&(T.search(""),G(p,!1))}function i(){G(Q,!0),G(R,!0)}function v(){setTimeout(()=>{G(Q,!1),G(R,!1)},200)}function k(){G(E,""),P&&(clearTimeout(P),P=null),G(p,!1),T.search("")}var j=Et(),A=r(j),y=o(r(A),2);Ce(y);var L=o(y,2);{var le=a=>{var w=xt();d(a,w)};K(L,a=>{e(p)&&a(le)})}var ie=o(L,2);{var x=a=>{var w=St();q("click",w,k),d(a,w)};K(ie,a=>{e(E)&&!e(p)&&a(x)})}var J=o(ie,2);{var ne=a=>{var w=Ct(),Z=Oe(w),m=o(Z,2);Ge(m,D=>G(V,D),()=>e(V)),q("click",Z,()=>e(V)?.click()),q("change",m,C),d(a,w)};K(J,a=>{c()&&$.enableVisualSearch&&a(ne)})}var ce=o(J,2);t(A);var pe=o(A,2);{var n=a=>{var w=Ft();he(w,23,()=>e(l),(Z,m)=>Z.id||m,(Z,m,D)=>{var Y=jt();let ee;var de=r(Y),fe=r(de),me=r(fe);{var De=ye=>{var we=wt();d(ye,we)},Ie=ye=>{var we=Mt();d(ye,we)};K(me,ye=>{e(m).type==="query"?ye(De):ye(Ie,!1)})}var qe=o(me,2),Pe=r(qe,!0);t(qe),t(fe),t(de),t(Y),I(()=>{ee=ge(Y,1,"search-bar__suggestion svelte-6p9cb7",null,ee,{selected:e(D)===e(B)}),z(Y,"aria-selected",e(D)===e(B)),X(Pe,e(m).text)}),q("click",de,()=>f(e(m))),d(Z,Y)}),t(w),d(a,w)};K(pe,a=>{e(R)&&e(l).length>0&&a(n)})}t(j),I(()=>{ge(j,1,`search-bar ${U()}`,"svelte-6p9cb7"),z(y,"placeholder",S()),Qe(y,e(E)),z(y,"aria-controls",e(R)&&e(l).length>0?"search-suggestions":void 0),z(y,"aria-expanded",e(R)&&e(l).length>0)}),q("input",y,re),Ye("focus",y,i),Ye("blur",y,v),q("keydown",y,H),q("click",ce,u),d(_,j),Se()}Ee(["input","keydown","click","change"]);var Dt=h('<button type="button" class="style-filter__clear svelte-1jyigkp"> </button>'),qt=h('<div role="listitem"><button type="button" class="style-filter__chip svelte-1jyigkp"><span> </span> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-1jyigkp"><path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round"></path></svg></button></div>'),Pt=h('<div class="style-filter__selected svelte-1jyigkp" role="list" aria-label="Selected styles"></div>'),Bt=h('<span class="style-filter__option-count svelte-1jyigkp">42</span>'),At=h('<button type="button"><span class="style-filter__option-name"> </span> <!></button>'),Ot=h('<div class="style-filter__category"><h4 class="style-filter__category-title svelte-1jyigkp"> </h4> <div class="style-filter__options svelte-1jyigkp" role="group"></div></div>'),Tt=h('<div><div class="style-filter__header svelte-1jyigkp"><h3 class="style-filter__title svelte-1jyigkp">Art Styles</h3> <!></div> <!> <div class="style-filter__categories svelte-1jyigkp"></div></div>');function It(_,s){xe(s,!0);let S=F(s,"styles",27,()=>be([])),c=F(s,"selected",31,()=>be([])),oe=F(s,"showCount",3,!0),ae=F(s,"class",3,"");const O=[{id:"impressionism",name:"Impressionism",category:"traditional"},{id:"abstract",name:"Abstract",category:"traditional"},{id:"surrealism",name:"Surrealism",category:"traditional"},{id:"digital-art",name:"Digital Art",category:"digital"},{id:"photography",name:"Photography",category:"photography"},{id:"generative",name:"Generative",category:"generative"},{id:"mixed-media",name:"Mixed Media",category:"mixed-media"},{id:"minimalism",name:"Minimalism",category:"traditional"}],g=ve(()=>S().length>0?S():O),N=ve(()=>{const p={};for(const M of e(g))p[M.category]||(p[M.category]=[]),(p[M.category]=p[M.category]||[]).push(M);return p}),U={traditional:"Traditional",digital:"Digital","mixed-media":"Mixed Media",photography:"Photography",sculpture:"Sculpture",installation:"Installation",performance:"Performance",video:"Video",generative:"Generative"};function b(p){c().includes(p)?c(c().filter(M=>M!==p)):c([...c(),p]),s.onChange?.(c())}function T(){c([]),s.onChange?.(c())}function $(p){return c().includes(p)}var W=Tt(),E=r(W),Q=o(r(E),2);{var R=p=>{var M=Dt(),l=r(M);t(M),I(()=>X(l,`Clear (${c().length??""})`)),q("click",M,T),d(p,M)};K(Q,p=>{c().length>0&&p(R)})}t(E);var B=o(E,2);{var V=p=>{var M=Pt();he(M,20,c,l=>l,(l,u)=>{const f=ve(()=>e(g).find(i=>i.id===u));var C=We(),H=Oe(C);{var re=i=>{var v=qt(),k=r(v),j=r(k),A=r(j,!0);t(j),ke(2),t(k),t(v),I(()=>{z(k,"aria-label",`Remove ${e(f).name}`),X(A,e(f).name)}),q("click",k,()=>b(u)),d(i,v)};K(H,i=>{e(f)&&i(re)})}d(l,C)}),t(M),d(p,M)};K(B,p=>{c().length>0&&p(V)})}var P=o(B,2);he(P,21,()=>Object.entries(e(N)),([p,M])=>p,(p,M)=>{var l=ve(()=>it(e(M),2));let u=()=>e(l)[0],f=()=>e(l)[1];var C=Ot(),H=r(C),re=r(H,!0);t(H);var i=o(H,2);he(i,21,f,v=>v.id,(v,k)=>{var j=At();let A;var y=r(j),L=r(y,!0);t(y);var le=o(y,2);{var ie=x=>{var J=Bt();d(x,J)};K(le,x=>{oe()&&x(ie)})}t(j),I((x,J)=>{A=ge(j,1,"style-filter__option svelte-1jyigkp",null,A,x),z(j,"aria-pressed",J),X(L,e(k).name)},[()=>({selected:$(e(k).id)}),()=>$(e(k).id)]),q("click",j,()=>b(e(k).id)),d(v,j)}),t(i),t(C),I(()=>{X(re,U[u()]||u()),z(i,"aria-label",`${U[u()]||u()} styles`)}),d(p,C)}),t(P),t(W),I(()=>ge(W,1,`style-filter ${ae()}`,"svelte-1jyigkp")),d(_,W),Se()}Ee(["click"]);var Lt=h('<button type="button" class="color-palette-search__clear svelte-lk6ynk">Clear all</button>'),Vt=h('<div role="listitem"><button type="button" class="color-palette-search__color svelte-lk6ynk"><svg class="color-palette-search__color-swatch svelte-lk6ynk" viewBox="0 0 20 20" aria-hidden="true"><circle cx="10" cy="10" r="9" class="svelte-lk6ynk"></circle></svg> <span class="color-palette-search__color-value svelte-lk6ynk"> </span> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-lk6ynk"><path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round"></path></svg></button></div>'),Nt=h('<div role="listitem"><div class="color-palette-search__add svelte-lk6ynk"><input type="color" class="color-palette-search__picker svelte-lk6ynk" aria-label="Pick a color"/> <button type="button" class="color-palette-search__add-btn svelte-lk6ynk" aria-label="Add selected color"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-lk6ynk"><path d="M12 5v14M5 12h14" stroke-width="2" stroke-linecap="round"></path></svg></button></div></div>'),Ut=ze('<svg class="color-palette-search__preset-color svelte-lk6ynk" viewBox="0 0 16 16" preserveAspectRatio="none" aria-hidden="true"><rect x="0" y="0" width="16" height="16"></rect></svg>'),Yt=h('<button type="button" class="color-palette-search__preset svelte-lk6ynk"></button>'),zt=h('<div><div class="color-palette-search__header svelte-lk6ynk"><h3 class="color-palette-search__title svelte-lk6ynk">Search by Color</h3> <!></div> <div class="color-palette-search__selected svelte-lk6ynk" role="list" aria-label="Selected colors"><!> <!></div> <div class="color-palette-search__extract svelte-lk6ynk"><button type="button" class="color-palette-search__extract-btn svelte-lk6ynk"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-lk6ynk"><rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2"></rect><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor" class="svelte-lk6ynk"></circle><path d="M21 15l-5-5L5 21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> Extract from image</button> <input type="file" accept="image/*" class="sr-only svelte-lk6ynk" aria-label="Upload image for color extraction"/></div> <div class="color-palette-search__presets svelte-lk6ynk"><span class="color-palette-search__presets-label svelte-lk6ynk">Presets:</span> <!></div> <div class="color-palette-search__tolerance svelte-lk6ynk"><label for="tolerance-slider" class="color-palette-search__tolerance-label svelte-lk6ynk"> </label> <input id="tolerance-slider" type="range" min="0" max="100" class="color-palette-search__tolerance-slider svelte-lk6ynk"/> <div class="color-palette-search__tolerance-hints svelte-lk6ynk"><span>Exact</span> <span>Flexible</span></div></div> <div class="color-palette-search__mode svelte-lk6ynk"><span class="color-palette-search__mode-label svelte-lk6ynk">Match:</span> <div class="color-palette-search__mode-options svelte-lk6ynk" role="radiogroup" aria-label="Color match mode"><label class="color-palette-search__mode-option svelte-lk6ynk"><input type="radio" name="mode" class="svelte-lk6ynk"/> <span>Any color</span></label> <label class="color-palette-search__mode-option svelte-lk6ynk"><input type="radio" name="mode" class="svelte-lk6ynk"/> <span>All colors</span></label> <label class="color-palette-search__mode-option svelte-lk6ynk"><input type="radio" name="mode" class="svelte-lk6ynk"/> <span>Dominant</span></label></div></div> <button type="button" class="color-palette-search__search svelte-lk6ynk">Search by colors</button></div>');function et(_,s){xe(s,!0);const S=[];let c=F(s,"colors",31,()=>be([])),oe=F(s,"tolerance",15,50),ae=F(s,"mode",15,"any"),O=F(s,"maxColors",3,5),g=F(s,"class",3,""),N=_e("#000000"),U;const b=[{name:"Warm",colors:["#FF6B6B","#FFA07A","#FFD93D","#FF8C42"]},{name:"Cool",colors:["#4ECDC4","#45B7D1","#96CEB4","#88D8B0"]},{name:"Earth",colors:["#8B4513","#D2691E","#CD853F","#DEB887"]},{name:"Monochrome",colors:["#2C3E50","#34495E","#7F8C8D","#BDC3C7"]}];function T(m){c().length<O()&&!c().includes(m)&&c([...c(),m])}function $(m){c(c().filter(D=>D!==m))}function W(m){const D=m.target;G(N,D.value,!0)}function E(){T(e(N))}function Q(m){m.target.files?.[0]&&R()}async function R(m){c(["#E74C3C","#3498DB","#2ECC71","#F39C12"].slice(0,O()))}function B(m){c(m.colors.slice(0,O()))}function V(){c([])}function P(){s.onSearch?.(c())}var p=zt(),M=r(p),l=o(r(M),2);{var u=m=>{var D=Lt();q("click",D,V),d(m,D)};K(l,m=>{c().length>0&&m(u)})}t(M);var f=o(M,2),C=r(f);he(C,16,c,m=>m,(m,D)=>{var Y=Vt(),ee=r(Y),de=r(ee),fe=r(de);t(de);var me=o(de,2),De=r(me,!0);t(me),ke(2),t(ee),t(Y),I(()=>{z(ee,"aria-label",`Remove color ${D}`),z(fe,"fill",D),X(De,D)}),q("click",ee,()=>$(D)),d(m,Y)});var H=o(C,2);{var re=m=>{var D=Nt(),Y=r(D),ee=r(Y);Ce(ee);var de=o(ee,2);t(Y),t(D),I(()=>Qe(ee,e(N))),q("input",ee,W),q("click",de,E),d(m,D)};K(H,m=>{c().length<O()&&m(re)})}t(f);var i=o(f,2),v=r(i),k=o(v,2);Ge(k,m=>U=m,()=>U),t(i);var j=o(i,2),A=o(r(j),2);he(A,17,()=>b,m=>m.name,(m,D)=>{var Y=Yt();he(Y,20,()=>e(D).colors,ee=>ee,(ee,de)=>{var fe=Ut(),me=r(fe);t(fe),I(()=>z(me,"fill",de)),d(ee,fe)}),t(Y),I(()=>z(Y,"aria-label",`Apply ${e(D).name} palette`)),q("click",Y,()=>B(e(D))),d(m,Y)}),t(j);var y=o(j,2),L=r(y),le=r(L);t(L);var ie=o(L,2);Ce(ie),ke(2),t(y);var x=o(y,2),J=o(r(x),2),ne=r(J),ce=r(ne);Ce(ce),ce.value=ce.__value="any",ke(2),t(ne);var pe=o(ne,2),n=r(pe);Ce(n),n.value=n.__value="all",ke(2),t(pe);var a=o(pe,2),w=r(a);Ce(w),w.value=w.__value="dominant",ke(2),t(a),t(J),t(x);var Z=o(x,2);t(p),I(()=>{ge(p,1,`color-palette-search ${g()}`,"svelte-lk6ynk"),X(le,`Tolerance: ${oe()??""}%`),Z.disabled=c().length===0}),q("click",v,()=>U?.click()),q("change",k,Q),ht(ie,oe),Ve(S,[],ce,ae,ae),Ve(S,[],n,ae,ae),Ve(S,[],w,ae,ae),q("click",Z,P),d(_,p),Se()}Ee(["click","input","change"]);var Gt=h('<button type="button" class="mood-map__preset svelte-1tkmglh"><span class="mood-map__preset-emoji svelte-1tkmglh"> </span> <span class="mood-map__preset-name"> </span></button>'),Kt=h('<div><div class="mood-map__header svelte-1tkmglh"><h3 class="mood-map__title svelte-1tkmglh">Mood Discovery</h3> <button type="button" class="mood-map__clear svelte-1tkmglh">Reset</button></div> <div class="mood-map__presets svelte-1tkmglh"></div> <div class="mood-map__canvas svelte-1tkmglh" role="slider" aria-label="Mood selection map" tabindex="0"><span class="mood-map__label mood-map__label--top svelte-1tkmglh">Positive</span> <span class="mood-map__label mood-map__label--bottom svelte-1tkmglh">Negative</span> <span class="mood-map__label mood-map__label--left svelte-1tkmglh">Calm</span> <span class="mood-map__label mood-map__label--right svelte-1tkmglh">Energetic</span> <div class="mood-map__grid svelte-1tkmglh" aria-hidden="true"><div class="mood-map__grid-line mood-map__grid-line--h svelte-1tkmglh"></div> <div class="mood-map__grid-line mood-map__grid-line--v svelte-1tkmglh"></div></div> <div class="mood-map__gradient svelte-1tkmglh" aria-hidden="true"></div> <svg class="mood-map__selection svelte-1tkmglh" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true"><circle class="mood-map__selection-ring svelte-1tkmglh"></circle><circle class="mood-map__selection-dot svelte-1tkmglh" r="2"></circle></svg></div> <div class="mood-map__values svelte-1tkmglh"><div class="mood-map__value svelte-1tkmglh"><span class="mood-map__value-label svelte-1tkmglh"> </span> <span class="mood-map__value-number svelte-1tkmglh"> </span></div> <div class="mood-map__value svelte-1tkmglh"><span class="mood-map__value-label svelte-1tkmglh"> </span> <span class="mood-map__value-number svelte-1tkmglh"> </span></div></div></div>');function tt(_,s){xe(s,!0);let S=F(s,"dimensions",19,()=>["Energy","Valence"]),c=F(s,"selection",31,()=>be({x:0,y:0})),oe=F(s,"radius",3,.2),ae=F(s,"class",3,""),O=_e(!1),g;const N=[{name:"Calm",x:-.7,y:.5,emoji:"ðŸ˜Œ"},{name:"Joyful",x:.7,y:.8,emoji:"ðŸ˜Š"},{name:"Energetic",x:.9,y:.3,emoji:"âš¡"},{name:"Melancholic",x:-.5,y:-.6,emoji:"ðŸ˜¢"},{name:"Intense",x:.8,y:-.5,emoji:"ðŸ”¥"},{name:"Peaceful",x:-.8,y:.7,emoji:"ðŸ•Šï¸"}],U=ve(()=>(c().x+1)/2*100),b=ve(()=>(1-c().y)/2*100),T=ve(()=>Math.max(0,Math.min(.5,oe()))*100);function $(x){G(O,!0),Q(x),x.target.setPointerCapture(x.pointerId)}function W(x){e(O)&&Q(x)}function E(){G(O,!1)}function Q(x){if(!g)return;const J=g.getBoundingClientRect(),ne=(x.clientX-J.left)/J.width,ce=(x.clientY-J.top)/J.height;c({x:Math.max(-1,Math.min(1,ne*2-1)),y:Math.max(-1,Math.min(1,1-ce*2))}),s.onChange?.({energy:c().x,valence:c().y})}function R(x){c({x:x.x,y:x.y}),s.onChange?.({energy:c().x,valence:c().y})}function B(){c({x:0,y:0}),s.onChange?.({energy:0,valence:0})}var V=Kt(),P=r(V),p=o(r(P),2);t(P);var M=o(P,2);he(M,21,()=>N,x=>x.name,(x,J)=>{var ne=Gt(),ce=r(ne),pe=r(ce,!0);t(ce);var n=o(ce,2),a=r(n,!0);t(n),t(ne),I(()=>{z(ne,"aria-label",`Select ${e(J).name} mood`),X(pe,e(J).emoji),X(a,e(J).name)}),q("click",ne,()=>R(e(J))),d(x,ne)}),t(M);var l=o(M,2),u=o(r(l),12),f=r(u),C=o(f);t(u),t(l),Ge(l,x=>g=x,()=>g);var H=o(l,2),re=r(H),i=r(re),v=r(i);t(i);var k=o(i,2),j=r(k,!0);t(k),t(re);var A=o(re,2),y=r(A),L=r(y);t(y);var le=o(y,2),ie=r(le,!0);t(le),t(A),t(H),t(V),I((x,J,ne)=>{ge(V,1,`mood-map ${ae()}`,"svelte-1tkmglh"),z(l,"aria-valuenow",c().x),z(l,"aria-valuetext",x),z(f,"cx",e(U)),z(f,"cy",e(b)),z(f,"r",e(T)),z(C,"cx",e(U)),z(C,"cy",e(b)),X(v,`${S()[0]??""}:`),X(j,J),X(L,`${S()[1]??""}:`),X(ie,ne)},[()=>`Energy: ${c().x.toFixed(2)}, Valence: ${c().y.toFixed(2)}`,()=>c().x.toFixed(2),()=>c().y.toFixed(2)]),q("click",p,B),q("pointerdown",l,$),q("pointermove",l,W),q("pointerup",l,E),Ye("pointercancel",l,E),d(_,V),Se()}Ee(["click","pointerdown","pointermove","pointerup"]);var Ht=h('<span class="filters__badge svelte-rffr5p"> </span>'),Jt=h('<button type="button" class="filters__toggle svelte-rffr5p" aria-controls="filter-panel"><svg class="filters__toggle-icon svelte-rffr5p" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span>Filters</span> <!> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M6 9l6 6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>'),Xt=h('<span class="filters__badge svelte-rffr5p"> </span>'),Wt=h('<div class="filters__title svelte-rffr5p"><svg class="filters__toggle-icon svelte-rffr5p" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span>Filters</span> <!></div>'),Qt=h('<button type="button" class="filters__clear-all svelte-rffr5p" aria-label="Clear all filters">Clear all</button>'),Zt=h('<li><button type="button" class="filters__chip svelte-rffr5p"><span> </span> <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-rffr5p"><path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round"></path></svg></button></li>'),$t=h('<ul class="filters__chips svelte-rffr5p" aria-label="Active filters"></ul>'),ea=h('<div class="filters__section svelte-rffr5p"><!></div>'),ta=h('<div class="filters__section svelte-rffr5p"><!></div>'),aa=h('<div class="filters__section svelte-rffr5p"><!></div>'),ra=h('<button type="button" class="filters__medium-clear svelte-rffr5p"> </button>'),sa=h('<button type="button"> </button>'),la=h('<div id="filter-panel" class="filters__panel svelte-rffr5p" role="group" aria-label="Filter options"><!> <!> <!> <div class="filters__section svelte-rffr5p"><div class="filters__medium-filter svelte-rffr5p"><div class="filters__medium-header svelte-rffr5p"><h3 class="filters__section-title svelte-rffr5p">Medium</h3> <!></div> <div class="filters__medium-options svelte-rffr5p" role="group" aria-label="Filter by medium"></div></div></div> <div class="filters__section svelte-rffr5p"><h3 class="filters__section-title svelte-rffr5p">Options</h3> <label class="filters__checkbox svelte-rffr5p"><input type="checkbox" class="svelte-rffr5p"/> <span>For sale only</span></label> <label class="filters__checkbox svelte-rffr5p"><input type="checkbox" class="svelte-rffr5p"/> <span>Featured only</span></label></div></div>'),oa=h('<div><div class="filters__header svelte-rffr5p"><!> <!></div> <!> <!> <div class="sr-only svelte-rffr5p" aria-live="polite"><!></div></div>');function ia(_,s){xe(s,!0);let S=F(s,"collapsible",3,!0),c=F(s,"defaultExpanded",3,!1),oe=F(s,"class",3,"");const ae=Te(),{store:O,config:g,handlers:N}=ae;let U=_e(be(c())),b=_e(be(O.get()));Fe(()=>O.subscribe(a=>{G(b,a,!0)}));const T=ve(()=>$e(e(b).filters));function $(){S()&&(G(U,!e(U)),ae.filtersExpanded=e(U))}function W(){O.clearFilters(),N.onFilterClear?.()}function E(n){const a={};switch(n){case"styles":a.styles=[];break;case"mediums":a.mediums=[];break;case"tags":a.tags=[];break;case"colorPalette":a.colorPalette=void 0;break;case"mood":a.mood=void 0;break;case"dateRange":a.dateRange=void 0;break;case"priceRange":a.priceRange=void 0;break;case"aiUsage":a.aiUsage="any";break;case"forSaleOnly":a.forSaleOnly=!1;break;case"featuredOnly":a.featuredOnly=!1;break}O.updateFilters(a),N.onFilterChange?.(a)}const Q=[{id:"impressionism",name:"Impressionism",category:"traditional"},{id:"abstract",name:"Abstract",category:"traditional"},{id:"surrealism",name:"Surrealism",category:"traditional"},{id:"digital-art",name:"Digital Art",category:"digital"},{id:"photography",name:"Photography",category:"photography"},{id:"generative",name:"Generative",category:"generative"},{id:"mixed-media",name:"Mixed Media",category:"mixed-media"},{id:"minimalism",name:"Minimalism",category:"traditional"},{id:"expressionism",name:"Expressionism",category:"traditional"},{id:"pop-art",name:"Pop Art",category:"traditional"}],R=[{id:"oil",name:"Oil Paint"},{id:"acrylic",name:"Acrylic"},{id:"watercolor",name:"Watercolor"},{id:"digital",name:"Digital"},{id:"pencil",name:"Pencil"},{id:"charcoal",name:"Charcoal"},{id:"pastel",name:"Pastel"},{id:"ink",name:"Ink"},{id:"photography",name:"Photography"},{id:"sculpture",name:"Sculpture"}],B=ve(()=>e(b).filters.styles??[]),V=ve(()=>e(b).filters.mediums??[]);function P(n){O.updateFilters({styles:n}),N.onStyleChange?.(n)}function p(n){O.updateFilters({mediums:n}),N.onFilterChange?.({mediums:n})}function M(n){const a=e(b).filters.mediums??[],w=a.includes(n)?a.filter(Z=>Z!==n):[...a,n];p(w)}function l(n){const a={colors:n,tolerance:50,matchMode:"similar"};O.updateFilters({colorPalette:a}),N.onColorSearch?.(n,50,"any")}function u(n){O.updateFilters({mood:n}),N.onMoodChange?.(n)}function f(){const n=[],a=e(b).filters;return a.styles?.length&&n.push({key:"styles",label:`${a.styles.length} style${a.styles.length>1?"s":""}`}),a.mediums?.length&&n.push({key:"mediums",label:`${a.mediums.length} medium${a.mediums.length>1?"s":""}`}),a.tags?.length&&n.push({key:"tags",label:`${a.tags.length} tag${a.tags.length>1?"s":""}`}),a.colorPalette?.colors?.length&&n.push({key:"colorPalette",label:`${a.colorPalette.colors.length} color${a.colorPalette.colors.length>1?"s":""}`}),a.mood&&n.push({key:"mood",label:"Mood filter"}),(a.dateRange?.from||a.dateRange?.to)&&n.push({key:"dateRange",label:"Date range"}),(a.priceRange?.min!==void 0||a.priceRange?.max!==void 0)&&n.push({key:"priceRange",label:"Price range"}),a.aiUsage&&a.aiUsage!=="any"&&n.push({key:"aiUsage",label:`AI: ${a.aiUsage}`}),a.forSaleOnly&&n.push({key:"forSaleOnly",label:"For sale"}),a.featuredOnly&&n.push({key:"featuredOnly",label:"Featured"}),n}const C=ve(f);var H=oa();let re;var i=r(H),v=r(i);{var k=n=>{var a=Jt(),w=o(r(a),4);{var Z=Y=>{var ee=Ht(),de=r(ee,!0);t(ee),I(()=>{z(ee,"aria-label",`${e(T)??""} active filters`),X(de,e(T))}),d(Y,ee)};K(w,Y=>{e(T)>0&&Y(Z)})}var m=o(w,2);let D;t(a),I(()=>{z(a,"aria-expanded",e(U)),D=ge(m,0,"filters__chevron svelte-rffr5p",null,D,{rotated:e(U)})}),q("click",a,$),d(n,a)},j=n=>{var a=Wt(),w=o(r(a),4);{var Z=m=>{var D=Xt(),Y=r(D,!0);t(D),I(()=>X(Y,e(T))),d(m,D)};K(w,m=>{e(T)>0&&m(Z)})}t(a),d(n,a)};K(v,n=>{S()?n(k):n(j,!1)})}var A=o(v,2);{var y=n=>{var a=Qt();q("click",a,W),d(n,a)};K(A,n=>{e(T)>0&&n(y)})}t(i);var L=o(i,2);{var le=n=>{var a=$t();he(a,21,()=>e(C),w=>w.key,(w,Z)=>{var m=Zt(),D=r(m),Y=r(D),ee=r(Y,!0);t(Y),ke(2),t(D),t(m),I(()=>{z(D,"aria-label",`Remove ${e(Z).label} filter`),X(ee,e(Z).label)}),q("click",D,()=>E(e(Z).key)),d(w,m)}),t(a),d(n,a)};K(L,n=>{e(C).length>0&&n(le)})}var ie=o(L,2);{var x=n=>{var a=la(),w=r(a);{var Z=se=>{var te=ea(),ue=r(te);It(ue,{get styles(){return Q},get selected(){return e(B)},showCount:!0,onChange:P,class:"filters__component"}),t(te),d(se,te)};K(w,se=>{g.enableStyleFilter&&se(Z)})}var m=o(w,2);{var D=se=>{var te=ta(),ue=r(te);{let Re=ve(()=>e(b).filters.colorPalette?.colors??[]);et(ue,{get colors(){return e(Re)},onSearch:l,maxColors:5,class:"filters__component"})}t(te),d(se,te)};K(m,se=>{g.enableColorSearch&&se(D)})}var Y=o(m,2);{var ee=se=>{var te=aa(),ue=r(te);{let Re=ve(()=>({x:e(b).filters.mood?.energy??0,y:e(b).filters.mood?.valence??0}));tt(ue,{get selection(){return e(Re)},onChange:u,class:"filters__component"})}t(te),d(se,te)};K(Y,se=>{g.enableMoodMap&&se(ee)})}var de=o(Y,2),fe=r(de),me=r(fe),De=o(r(me),2);{var Ie=se=>{var te=ra(),ue=r(te);t(te),I(()=>X(ue,`Clear (${e(V).length??""})`)),q("click",te,()=>p([])),d(se,te)};K(De,se=>{e(V).length>0&&se(Ie)})}t(me);var qe=o(me,2);he(qe,21,()=>R,se=>se.id,(se,te)=>{var ue=sa();let Re;var at=r(ue,!0);t(ue),I((rt,st)=>{Re=ge(ue,1,"filters__medium-option svelte-rffr5p",null,Re,rt),z(ue,"aria-pressed",st),X(at,e(te).name)},[()=>({selected:e(V).includes(e(te).id)}),()=>e(V).includes(e(te).id)]),q("click",ue,()=>M(e(te).id)),d(se,ue)}),t(qe),t(fe),t(de);var Pe=o(de,2),ye=o(r(Pe),2),we=r(ye);Ce(we),ke(2),t(ye);var Ke=o(ye,2),Le=r(Ke);Ce(Le),ke(2),t(Ke),t(Pe),t(a),I(()=>{Je(we,e(b).filters.forSaleOnly),Je(Le,e(b).filters.featuredOnly)}),q("change",we,se=>{const te=se.target;O.updateFilters({forSaleOnly:te.checked})}),q("change",Le,se=>{const te=se.target;O.updateFilters({featuredOnly:te.checked})}),d(n,a)};K(ie,n=>{(!S()||e(U))&&n(x)})}var J=o(ie,2),ne=r(J);{var ce=n=>{var a=He();I(()=>X(a,`${e(T)??""} filter${e(T)>1?"s":""} active`)),d(n,a)},pe=n=>{var a=He("No filters active");d(n,a)};K(ne,n=>{e(T)>0?n(ce):n(pe,!1)})}t(J),t(H),I(()=>re=ge(H,1,`filters ${oe()}`,"svelte-rffr5p",re,{"filters--expanded":e(U),"filters--collapsible":S()})),d(_,H),Se()}Ee(["click","change"]);var na=h('<span class="results__query svelte-jrlquk"> </span>'),ca=h('<div class="results__count svelte-jrlquk" aria-live="polite"> <!></div>'),va=h('<option class="svelte-jrlquk"> </option>'),da=h('<div class="results__sort svelte-jrlquk"><label for="sort-select" class="results__sort-label svelte-jrlquk">Sort by:</label> <select id="sort-select" class="results__sort-select svelte-jrlquk"></select></div>'),ua=h('<div class="results__skeleton svelte-jrlquk"><div class="results__skeleton-image svelte-jrlquk"></div> <div class="results__skeleton-text svelte-jrlquk"></div> <div class="results__skeleton-text results__skeleton-text--short svelte-jrlquk"></div></div>'),_a=h('<div class="results__loading svelte-jrlquk" aria-label="Loading results"><div></div></div>'),ga=h('<div class="results__error svelte-jrlquk" role="alert"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-jrlquk"><circle cx="12" cy="12" r="10" stroke-width="2" class="svelte-jrlquk"></circle><path d="M12 8v4M12 16h.01" stroke-width="2" stroke-linecap="round" class="svelte-jrlquk"></path></svg> <h2 class="svelte-jrlquk">Something went wrong</h2> <p class="svelte-jrlquk"> </p> <button type="button" class="svelte-jrlquk">Try again</button></div>'),ha=h('<p class="svelte-jrlquk">Try adjusting your search or filters</p>'),pa=h('<p class="svelte-jrlquk">Start searching to discover amazing artworks</p>'),fa=h('<div class="results__empty svelte-jrlquk"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-jrlquk"><circle cx="11" cy="11" r="8" stroke-width="2" class="svelte-jrlquk"></circle><path d="M21 21l-4.35-4.35" stroke-width="2" stroke-linecap="round" class="svelte-jrlquk"></path></svg> <h2 class="svelte-jrlquk">No results found</h2> <!></div>'),ma=h('<div class="results__item svelte-jrlquk" role="listitem"><div class="results__item-image svelte-jrlquk"><button type="button" class="results__item-image-btn svelte-jrlquk"><img loading="lazy" class="svelte-jrlquk"/></button> <div class="results__item-overlay svelte-jrlquk"><button type="button" class="results__item-action svelte-jrlquk" aria-label="Find similar artworks"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-jrlquk"><circle cx="11" cy="11" r="8" stroke-width="2" class="svelte-jrlquk"></circle><path d="M21 21l-4.35-4.35" stroke-width="2" stroke-linecap="round" class="svelte-jrlquk"></path></svg> More like this</button></div></div> <div class="results__item-info svelte-jrlquk"><button type="button" class="results__item-info-btn svelte-jrlquk"><h4 class="results__item-title svelte-jrlquk"> </h4> <p class="results__item-artist svelte-jrlquk"> </p></button></div></div>'),ya=h('<div role="list"></div>'),ba=h('<div id="discovery-results" role="region" aria-label="Search results"><div class="results__header svelte-jrlquk"><!> <!></div> <!></div>');function ka(_,s){xe(s,!0);let S=F(s,"layout",3,"grid"),c=F(s,"columns",3,4),oe=F(s,"showSort",3,!0),ae=F(s,"showCount",3,!0),O=F(s,"class",3,"");const g=Te(),{store:N,handlers:U}=g;let b=_e(be(N.get()));Fe(()=>N.subscribe(v=>{G(b,v,!0)}));const T=[{value:"relevance",label:"Most Relevant"},{value:"recent",label:"Most Recent"},{value:"popular",label:"Most Popular"},{value:"trending",label:"Trending"}];function $(i){const v=i.target;g.sortBy=v.value}function W(i){U.onResultClick?.(i)}function E(i,v){v.stopPropagation(),U.onMoreLikeThis?.(i)}const Q=ve(()=>mt(e(b).results.length));var R=ba();let B;var V=r(R),P=r(V);{var p=i=>{var v=ca(),k=r(v),j=o(k);{var A=y=>{var L=na(),le=r(L);t(L),I(()=>X(le,`for "${e(b).query??""}"`)),d(y,L)};K(j,y=>{e(b).query&&y(A)})}t(v),I(()=>X(k,`${e(Q)??""} `)),d(i,v)};K(P,i=>{ae()&&i(p)})}var M=o(P,2);{var l=i=>{var v=da(),k=o(r(v),2);he(k,21,()=>T,A=>A.value,(A,y)=>{var L=va(),le=r(L,!0);t(L);var ie={};I(()=>{X(le,e(y).label),ie!==(ie=e(y).value)&&(L.value=(L.__value=e(y).value)??"")}),d(A,L)}),t(k);var j;ut(k),t(v),I(()=>{j!==(j=g.sortBy)&&(k.value=(k.__value=g.sortBy)??"",_t(k,g.sortBy))}),q("change",k,$),d(i,v)};K(M,i=>{oe()&&e(b).results.length>0&&i(l)})}t(V);var u=o(V,2);{var f=i=>{var v=_a(),k=r(v);he(k,20,()=>Array(8),gt,(j,A)=>{var y=ua();d(j,y)}),t(k),t(v),I(()=>ge(k,1,`results__grid results__grid--columns-${c()}`,"svelte-jrlquk")),d(i,v)},C=i=>{var v=ga(),k=o(r(v),4),j=r(k,!0);t(k);var A=o(k,2);t(v),I(()=>X(j,e(b).error.message)),q("click",A,()=>N.search(e(b).query)),d(i,v)},H=i=>{var v=fa(),k=o(r(v),4);{var j=y=>{var L=ha();d(y,L)},A=y=>{var L=pa();d(y,L)};K(k,y=>{e(b).query?y(j):y(A,!1)})}t(v),d(i,v)},re=i=>{var v=ya();let k;he(v,21,()=>e(b).results,j=>j.id,(j,A)=>{var y=ma(),L=r(y),le=r(L),ie=r(le);t(le);var x=o(le,2),J=r(x);t(x),t(L);var ne=o(L,2),ce=r(ne),pe=r(ce),n=r(pe,!0);t(pe);var a=o(pe,2),w=r(a,!0);t(a),t(ce),t(ne),t(y),I(()=>{z(le,"aria-label",`View ${e(A).title}`),z(ie,"src",e(A).images.preview),z(ie,"alt",e(A).altText),X(n,e(A).title),X(w,e(A).artist.name)}),q("click",le,()=>W(e(A))),q("click",J,Z=>E(e(A),Z)),q("click",ce,()=>W(e(A))),d(j,y)}),t(v),I(()=>k=ge(v,1,`results__grid results__grid--columns-${c()}`,"svelte-jrlquk",k,{"results__grid--masonry":S()==="masonry","results__grid--list":S()==="list"})),d(i,v)};K(u,i=>{e(b).loading?i(f):e(b).error?i(C,1):e(b).results.length===0?i(H,2):i(re,!1)})}t(R),I(()=>{B=ge(R,1,`results ${O()}`,"svelte-jrlquk",B,{"results--loading":e(b).loading}),z(R,"aria-busy",e(b).loading)}),d(_,R),Se()}Ee(["change","click"]);var xa=h('<div class="suggestions__item-confidence svelte-c3for3"><span class="suggestions__confidence-bar svelte-c3for3" aria-hidden="true"></span> <span class="suggestions__confidence-text svelte-c3for3">85% match</span></div>'),Sa=h('<div class="suggestions__item svelte-c3for3" role="button" tabindex="0"><div class="suggestions__item-image svelte-c3for3"><img loading="lazy" class="svelte-c3for3"/> <div class="suggestions__item-overlay svelte-c3for3"><button type="button" class="suggestions__item-action svelte-c3for3" aria-label="Find similar artworks">More like this</button></div></div> <div class="suggestions__item-info svelte-c3for3"><h3 class="suggestions__item-title svelte-c3for3"> </h3> <p class="suggestions__item-artist svelte-c3for3"> </p> <!></div></div>'),Ca=h('<section aria-labelledby="suggestions-title"><div class="suggestions__header svelte-c3for3"><h2 id="suggestions-title" class="suggestions__title svelte-c3for3"> </h2> <button type="button" class="suggestions__refresh svelte-c3for3" aria-label="Refresh suggestions"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-c3for3"><path d="M23 4v6h-6M1 20v-6h6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <div class="suggestions__grid svelte-c3for3"></div></section>');function wa(_,s){xe(s,!0);let S=F(s,"title",3,"Suggested for you"),c=F(s,"maxItems",3,6),oe=F(s,"showConfidence",3,!1),ae=F(s,"class",3,"");const O=Te(),{store:g,handlers:N}=O;let U=_e(be(g.get()));Fe(()=>g.subscribe(B=>{G(U,B,!0)})),Fe(()=>{g.loadSuggestions()});const b=ve(()=>e(U).suggestions.slice(0,c()));function T(R){N.onResultClick?.(R)}function $(R,B){B.stopPropagation(),N.onMoreLikeThis?.(R)}var W=We(),E=Oe(W);{var Q=R=>{var B=Ca(),V=r(B),P=r(V),p=r(P,!0);t(P);var M=o(P,2);t(V);var l=o(V,2);he(l,21,()=>e(b),u=>u.id,(u,f)=>{var C=Sa(),H=r(C),re=r(H),i=o(re,2),v=r(i);t(i),t(H);var k=o(H,2),j=r(k),A=r(j,!0);t(j);var y=o(j,2),L=r(y,!0);t(y);var le=o(y,2);{var ie=x=>{var J=xa();d(x,J)};K(le,x=>{oe()&&x(ie)})}t(k),t(C),I(()=>{z(re,"src",e(f).images.preview),z(re,"alt",e(f).altText),X(A,e(f).title),X(L,e(f).artist.name)}),q("click",C,()=>T(e(f))),q("keydown",C,x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),T(e(f)))}),q("click",v,x=>$(e(f),x)),d(u,C)}),t(l),t(B),I(()=>{ge(B,1,`suggestions ${ae()}`,"svelte-c3for3"),X(p,S())}),q("click",M,()=>g.loadSuggestions()),d(R,B)};K(E,R=>{e(b).length>0&&R(Q)})}d(_,W),Se()}Ee(["click","keydown"]);const je={Root:kt,SearchBar:Rt,Filters:ia,Results:ka,Suggestions:wa,ColorPaletteSearch:et,MoodMap:tt};class Ma{_value;_subscribers=new Set;constructor(s){this._value=s}get value(){return this._value}set value(s){this._value=s,this._subscribers.forEach(S=>{try{S(s)}catch(c){console.error("[ReactiveState] Error in subscriber:",c)}})}subscribe(s){return this._subscribers.add(s),s(this._value),()=>{this._subscribers.delete(s)}}update(s){this.value=s(this._value)}}function Ae(_,s){if(!(typeof localStorage>"u"))try{localStorage.setItem(_,JSON.stringify(s))}catch(S){console.warn("[persistToLocalStorage] Failed to save:",S)}}function Xe(_,s){if(typeof localStorage>"u")return s;try{const S=localStorage.getItem(_);return S?JSON.parse(S):s}catch(S){return console.warn("[loadFromLocalStorage] Failed to load:",S),s}}function ja(_,s){let S=null;return(...c)=>{S&&clearTimeout(S),S=setTimeout(()=>{_(...c),S=null},s)}}const Ne="artist-discovery-recent-searches",Ue="artist-discovery-saved-searches";function Fa(_={}){const{adapter:s,debounceMs:S=300,maxRecentSearches:c=10,enableSuggestions:oe=!0}=_,ae=Xe(Ne,[]),O=Xe(Ue,[]),g=new Ma({query:"",results:[],filters:{},suggestions:[],recentSearches:ae,savedSearches:O,loading:!1,error:null}),N=ja(U,S);async function U(l,u){if(!l.trim()&&Object.keys(u).length===0){g.update(f=>({...f,results:[],loading:!1}));return}g.update(f=>({...f,loading:!0,error:null}));try{if(!s){g.update(i=>({...i,results:[],loading:!1}));return}const f={query:l.trim(),...b(u),first:50},re=(await s.query({query:"DiscoverArtworks",variables:f})).data?.discoverArtworks?.edges?.map(i=>i.node)??[];g.update(i=>({...i,results:re,loading:!1})),l.trim()&&T(l.trim())}catch(f){g.update(C=>({...C,loading:!1,error:f instanceof Error?f:new Error("Search failed")}))}}function b(l){const u={};return l.styles?.length&&(u.styles=l.styles),l.mediums?.length&&(u.mediums=l.mediums),l.tags?.length&&(u.tags=l.tags),l.colorPalette&&(u.colors=l.colorPalette.colors,u.colorTolerance=l.colorPalette.tolerance),l.mood&&(u.moodEnergy=l.mood.energy,u.moodValence=l.mood.valence),l.dateRange&&(l.dateRange.from&&(u.createdAfter=new Date(l.dateRange.from).toISOString()),l.dateRange.to&&(u.createdBefore=new Date(l.dateRange.to).toISOString())),l.priceRange&&(u.minPrice=l.priceRange.min,u.maxPrice=l.priceRange.max),l.aiUsage&&(u.aiUsage=l.aiUsage),l.forSaleOnly&&(u.forSale=!0),l.featuredOnly&&(u.featured=!0),u}function T(l){g.update(u=>{const f=u.recentSearches.filter(H=>H!==l),C=[l,...f].slice(0,c);return Ae(Ne,C),{...u,recentSearches:C}})}async function $(l){g.update(u=>({...u,query:l})),N(l,g.value.filters)}function W(l){g.update(u=>({...u,filters:{...u.filters,...l}})),N(g.value.query,g.value.filters)}function E(){g.update(l=>({...l,filters:{}})),N(g.value.query,{})}function Q(l){const u={id:`search-${Date.now()}`,name:l,query:g.value.query,filters:{...g.value.filters},createdAt:new Date().toISOString()};g.update(f=>{const C=[...f.savedSearches,u];return Ae(Ue,C),{...f,savedSearches:C}})}function R(l){g.update(u=>{const f=u.savedSearches.filter(C=>C.id!==l);return Ae(Ue,f),{...u,savedSearches:f}})}function B(){g.update(l=>(Ae(Ne,[]),{...l,recentSearches:[]}))}async function V(){if(!(!oe||!s))try{const f=(await s.query({query:"GetArtworkSuggestions",variables:{recentSearches:g.value.recentSearches.slice(0,5),first:10}})).data?.artworkSuggestions?.edges?.map(C=>C.node)??[];g.update(C=>({...C,suggestions:f}))}catch(l){console.warn("[DiscoveryStore] Failed to load suggestions:",l)}}function P(l){return g.subscribe(l)}function p(){return g.value}function M(){}return{subscribe:P,get:p,destroy:M,search:$,updateFilters:W,clearFilters:E,saveSearch:Q,deleteSavedSearch:R,clearRecentSearches:B,loadSuggestions:V}}var Ea=h('<div class="discovery-header svelte-14crx0f"><!> <!></div> <div class="discovery-grid svelte-14crx0f"><div class="results-area"><!></div> <div class="discovery-sidebar"><div class="widget svelte-14crx0f"><h3 class="svelte-14crx0f">Suggestions</h3> <!></div> <div class="widget svelte-14crx0f"><h3 class="svelte-14crx0f">Color Match</h3> <!></div> <div class="widget svelte-14crx0f"><h3 class="svelte-14crx0f">Mood Map</h3> <!></div></div></div>',1),Ra=h('<section class="demo-section"><div class="demo-container svelte-14crx0f"><!></div> <!></section>');function Na(_,s){xe(s,!0);const S=Fa({}),c=`
<DiscoveryEngine.Root {store}>
  <DiscoveryEngine.SearchBar />
  <DiscoveryEngine.Filters />
  <div class="discovery-content">
      <DiscoveryEngine.Results />
      <aside class="sidebar">
          <DiscoveryEngine.Suggestions />
          <DiscoveryEngine.ColorPaletteSearch />
          <DiscoveryEngine.MoodMap />
      </aside>
  </div>
</DiscoveryEngine.Root>`;nt(_,{eyebrow:"Artist Face / Discovery",title:"Discovery Engine",description:"AI-powered search and discovery for artworks.",children:(oe,ae)=>{var O=Ra(),g=r(O),N=r(g);Me(N,()=>je.Root,(b,T)=>{T(b,{get store(){return S},children:($,W)=>{var E=Ea(),Q=Oe(E),R=r(Q);Me(R,()=>je.SearchBar,(i,v)=>{v(i,{})});var B=o(R,2);Me(B,()=>je.Filters,(i,v)=>{v(i,{})}),t(Q);var V=o(Q,2),P=r(V),p=r(P);Me(p,()=>je.Results,(i,v)=>{v(i,{})}),t(P);var M=o(P,2),l=r(M),u=o(r(l),2);Me(u,()=>je.Suggestions,(i,v)=>{v(i,{})}),t(l);var f=o(l,2),C=o(r(f),2);Me(C,()=>je.ColorPaletteSearch,(i,v)=>{v(i,{})}),t(f);var H=o(f,2),re=o(r(H),2);Me(re,()=>je.MoodMap,(i,v)=>{v(i,{})}),t(H),t(M),t(V),d($,E)},$$slots:{default:!0}})}),t(g);var U=o(g,2);ct(U,{code:c,language:"svelte"}),t(O),d(oe,O)},$$slots:{default:!0}}),Se()}export{Na as component};
