import{a as u,b as g,g as ue,s as I,h as Q,c as be,j as Xe,f as at}from"../chunks/BTgIKdxS.js";import{ak as Te,al as $e,p as ne,t as x,a as le,g as e,c as a,r as t,u as Z,s as r,f as fe,P as st,d as Se,h as Be,Q as rt}from"../chunks/D-WlePPY.js";import{c as Ce}from"../chunks/D4O329PC.js";import{D as it}from"../chunks/DhBnkOx0.js";import{C as ot}from"../chunks/DeXdVqsM.js";import{b as Me,s as Y,c as nt,d as c,e as ce,i as Re,j as Ue,k as Fe,r as Ee,g as We}from"../chunks/EAUZg0eb.js";import{p as V,i as N}from"../chunks/COMTHQNu.js";import{b as lt}from"../chunks/CyXc35a2.js";import{b as vt}from"../chunks/gQNFtiqf.js";const He=Symbol("wip-context"),ct={showTimeline:!0,showComments:!0,enableComparison:!0,showProgress:!0,allowUpdates:!1,class:""};function we(n){return typeof n=="function"?n():n}function dt(n,s={},M={},m=!1){const h={get thread(){return we(n)},get config(){return{...ct,...we(s)}},get handlers(){return we(M)},currentVersionIndex:we(n).updates.length-1,comparison:{isActive:!1,mode:"side-by-side",versionA:0,versionB:we(n).updates.length-1,sliderPosition:50,overlayOpacity:.5},isFollowing:!1,get isOwner(){return we(m)},selectedUpdate:null};return Te(He,h),h}function ye(){const n=$e(He);if(!n)throw new Error("WIP context not found. Ensure this component is used within a WorkInProgress.Root component.");return n}function Qe(n,s){s>=0&&s<n.thread.updates.length&&(n.currentVersionIndex=s,n.selectedUpdate=n.thread.updates[s]??null)}function _t(n,s){n.comparison.mode=s}function ut(n,s){const M=new Date(n.createdAt),m=new Date(s.createdAt),h=Math.abs(m.getTime()-M.getTime()),q=Math.floor(h/(1e3*60*60*24)),i=Math.floor(h%(1e3*60*60*24)/(1e3*60*60));return q>0?`${q} day${q>1?"s":""}`:i>0?`${i} hour${i>1?"s":""}`:"Less than an hour"}var mt=g('<article><div class="wip-thread__content svelte-4m6j8u"><!></div></article>');function Le(n,s){ne(s,!0);let M=V(s,"handlers",19,()=>({})),m=V(s,"isOwner",3,!1),h=V(s,"showTimeline",3,!0),q=V(s,"showComments",3,!0),i=V(s,"enableComparison",3,!0),w=V(s,"showProgress",3,!0),A=V(s,"allowUpdates",3,!1),B=V(s,"class",3,"");const D=Z(()=>({showTimeline:h(),showComments:q(),enableComparison:i(),showProgress:w(),allowUpdates:A()}));dt(()=>s.thread,()=>e(D),()=>M(),()=>m());const z=Z(()=>s.thread.isComplete?"completed":s.thread.currentProgress===0&&s.thread.updates.length===0?"abandoned":"in-progress"),b=Z(()=>["wip-thread",`wip-thread--${e(z)}`,B()].filter(Boolean).join(" "));var o=mt(),f=a(o),C=a(f);Me(C,()=>s.children),t(f),t(o),x(()=>{Y(o,1,nt(e(b)),"svelte-4m6j8u"),c(o,"aria-label",`Work in progress: ${s.thread.title}`),c(o,"data-status",e(z))}),u(n,o),le()}var pt=g('<img alt="" class="wip-header__avatar svelte-nb8n7f"/>'),gt=g('<span class="wip-header__progress"> </span>'),ht=g('<button type="button"> </button>'),ft=g('<button type="button" class="wip-header__action wip-header__action--secondary svelte-nb8n7f" aria-label="Share thread"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-nb8n7f"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8" stroke-width="2" stroke-linecap="round"></path><polyline points="16,6 12,2 8,6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></polyline><line x1="12" y1="2" x2="12" y2="15" stroke-width="2" stroke-linecap="round"></line></svg></button>'),wt=g('<header><div class="wip-header__artist svelte-nb8n7f"><!> <div class="wip-header__artist-info svelte-nb8n7f"><span class="wip-header__artist-name svelte-nb8n7f"> </span> <time class="wip-header__date svelte-nb8n7f"> </time></div></div> <div class="wip-header__main svelte-nb8n7f"><h1 class="wip-header__title svelte-nb8n7f"> </h1> <div class="wip-header__meta svelte-nb8n7f"><span class="wip-header__status svelte-nb8n7f"> </span> <span class="wip-header__versions"> </span> <!></div></div> <div class="wip-header__actions svelte-nb8n7f"><!> <!></div></header>');function bt(n,s){ne(s,!0);let M=V(s,"showFollow",3,!0),m=V(s,"showShare",3,!0),h=V(s,"class",3,"");const q=ye(),{thread:i,config:w,handlers:A}=q,B=Z(()=>new Date(i.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),D=Z(()=>()=>i.isComplete?"Completed":"In Progress");async function z(){q.isFollowing=!q.isFollowing,await A.onFollow?.(i)}async function b(){await A.onShare?.(i)}var o=wt(),f=a(o),C=a(f);{var T=K=>{var j=pt();x(()=>c(j,"src",i.artistAvatar)),u(K,j)};N(C,K=>{i.artistAvatar&&K(T)})}var S=r(C,2),E=a(S),P=a(E,!0);t(E);var _=r(E,2),v=a(_);t(_),t(S),t(f);var l=r(f,2),y=a(l),k=a(y,!0);t(y);var U=r(y,2),W=a(U),$=a(W,!0);t(W);var p=r(W,2),d=a(p);t(p);var O=r(p,2);{var R=K=>{var j=gt(),pe=a(j);t(j),x(()=>I(pe,`${i.currentProgress??""}% complete`)),u(K,j)};N(O,K=>{w.showProgress&&K(R)})}t(U),t(l);var G=r(l,2),se=a(G);{var oe=K=>{var j=ht();let pe;var ke=a(j,!0);t(j),x(()=>{pe=Y(j,1,"wip-header__action svelte-nb8n7f",null,pe,{following:q.isFollowing}),c(j,"aria-pressed",q.isFollowing),I(ke,q.isFollowing?"Following":"Follow")}),Q("click",j,z),u(K,j)};N(se,K=>{M()&&K(oe)})}var te=r(se,2);{var me=K=>{var j=ft();Q("click",j,b),u(K,j)};N(te,K=>{m()&&K(me)})}t(G),t(o),x((K,j)=>{Y(o,1,`wip-header ${h()}`,"svelte-nb8n7f"),I(P,i.artistName),c(_,"datetime",K),I(v,`Started ${e(B)??""}`),I(k,i.title),c(W,"data-status",i.isComplete?"completed":"in-progress"),I($,j),I(d,`${i.updates.length??""}
				${i.updates.length===1?"update":"updates"}`)},[()=>new Date(i.createdAt).toISOString(),()=>e(D)()]),u(n,o),le()}ue(["click"]);var yt=g('<img loading="lazy" class="svelte-14k9iti"/>'),kt=g('<div class="wip-version-list__placeholder svelte-14k9iti"><span> </span></div>'),xt=g('<span class="wip-version-list__progress svelte-14k9iti"> </span>'),Ct=g('<button type="button" role="option"><div class="wip-version-list__thumbnail svelte-14k9iti"><!></div> <div class="wip-version-list__info svelte-14k9iti"><span class="wip-version-list__number svelte-14k9iti"> </span> <time class="wip-version-list__date svelte-14k9iti"> </time> <!></div></button>'),qt=g('<div role="listbox" aria-label="Version history"></div>');function At(n,s){ne(s,!0);let M=V(s,"direction",3,"horizontal"),m=V(s,"class",3,"");const h=ye(),{thread:q}=h;function i(z){return new Date(z).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function w(z){const b=z.media?.find(o=>o.type==="image");return b?.thumbnailUrl||b?.url||null}function A(z){Qe(h,z)}function B(z,b){(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),A(b))}var D=qt();ce(D,23,()=>q.updates,z=>z.id,(z,b,o)=>{const f=Z(()=>w(e(b)));var C=Ct();let T;var S=a(C),E=a(S);{var P=p=>{var d=yt();x(()=>{c(d,"src",e(f)),c(d,"alt",`Version ${e(o)+1}`)}),u(p,d)},_=p=>{var d=kt(),O=a(d),R=a(O,!0);t(O),t(d),x(()=>I(R,e(o)+1)),u(p,d)};N(E,p=>{e(f)?p(P):p(_,!1)})}t(S);var v=r(S,2),l=a(v),y=a(l);t(l);var k=r(l,2),U=a(k,!0);t(k);var W=r(k,2);{var $=p=>{var d=xt(),O=a(d);t(d),x(()=>I(O,`${e(b).progress??""}%`)),u(p,d)};N(W,p=>{e(b).progress!==void 0&&p($)})}t(v),t(C),x((p,d)=>{T=Y(C,1,"wip-version-list__item svelte-14k9iti",null,T,{selected:h.currentVersionIndex===e(o)}),c(C,"aria-selected",h.currentVersionIndex===e(o)),I(y,`v${e(o)+1}`),c(k,"datetime",p),I(U,d)},[()=>new Date(e(b).createdAt).toISOString(),()=>i(e(b).createdAt)]),Q("click",C,()=>A(e(o))),Q("keydown",C,p=>B(p,e(o))),u(z,C)}),t(D),x(()=>Y(D,1,`wip-version-list wip-version-list--${M()} ${m()}`,"svelte-14k9iti")),u(n,D),le()}ue(["click","keydown"]);var It=g('<div class="wip-version-card__image svelte-ilpmyc"><img class="svelte-ilpmyc"/></div>'),zt=g('<div class="wip-version-card__progress svelte-ilpmyc" role="progressbar"><svg class="wip-version-card__progress-svg svelte-ilpmyc" viewBox="0 0 100 8" preserveAspectRatio="none" aria-hidden="true"><rect class="wip-version-card__progress-track svelte-ilpmyc" x="0" y="0" width="100" height="8" rx="4"></rect><rect class="wip-version-card__progress-fill svelte-ilpmyc" x="0" y="0" height="8" rx="4"></rect></svg> <span class="wip-version-card__progress-text svelte-ilpmyc"> </span></div>'),St=g('<div class="wip-version-card__reactions svelte-ilpmyc"><button type="button" class="wip-version-card__reaction svelte-ilpmyc" aria-label="Like this update"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-ilpmyc"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span> </span></button> <button type="button" class="wip-version-card__reaction svelte-ilpmyc" aria-label="View comments"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true" class="svelte-ilpmyc"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> <span> </span></button></div>'),Pt=g('<article><!> <div class="wip-version-card__content svelte-ilpmyc"><!> <p class="wip-version-card__commentary svelte-ilpmyc"> </p> <time class="wip-version-card__date svelte-ilpmyc"> </time> <!></div></article>');function Dt(n,s){ne(s,!0);let M=V(s,"showReactions",3,!0),m=V(s,"class",3,"");const h=ye(),{thread:q,handlers:i}=h,w=Z(()=>s.update||h.selectedUpdate||q.updates[h.currentVersionIndex]),A=Z(()=>()=>e(w)?.media?.find(C=>C.type==="image")?.url||null),B=Z(()=>()=>e(w)?new Date(e(w).createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"");async function D(){e(w)&&await i.onLikeUpdate?.(q,e(w).id)}var z=be(),b=fe(z);{var o=f=>{var C=Pt(),T=a(C);{var S=p=>{var d=It(),O=a(d);t(d),x(R=>{c(O,"src",R),c(O,"alt",e(w).content||"Version update")},[()=>e(A)()]),u(p,d)},E=Z(()=>e(A)());N(T,p=>{e(E)&&p(S)})}var P=r(T,2),_=a(P);{var v=p=>{var d=zt();c(d,"aria-valuemin",0),c(d,"aria-valuemax",100);var O=a(d),R=r(a(O));t(O);var G=r(O,2),se=a(G);t(G),t(d),x(()=>{c(d,"aria-valuenow",e(w).progress),c(R,"width",e(w).progress),I(se,`${e(w).progress??""}% complete`)}),u(p,d)};N(_,p=>{e(w).progress!==void 0&&p(v)})}var l=r(_,2),y=a(l,!0);t(l);var k=r(l,2),U=a(k,!0);t(k);var W=r(k,2);{var $=p=>{var d=St(),O=a(d),R=r(a(O),2),G=a(R,!0);t(R),t(O);var se=r(O,2),oe=r(a(se),2),te=a(oe,!0);t(oe),t(se),t(d),x(()=>{I(G,e(w).likeCount||0),I(te,e(w).commentCount||0)}),Q("click",O,D),u(p,d)};N(W,p=>{M()&&p($)})}t(P),t(C),x((p,d)=>{Y(C,1,`wip-version-card ${m()}`,"svelte-ilpmyc"),I(y,e(w).content),c(k,"datetime",p),I(U,d)},[()=>new Date(e(w).createdAt).toISOString(),()=>e(B)()]),u(f,C)};N(b,f=>{e(w)&&f(o)})}u(n,z),le()}ue(["click"]);var Tt=g("<option></option>"),Mt=g("<option></option>"),Ot=g('<img class="svelte-1qistdz"/>'),Vt=g('<img class="svelte-1qistdz"/>'),Nt=g('<div class="wip-compare__side-by-side svelte-1qistdz"><div class="wip-compare__panel svelte-1qistdz"><!> <span class="wip-compare__label svelte-1qistdz"> </span></div> <div class="wip-compare__panel svelte-1qistdz"><!> <span class="wip-compare__label svelte-1qistdz"> </span></div></div>'),Bt=g('<img class="wip-compare__slider-base svelte-1qistdz"/>'),Rt=g('<div><img class="svelte-1qistdz"/></div>'),Ut=g('<div class="wip-compare__slider svelte-1qistdz"><div class="wip-compare__slider-container svelte-1qistdz"><!> <!> <div><div class="wip-compare__slider-line svelte-1qistdz"></div></div></div> <input type="range" min="0" max="100" step="5" class="wip-compare__slider-input svelte-1qistdz" aria-label="Comparison slider"/></div>'),Ft=g('<img class="wip-compare__overlay-base svelte-1qistdz"/>'),Et=g("<img/>"),Wt=g('<div class="wip-compare__overlay svelte-1qistdz"><!> <!> <label class="wip-compare__opacity-control svelte-1qistdz"><span>Opacity:</span> <input type="range" min="0" max="1" step="0.1" class="svelte-1qistdz"/></label></div>'),Lt=g('<div><div class="wip-compare__controls svelte-1qistdz"><div class="wip-compare__modes svelte-1qistdz" role="tablist"><button type="button" role="tab">Side by Side</button> <button type="button" role="tab">Slider</button> <button type="button" role="tab">Overlay</button></div> <div class="wip-compare__selectors svelte-1qistdz"><label class="wip-compare__selector svelte-1qistdz"><span>Version A:</span> <select class="svelte-1qistdz"></select></label> <label class="wip-compare__selector svelte-1qistdz"><span>Version B:</span> <select class="svelte-1qistdz"></select></label></div></div> <div class="wip-compare__view svelte-1qistdz"><!></div></div>');function jt(n,s){ne(s,!0);let M=V(s,"class",3,"");const m=ye(),{thread:h,config:q,comparison:i}=m;function w(_){return h.updates[_]?.media?.find(y=>y.type==="image")?.url||null}function A(_){_t(m,_)}function B(_){const v=_.target,l=parseInt(v.value,10),y=Math.max(0,Math.min(100,Number.isFinite(l)?l:50));m.comparison.sliderPosition=Math.round(y/5)*5}function D(_){const v=_.target,l=parseFloat(v.value),y=Math.max(0,Math.min(1,Number.isFinite(l)?l:.5));m.comparison.overlayOpacity=Math.round(y*10)/10}function z(_){const v=_.target;m.comparison.versionA=parseInt(v.value,10)}function b(_){const v=_.target;m.comparison.versionB=parseInt(v.value,10)}const o=Z(()=>w(i.versionA)),f=Z(()=>w(i.versionB)),C=Z(()=>Math.max(0,Math.min(100,Math.round(i.sliderPosition/5)*5))),T=Z(()=>Math.max(0,Math.min(100,Math.round(i.overlayOpacity*10)*10)));var S=be(),E=fe(S);{var P=_=>{var v=Lt(),l=a(v),y=a(l),k=a(y);let U;var W=r(k,2);let $;var p=r(W,2);let d;t(y);var O=r(y,2),R=a(O),G=r(a(R),2);ce(G,21,()=>h.updates,Re,(ae,re,J)=>{var ee=Tt();ee.textContent=`v${J+1}`,ee.value=ee.__value=J,u(ae,ee)}),t(G);var se;Ue(G),t(R);var oe=r(R,2),te=r(a(oe),2);ce(te,21,()=>h.updates,Re,(ae,re,J)=>{var ee=Mt();ee.textContent=`v${J+1}`,ee.value=ee.__value=J,u(ae,ee)}),t(te);var me;Ue(te),t(oe),t(O),t(l);var K=r(l,2),j=a(K);{var pe=ae=>{var re=Nt(),J=a(re),ee=a(J);{var ge=ve=>{var _e=Ot();x(()=>{c(_e,"src",e(o)),c(_e,"alt",`Version ${i.versionA+1}`)}),u(ve,_e)};N(ee,ve=>{e(o)&&ve(ge)})}var de=r(ee,2),X=a(de);t(de),t(J);var L=r(J,2),H=a(L);{var F=ve=>{var _e=Vt();x(()=>{c(_e,"src",e(f)),c(_e,"alt",`Version ${i.versionB+1}`)}),u(ve,_e)};N(H,ve=>{e(f)&&ve(F)})}var ie=r(H,2),he=a(ie);t(ie),t(L),t(re),x(()=>{I(X,`v${i.versionA+1}`),I(he,`v${i.versionB+1}`)}),u(ae,re)},ke=ae=>{var re=Ut(),J=a(re),ee=a(J);{var ge=F=>{var ie=Bt();x(()=>{c(ie,"src",e(f)),c(ie,"alt",`Version ${i.versionB+1}`)}),u(F,ie)};N(ee,F=>{e(f)&&F(ge)})}var de=r(ee,2);{var X=F=>{var ie=Rt(),he=a(ie);t(ie),x(()=>{Y(ie,1,`wip-compare__slider-overlay wip-compare__slider-overlay--p${e(C)}`,"svelte-1qistdz"),c(he,"src",e(o)),c(he,"alt",`Version ${i.versionA+1}`)}),u(F,ie)};N(de,F=>{e(o)&&F(X)})}var L=r(de,2);t(J);var H=r(J,2);Ee(H),t(re),x(()=>{Y(L,1,`wip-compare__slider-handle wip-compare__slider-handle--p${e(C)}`,"svelte-1qistdz"),We(H,i.sliderPosition)}),Q("input",H,B),u(ae,re)},Ie=ae=>{var re=Wt(),J=a(re);{var ee=H=>{var F=Ft();x(()=>{c(F,"src",e(f)),c(F,"alt",`Version ${i.versionB+1}`)}),u(H,F)};N(J,H=>{e(f)&&H(ee)})}var ge=r(J,2);{var de=H=>{var F=Et();x(()=>{c(F,"src",e(o)),c(F,"alt",`Version ${i.versionA+1}`),Y(F,1,`wip-compare__overlay-top wip-compare__overlay-top--opacity-${e(T)}`,"svelte-1qistdz")}),u(H,F)};N(ge,H=>{e(o)&&H(de)})}var X=r(ge,2),L=r(a(X),2);Ee(L),t(X),t(re),x(()=>We(L,i.overlayOpacity)),Q("input",L,D),u(ae,re)};N(j,ae=>{i.mode==="side-by-side"?ae(pe):i.mode==="slider"?ae(ke,1):i.mode==="overlay"&&ae(Ie,2)})}t(K),t(v),x(()=>{Y(v,1,`wip-compare ${M()}`,"svelte-1qistdz"),U=Y(k,1,"wip-compare__mode svelte-1qistdz",null,U,{active:i.mode==="side-by-side"}),c(k,"aria-selected",i.mode==="side-by-side"),$=Y(W,1,"wip-compare__mode svelte-1qistdz",null,$,{active:i.mode==="slider"}),c(W,"aria-selected",i.mode==="slider"),d=Y(p,1,"wip-compare__mode svelte-1qistdz",null,d,{active:i.mode==="overlay"}),c(p,"aria-selected",i.mode==="overlay"),se!==(se=i.versionA)&&(G.value=(G.__value=i.versionA)??"",Fe(G,i.versionA)),me!==(me=i.versionB)&&(te.value=(te.__value=i.versionB)??"",Fe(te,i.versionB)),c(K,"data-mode",i.mode)}),Q("click",k,()=>A("side-by-side")),Q("click",W,()=>A("slider")),Q("click",p,()=>A("overlay")),Q("change",G,z),Q("change",te,b),u(_,v)};N(E,_=>{q.enableComparison&&i.isActive&&_(P)})}u(n,S),le()}ue(["click","change","input"]);var Yt=g('<span class="wip-timeline__milestone-progress svelte-kl78p5"> </span>'),Kt=g('<button type="button"><span class="wip-timeline__milestone-dot svelte-kl78p5" aria-hidden="true"></span> <span class="wip-timeline__milestone-label svelte-kl78p5"> </span> <!></button>'),Xt=g('<li class="wip-timeline__time-between-item svelte-kl78p5"> </li>'),$t=g('<ol class="wip-timeline__time-between svelte-kl78p5" aria-label="Time between versions"></ol>'),Ht=g('<nav aria-label="Progress timeline"><div class="wip-timeline__track svelte-kl78p5" role="progressbar"><svg class="wip-timeline__track-svg svelte-kl78p5" viewBox="0 0 100 4" preserveAspectRatio="none" aria-hidden="true"><rect class="wip-timeline__track-bg svelte-kl78p5" x="0" y="0" width="100" height="4" rx="2"></rect><rect class="wip-timeline__track-fill svelte-kl78p5" x="0" y="0" height="4" rx="2"></rect></svg></div> <div class="wip-timeline__milestones svelte-kl78p5" role="list"></div> <!></nav>');function Qt(n,s){ne(s,!0);let M=V(s,"showTimeBetween",3,!0),m=V(s,"class",3,"");const h=ye(),{thread:q,config:i}=h;function w(b){Qe(h,b)}const A=Z(()=>{if(!M()||q.updates.length<2)return[];const b=[];for(let o=0;o<q.updates.length-1;o++){const f=q.updates[o],C=q.updates[o+1];!f||!C||b.push({from:o,to:o+1,label:ut(f,C)})}return b});var B=be(),D=fe(B);{var z=b=>{var o=Ht(),f=a(o);c(f,"aria-valuemin",0),c(f,"aria-valuemax",100);var C=a(f),T=r(a(C));t(C),t(f);var S=r(f,2);ce(S,23,()=>q.updates,_=>_.id,(_,v,l)=>{var y=Kt();let k;var U=r(a(y),2),W=a(U);t(U);var $=r(U,2);{var p=d=>{var O=Yt(),R=a(O);t(O),x(()=>I(R,`${e(v).progress??""}%`)),u(d,O)};N($,d=>{e(v).progress!==void 0&&d(p)})}t(y),x(()=>{k=Y(y,1,"wip-timeline__milestone svelte-kl78p5",null,k,{active:h.currentVersionIndex===e(l),current:e(l)===q.updates.length-1}),c(y,"aria-label",`Version ${e(l)+1}, ${e(v).progress||0}% complete`),c(y,"aria-current",h.currentVersionIndex===e(l)?"step":void 0),I(W,`v${e(l)+1}`)}),Q("click",y,()=>w(e(l))),u(_,y)}),t(S);var E=r(S,2);{var P=_=>{var v=$t();ce(v,21,()=>e(A),l=>l.from,(l,y)=>{var k=Xt(),U=a(k);t(k),x(()=>I(U,`v${e(y).from+1} → v${e(y).to+1}: ${e(y).label??""}`)),u(l,k)}),t(v),u(_,v)};N(E,_=>{M()&&e(A).length>0&&_(P)})}t(o),x(()=>{Y(o,1,`wip-timeline ${m()}`,"svelte-kl78p5"),c(f,"aria-valuenow",q.currentProgress),c(T,"width",q.currentProgress)}),u(b,o)};N(D,b=>{i.showTimeline&&b(z)})}u(n,B),le()}ue(["click"]);var Zt=g('<img alt="" class="wip-comments__avatar svelte-1vfle88"/>'),Gt=g('<div class="wip-comments__avatar-placeholder svelte-1vfle88"> </div>'),Jt=g('<span class="wip-comments__version-badge svelte-1vfle88"> </span>'),ea=g('<img alt="" class="wip-comments__avatar wip-comments__avatar--small svelte-1vfle88"/>'),ta=g('<article class="wip-comments__reply svelte-1vfle88"><div class="wip-comments__author svelte-1vfle88"><!> <span class="wip-comments__author-name svelte-1vfle88"> </span> <time class="wip-comments__date svelte-1vfle88"> </time></div> <p class="wip-comments__content svelte-1vfle88"> </p></article>'),aa=g('<div class="wip-comments__replies svelte-1vfle88"></div>'),sa=g('<article class="wip-comments__item svelte-1vfle88" role="listitem"><div class="wip-comments__author svelte-1vfle88"><!> <div class="wip-comments__author-info svelte-1vfle88"><span class="wip-comments__author-name svelte-1vfle88"> </span> <time class="wip-comments__date svelte-1vfle88"> </time></div> <!></div> <p class="wip-comments__content svelte-1vfle88"> </p> <div class="wip-comments__actions svelte-1vfle88"><button type="button" class="wip-comments__action svelte-1vfle88">Reply</button></div> <!></article>'),ra=g('<section aria-labelledby="comments-heading"><h2 id="comments-heading" class="wip-comments__heading svelte-1vfle88">Discussion <span class="wip-comments__count svelte-1vfle88"> </span></h2> <form class="wip-comments__form svelte-1vfle88"><textarea class="wip-comments__input svelte-1vfle88" placeholder="Share your thoughts on this progress..." rows="3" aria-label="Write a comment"></textarea> <div class="wip-comments__form-footer svelte-1vfle88"><span class="wip-comments__version-tag svelte-1vfle88"> </span> <button type="submit" class="wip-comments__submit svelte-1vfle88">Post Comment</button></div></form> <div class="wip-comments__list svelte-1vfle88" role="list"></div></section>');function ia(n,s){ne(s,!0);let M=V(s,"comments",19,()=>[]),m=V(s,"class",3,"");const h=ye(),{thread:q,config:i,handlers:w}=h;let A=Be(""),B=Be(null);function D(T){return new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}async function z(){if(!e(A).trim())return;const T=q.updates[h.currentVersionIndex];await w.onComment?.(q,T.id,e(A).trim()),Se(A,"")}function b(T){Se(B,e(B)===T?null:T,!0)}var o=be(),f=fe(o);{var C=T=>{var S=ra(),E=a(S),P=r(a(E)),_=a(P);t(P),t(E);var v=r(E,2),l=a(v);st(l);var y=r(l,2),k=a(y),U=a(k);t(k);var W=r(k,2);t(y),t(v);var $=r(v,2);ce($,21,M,p=>p.id,(p,d)=>{var O=sa(),R=a(O),G=a(R);{var se=X=>{var L=Zt();x(()=>c(L,"src",e(d).authorAvatar)),u(X,L)},oe=X=>{var L=Gt(),H=a(L,!0);t(L),x(F=>I(H,F),[()=>e(d).authorName.charAt(0).toUpperCase()]),u(X,L)};N(G,X=>{e(d).authorAvatar?X(se):X(oe,!1)})}var te=r(G,2),me=a(te),K=a(me,!0);t(me);var j=r(me,2),pe=a(j,!0);t(j),t(te);var ke=r(te,2);{var Ie=X=>{var L=Jt(),H=a(L);t(L),x(()=>I(H,`v${e(d).versionIndex+1}`)),u(X,L)};N(ke,X=>{e(d).versionIndex!==void 0&&X(Ie)})}t(R);var ae=r(R,2),re=a(ae,!0);t(ae);var J=r(ae,2),ee=a(J);t(J);var ge=r(J,2);{var de=X=>{var L=aa();ce(L,21,()=>e(d).replies,H=>H.id,(H,F)=>{var ie=ta(),he=a(ie),ve=a(he);{var _e=xe=>{var Ne=ea();x(()=>c(Ne,"src",e(F).authorAvatar)),u(xe,Ne)};N(ve,xe=>{e(F).authorAvatar&&xe(_e)})}var ze=r(ve,2),Je=a(ze,!0);t(ze);var Oe=r(ze,2),et=a(Oe,!0);t(Oe),t(he);var Ve=r(he,2),tt=a(Ve,!0);t(Ve),t(ie),x(xe=>{I(Je,e(F).authorName),I(et,xe),I(tt,e(F).content)},[()=>D(e(F).createdAt)]),u(H,ie)}),t(L),u(X,L)};N(ge,X=>{e(d).replies&&e(d).replies.length>0&&X(de)})}t(O),x((X,L)=>{I(K,e(d).authorName),c(j,"datetime",X),I(pe,L),I(re,e(d).content)},[()=>new Date(e(d).createdAt).toISOString(),()=>D(e(d).createdAt)]),Q("click",ee,()=>b(e(d).id)),u(p,O)}),t($),t(S),x(p=>{Y(S,1,`wip-comments ${m()}`,"svelte-1vfle88"),I(_,`(${M().length??""})`),I(U,`Commenting on v${h.currentVersionIndex+1}`),W.disabled=p},[()=>!e(A).trim()]),Xe("submit",v,p=>{p.preventDefault(),z()}),lt(l,()=>e(A),p=>Se(A,p)),u(T,S)};N(f,T=>{i.showComments&&T(C)})}u(n,o),le()}ue(["click"]);const qe=Object.assign(Le,{Root:Le,Header:bt,VersionList:At,VersionCard:Dt,Compare:jt,Timeline:Qt,Comments:ia}),Ze=Symbol("critique-context"),oa={enableAnnotations:!0,enableDrawing:!0,showCategories:!0,categories:["composition","color","technique","concept","other"],maxAnnotationsPerUser:20,allowAnonymous:!1,class:""};function na(n,s={},M={},m=[]){const h=rt({get artwork(){return n},get config(){return{...oa,...s}},get handlers(){return M},annotations:m,selectedAnnotationId:null,currentTool:"point",zoom:{level:1,offsetX:0,offsetY:0},isAnnotating:!1,pendingAnnotation:null});return Te(Ze,h),h}function Ge(){const n=$e(Ze);if(!n)throw new Error("Critique context not found. Ensure this component is used within a CritiqueMode.Root component.");return n}function Pe(n,s=.25){n.zoom.level=Math.min(n.zoom.level+s,4)}function De(n,s=.25){n.zoom.level=Math.max(n.zoom.level-s,.5)}function je(n){n.zoom={level:1,offsetX:0,offsetY:0}}var la=g("<div><!></div>");function Ye(n,s){ne(s,!0);let M=V(s,"handlers",19,()=>({})),m=V(s,"initialAnnotations",19,()=>[]),h=V(s,"enableAnnotations",3,!0),q=V(s,"enableDrawing",3,!0),i=V(s,"showCategories",3,!0),w=V(s,"class",3,"");const A={enableAnnotations:h(),enableDrawing:q(),showCategories:i(),categories:s.categories},B=na(s.artwork,A,M(),m());var D=la(),z=a(D);Me(z,()=>s.children),t(D),x(()=>{Y(D,1,`critique-mode ${w()}`,"svelte-1xq8mjg"),c(D,"data-annotating",B.isAnnotating),c(D,"data-tool",B.currentTool)}),u(n,D),le()}var va=g('<div tabindex="0" role="application"><div><img class="critique-image__img svelte-1nqlx9n" draggable="false"/></div> <div class="critique-image__zoom-controls svelte-1nqlx9n"><button type="button" aria-label="Zoom in" class="svelte-1nqlx9n">+</button> <span class="svelte-1nqlx9n"> </span> <button type="button" aria-label="Zoom out" class="svelte-1nqlx9n">−</button> <button type="button" aria-label="Reset zoom" class="svelte-1nqlx9n">Reset</button></div></div>');function ca(n,s){ne(s,!0);let M=V(s,"class",3,"");const m=Ge(),{artwork:h,config:q,zoom:i}=m;let w;const A=Z(()=>Math.max(50,Math.min(400,Math.round(i.level*4)*25)));function B(v){switch(v.key){case"+":case"=":Pe(m);break;case"-":case"_":De(m);break;case"0":je(m);break}}function D(v){if(!m.isAnnotating||!q.enableAnnotations)return;const l=w.getBoundingClientRect(),y=(v.clientX-l.left)/l.width,k=(v.clientY-l.top)/l.height;m.pendingAnnotation={type:m.currentTool==="point"?"point":m.currentTool==="area"?"area":"point",position:{x:y,y:k}}}function z(v){v.preventDefault(),v.deltaY<0?Pe(m):De(m)}var b=va(),o=a(b),f=a(o);t(o);var C=r(o,2),T=a(C),S=r(T,2),E=a(S);t(S);var P=r(S,2),_=r(P,2);t(C),t(b),vt(b,v=>w=v,()=>w),x(()=>{Y(b,1,`critique-image ${M()}`,"svelte-1nqlx9n"),c(b,"aria-label",`Interactive view of ${h.altText}`),Y(o,1,`critique-image__wrapper critique-image__wrapper--zoom-${e(A)}`,"svelte-1nqlx9n"),c(f,"src",h.images.full),c(f,"alt",h.altText),I(E,`${e(A)??""}%`)}),Q("click",b,D),Xe("wheel",b,z),Q("keydown",b,B),Q("click",T,()=>Pe(m)),Q("click",P,()=>De(m)),Q("click",_,()=>je(m)),u(n,b),le()}ue(["click","keydown"]);var da=at('<g role="button"><circle class="critique-annotations__marker-hit svelte-olo2y" r="4"></circle><circle class="critique-annotations__marker-fill svelte-olo2y" r="2.5"></circle><circle class="critique-annotations__marker-outline svelte-olo2y" r="2.5"></circle><text class="critique-annotations__marker-text svelte-olo2y"> </text></g>'),_a=g('<li><button type="button" class="critique-annotations__sr-button"> </button></li>'),ua=g("<span> </span>"),ma=g('<div class="critique-annotations__panel svelte-olo2y" role="region" aria-label="Selected annotation"><div class="critique-annotations__panel-header svelte-olo2y"><span class="critique-annotations__author svelte-olo2y"> </span> <!></div> <p class="critique-annotations__content svelte-olo2y"> </p></div>'),pa=g('<div><svg class="critique-annotations__overlay svelte-olo2y" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true"></svg> <ul class="critique-annotations__sr-list svelte-olo2y"></ul> <!></div>');function ga(n,s){ne(s,!0);let M=V(s,"class",3,"");const m=Ge(),{annotations:h,config:q}=m,i={composition:"#3b82f6",color:"#f59e0b",technique:"#10b981",concept:"#8b5cf6",other:"#6b7280"};function w(o){return i[o||"other"]||i.other}function A(o){m.selectedAnnotationId=m.selectedAnnotationId===o?null:o}function B(o,f){(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),A(f))}var D=be(),z=fe(D);{var b=o=>{var f=pa(),C=a(f);ce(C,23,()=>h,P=>P.id,(P,_,v)=>{const l=Z(()=>e(_).position.x*100),y=Z(()=>e(_).position.y*100);var k=da();let U;c(k,"tabindex",-1);var W=a(k),$=r(W),p=r($),d=r(p),O=a(d,!0);t(d),t(k),x(R=>{U=Y(k,0,"critique-annotations__marker svelte-olo2y",null,U,{selected:m.selectedAnnotationId===e(_).id}),c(W,"cx",e(l)),c(W,"cy",e(y)),c($,"cx",e(l)),c($,"cy",e(y)),c($,"fill",R),c(p,"cx",e(l)),c(p,"cy",e(y)),c(d,"x",e(l)),c(d,"y",e(y)),I(O,e(v)+1)},[()=>w(e(_).category)]),Q("click",k,()=>A(e(_).id)),Q("keydown",k,R=>B(R,e(_).id)),u(P,k)}),t(C);var T=r(C,2);ce(T,23,()=>h,P=>P.id,(P,_,v)=>{var l=_a(),y=a(l),k=a(y);t(y),t(l),x(U=>{c(y,"aria-label",U),I(k,`Annotation ${e(v)+1}`)},[()=>`Annotation ${e(v)+1}: ${e(_).content.slice(0,50)}`]),Q("click",y,()=>A(e(_).id)),u(P,l)}),t(T);var S=r(T,2);{var E=P=>{const _=Z(()=>h.find(k=>k.id===m.selectedAnnotationId));var v=be(),l=fe(v);{var y=k=>{var U=ma(),W=a(U),$=a(W),p=a($,!0);t($);var d=r($,2);{var O=se=>{var oe=ua(),te=a(oe,!0);t(oe),x(()=>{Y(oe,1,`critique-annotations__category critique-annotations__category--${e(_).category}`,"svelte-olo2y"),I(te,e(_).category)}),u(se,oe)};N(d,se=>{e(_).category&&se(O)})}t(W);var R=r(W,2),G=a(R,!0);t(R),t(U),x(()=>{I(p,e(_).authorName),I(G,e(_).content)}),u(k,U)};N(l,k=>{e(_)&&k(y)})}u(P,v)};N(S,P=>{m.selectedAnnotationId&&P(E)})}t(f),x(()=>Y(f,1,`critique-annotations ${M()}`,"svelte-olo2y")),u(o,f)};N(z,o=>{q.enableAnnotations&&o(b)})}u(n,D),le()}ue(["click","keydown"]);Object.assign(Ye,{Root:Ye,Image:ca,Annotations:ga});ue(["click"]);const ha=Symbol("commission-context"),fa={inquiry:"request",quoted:"quote",accepted:"contract","in-progress":"progress",review:"progress",revision:"progress",completed:"delivery",cancelled:"request",disputed:"payment"};function Ae(n){return typeof n=="function"?n():n}function wa(n,s,M={}){const m={get commission(){return Ae(n)},get role(){return Ae(s)},get handlers(){return Ae(M)},currentStep:fa[Ae(n).status]||"request",canNavigate:!0};return Te(ha,m),m}function ba(){return["request","quote","contract","progress","delivery","payment"]}var ya=g('<li><span class="commission-workflow__step-number svelte-3uvg9h"> </span> <span class="commission-workflow__step-label svelte-3uvg9h"> </span></li>'),ka=g('<div><nav class="commission-workflow__nav svelte-3uvg9h" aria-label="Commission steps"><ol class="commission-workflow__steps svelte-3uvg9h"></ol></nav> <div class="commission-workflow__content svelte-3uvg9h"><!></div></div>');function Ke(n,s){ne(s,!0);let M=V(s,"handlers",19,()=>({})),m=V(s,"class",3,"");const h=wa(()=>s.commission,()=>s.role,()=>M()),q=ba(),i={request:"Request",quote:"Quote",contract:"Contract",progress:"Progress",delivery:"Delivery",payment:"Payment"};var w=ka(),A=a(w),B=a(A);ce(B,22,()=>q,b=>b,(b,o,f)=>{const C=Z(()=>h.currentStep===o),T=Z(()=>q.indexOf(h.currentStep)>e(f));var S=ya();let E;var P=a(S),_=a(P,!0);t(P);var v=r(P,2),l=a(v,!0);t(v),t(S),x(()=>{E=Y(S,1,"commission-workflow__step svelte-3uvg9h",null,E,{current:e(C),complete:e(T)}),c(S,"aria-current",e(C)?"step":void 0),I(_,e(f)+1),I(l,i[o])}),u(b,S)}),t(B),t(A);var D=r(A,2),z=a(D);Me(z,()=>s.children),t(D),t(w),x(()=>{Y(w,1,`commission-workflow ${m()}`,"svelte-3uvg9h"),c(w,"data-role",s.role),c(w,"data-status",s.commission.status)}),u(n,w),le()}Object.assign(Ke,{Root:Ke});var xa=g('<!> <div class="wip-layout svelte-1sg8l5k"><!> <div class="wip-sidebar svelte-1sg8l5k"><!> <!></div></div>',1),Ca=g('<section class="demo-section svelte-1sg8l5k"><header class="svelte-1sg8l5k"><h2 class="svelte-1sg8l5k">Work In Progress</h2> <p class="svelte-1sg8l5k">Share and track versions of artwork during the creation process.</p></header> <div class="demo-container svelte-1sg8l5k"><!></div> <!></section>');function Oa(n,s){ne(s,!0);const M={id:"wip-1",title:"Character Design v3",artistId:"artist-1",artistName:"Jane Artist",status:"in_progress",currentProgress:60,isComplete:!1,updates:[{id:"v1",content:"Initial sketch",media:[{type:"image",url:"/images/artist/artwork1.svg"}],createdAt:new Date(Date.now()-864e5).toISOString()},{id:"v2",content:"Color pass",media:[{type:"image",url:"/images/artist/artwork4.svg"}],createdAt:new Date().toISOString()}],createdAt:new Date().toISOString()},m=`
<!-- WIP Component -->
<WorkInProgress.Root thread={wipData}>
  <WorkInProgress.Header />
  <div class="wip-layout">
      <WorkInProgress.Compare />
      <div class="wip-sidebar">
          <WorkInProgress.Timeline />
          <WorkInProgress.Comments />
      </div>
  </div>
</WorkInProgress.Root>`;it(n,{eyebrow:"Artist Face / Creative Tools",title:"Creative Tools",description:"Tools for the artistic process: WIP sharing, critique, and commissions.",children:(h,q)=>{var i=Ca(),w=r(a(i),2),A=a(w);Ce(A,()=>qe.Root,(D,z)=>{z(D,{get thread(){return M},children:(b,o)=>{var f=xa(),C=fe(f);Ce(C,()=>qe.Header,(v,l)=>{l(v,{})});var T=r(C,2),S=a(T);Ce(S,()=>qe.Compare,(v,l)=>{l(v,{})});var E=r(S,2),P=a(E);Ce(P,()=>qe.Timeline,(v,l)=>{l(v,{})});var _=r(P,2);Ce(_,()=>qe.Comments,(v,l)=>{l(v,{})}),t(E),t(T),u(b,f)},$$slots:{default:!0}})}),t(w);var B=r(w,2);ot(B,{code:m,language:"svelte"}),t(i),u(h,i)},$$slots:{default:!0}}),le()}export{Oa as component};
