import{a as f,b as C,t as ce,s as k}from"../chunks/BTgIKdxS.js";import{p as Ue,h as P,Q as pe,f as W,d as $,c as s,s as e,a as Me,g as i,r as o,R as Le,t as D}from"../chunks/D-WlePPY.js";import{i as U}from"../chunks/COMTHQNu.js";import{e as O,d as He}from"../chunks/EAUZg0eb.js";import{c as u}from"../chunks/D4O329PC.js";import{D as Ne}from"../chunks/DhBnkOx0.js";import{C as M}from"../chunks/DeXdVqsM.js";import{C as h,a as Te}from"../chunks/BgGPVHid.js";import{B as Ve}from"../chunks/B3zyJtUo.js";import"../chunks/CyXc35a2.js";import{P as ze}from"../chunks/-F1yS8MK.js";import"../chunks/BcdIAkWN.js";import{c as Be}from"../chunks/Cl-J97cL.js";const Fe=(()=>({metadata:{slug:"compose-demo",title:"Compose Demo",description:"Demonstrates the Compose compound with baseline editors, media attachments, spoiler labels, polls, and draft persistence pulled from the published fediverse package.",sections:["Editor essentials","Media + content warnings","Autocomplete & polls","Draft saving"]}})),ht=Object.freeze(Object.defineProperty({__proto__:null,load:Fe},Symbol.toStringTag,{value:"Module"}));var Ie=C('<!> <div class="compose-row svelte-16dnk2j"><!> <!> <!></div>',1),Ke=C('<tr><td class="svelte-16dnk2j"><kbd class="svelte-16dnk2j"> </kbd></td><td class="svelte-16dnk2j"> </td></tr>'),Oe=C('<!> <!> <!> <div class="compose-row svelte-16dnk2j"><!> <!></div>',1),Qe=C('<p class="muted svelte-16dnk2j">Attach an image or video to populate this list.</p>'),Ge=C('<li class="svelte-16dnk2j"><strong> </strong> <span> </span></li>'),Je=C('<ul class="upload-list svelte-16dnk2j"></ul>'),Xe=C('<!> <div class="compose-row svelte-16dnk2j"><!> <!></div>',1),Ye=C('<div class="poll-summary svelte-16dnk2j" role="status"><p><strong>Poll ready:</strong> </p> <p>Visibility inherits from the composer selection.</p> <!></div>'),Ze=C('<!> <!> <div class="compose-row svelte-16dnk2j"><!> <!></div>',1),qe=C('<article class="submission-card svelte-16dnk2j"><header class="svelte-16dnk2j"><span class="badge svelte-16dnk2j"> </span> <time> </time></header> <p> </p> <p class="muted svelte-16dnk2j"> <!></p></article>'),et=C('<section class="compose-demo__section svelte-16dnk2j"><header><p class="section-eyebrow svelte-16dnk2j">Submissions (mock)</p> <h2>Payloads captured locally</h2></header> <div class="submission-grid svelte-16dnk2j"></div></section>'),tt=C(`<section class="compose-demo__section svelte-16dnk2j"><header><p class="section-eyebrow svelte-16dnk2j">01 · Essentials</p> <h2>Baseline composer + keyboard shortcuts</h2> <p>The compound composer exposes runes-friendly primitives so teams can mix and match editors,
				character counters, visibility menus, and submit actions. Everything here pulls from the
				published package—no source imports.</p></header> <div class="compose-demo__grid svelte-16dnk2j"><!> <div class="compose-demo__panel svelte-16dnk2j"><h3>Keyboard primer</h3> <table aria-label="Compose shortcuts" class="svelte-16dnk2j"><tbody></tbody></table> <!></div></div></section> <section class="compose-demo__section svelte-16dnk2j"><header><p class="section-eyebrow svelte-16dnk2j">02 · Media & content warnings</p> <h2>Drop files, describe alt text, and gate spoilers</h2> <p>Use <code>Compose.MediaUpload</code> to manage previews, alt text, spoiler labels, and drag &
				drop. Content warnings live outside the composer in this demo, mirroring how many Fediverse clients
				expose a toggle.</p></header> <div class="compose-demo__grid svelte-16dnk2j"><!> <div class="compose-demo__panel svelte-16dnk2j"><h3>Recent uploads (mock)</h3> <!> <!></div></div></section> <section class="compose-demo__section svelte-16dnk2j"><header><p class="section-eyebrow svelte-16dnk2j">03 · Polls, mentions, visibility</p> <h2>Autocomplete + poll creation</h2> <p>Mention autocomplete rides on <code>Compose.EditorWithAutocomplete</code>, while polls reuse
				the \`PollComposer\` pattern export so you can generate ActivityPub-compatible payloads before
				hitting your API.</p></header> <div class="compose-demo__grid svelte-16dnk2j"><!> <div class="compose-demo__panel svelte-16dnk2j"><!> <!> <!></div></div></section> <section class="compose-demo__section svelte-16dnk2j"><header><p class="section-eyebrow svelte-16dnk2j">04 · Draft saving</p> <h2>Persist local drafts with auto-save</h2> <p>\`Compose.DraftSaver\` writes to <code>localStorage</code> on an interval. We expose a dedicated
				draft key so multiple composers can coexist without clobbering each other.</p></header> <!> <!></section> <!>`,1);function _t(me,L){Ue(L,!0);let A=P(pe([])),R=P(pe([])),H=P(!1),N=P("Spoilers about a future release"),j=P(null);const ve=[{username:"alicia",displayName:"Alicia Shen",acct:"@alicia@equalto.social"},{username:"lynn",displayName:"Lynn Park",acct:"@lynn@green.earth"},{username:"theo",displayName:"Theo Martinez",acct:"@theo@mastodon.art"}],T=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`compose-${Math.random().toString(36).slice(2)}`,V=t=>new Promise(x=>setTimeout(x,t));async function E(t,x){await V(420),$(A,[{id:T(),visibility:t.visibility,content:t.content.trim()||"(No content)",mediaCount:t.mediaAttachments?.length||0,contentWarning:t.contentWarning,createdAt:new Date().toLocaleTimeString(),label:x},...i(A)].slice(0,6),!0)}const ue={onSubmit:async t=>E(t,"Baseline compose")},he={onSubmit:async t=>E({...t,contentWarning:i(H)?i(N):void 0},"Media + CW"),onMediaUpload:async t=>(await V(650),$(R,[{id:T(),name:t.name,bytes:t.size},...i(R)].slice(0,4),!0),{id:T(),type:t.type.startsWith("video")?"video":"image",url:URL.createObjectURL(t),previewUrl:URL.createObjectURL(t),description:t.name})},_e={onSubmit:async t=>E({...t,content:i(j)?`${t.content}

Poll: ${i(j).options.join(", ")} (closes in ${Math.round(i(j).expiresIn/3600)}h)`:t.content},"Autocomplete + poll")},be={onSubmit:async t=>E(t,"Drafted message")};async function ge(t,x){const S=t.toLowerCase();return x==="mention"?ve.filter(y=>y.username.includes(S)||y.displayName.toLowerCase().includes(S)).map(y=>({type:"mention",text:`${y.displayName} (${y.acct})`,value:`${y.acct} `,metadata:{username:y.username,displayName:y.displayName}})):x==="hashtag"?[{type:"hashtag",text:`${t}·design`,value:`#${t} `},{type:"hashtag",text:`${t}·a11y`,value:`#${t}Accessibility `}]:[{type:"emoji",text:`:${t}:`,value:`:${t}: `},{type:"emoji",text:`:${t}sparkle:`,value:`:${t}sparkle: `}]}const fe=`
<Compose.Root
  config={{ characterLimit: 500, placeholder: "What's on your mind?" }}
  handlers={basicHandlers}
>
  <Compose.Editor rows={4} />
  <div class="compose-row">
    <Compose.VisibilitySelect />
    <Compose.CharacterCount />
    <Compose.Submit />
  </div>
</Compose.Root>`,ye=`
<Compose.Root
  config={{ allowMedia: true, allowContentWarnings: true }}
  handlers={mediaHandlers}
>
  <Compose.Editor rows={3} />
  <Compose.MediaUpload />
  <ContentWarningField bind:enabled={cwEnabled} bind:text={cwText} />
  <Compose.Submit />
</Compose.Root>`,Ce=`
<Compose.Root handlers={advancedHandlers}>
  <Compose.EditorWithAutocomplete searchHandler={searchDirectory} rows={4} />
  <Compose.VisibilitySelect />
  <Compose.Submit text="Publish" />
</Compose.Root>`,ke=`
<Compose.Root handlers={draftHandlers}>
  <Compose.Editor rows={3} />
  <Compose.DraftSaver draftKey="demo-phase3" />
  <Compose.Submit text="Send" />
</Compose.Root>`;Ne(me,{eyebrow:"Fediverse Surface",get title(){return L.data.metadata.title},get description(){return L.data.metadata.description},children:(t,x)=>{var S=tt(),y=W(S),Q=e(s(y),2),G=s(Q);u(G,()=>h.Root,(n,c)=>{c(n,{config:{characterLimit:500,placeholder:"What's on your mind?"},get handlers(){return ue},children:(p,b)=>{var r=Ie(),d=W(r);u(d,()=>h.Editor,(l,a)=>{a(l,{rows:4})});var v=e(d,2),m=s(v);u(m,()=>h.VisibilitySelect,(l,a)=>{a(l,{})});var g=e(m,2);u(g,()=>h.CharacterCount,(l,a)=>{a(l,{})});var _=e(g,2);u(_,()=>h.Submit,(l,a)=>{a(l,{})}),o(v),f(p,r)},$$slots:{default:!0}})});var J=e(G,2),z=e(s(J),2),X=s(z);O(X,21,()=>Be,n=>n.combo,(n,c)=>{var p=Ke(),b=s(p),r=s(b),d=s(r,!0);o(r),o(b);var v=e(b),m=s(v,!0);o(v),o(p),D(()=>{k(d,i(c).combo),k(m,i(c).description)}),f(n,p)}),o(X),o(z);var we=e(z,2);M(we,{title:"Essentials snippet",description:"Visibility selector + counter + submit",code:fe}),o(J),o(Q),o(y);var B=e(y,2),Y=e(s(B),2),Z=s(Y);u(Z,()=>h.Root,(n,c)=>{c(n,{config:{characterLimit:500,allowMedia:!0,allowContentWarnings:!0},get handlers(){return he},children:(p,b)=>{var r=Oe(),d=W(r);u(d,()=>h.Editor,(a,w)=>{w(a,{rows:3})});var v=e(d,2);u(v,()=>h.MediaUpload,(a,w)=>{w(a,{})});var m=e(v,2);Te(m,{get enabled(){return i(H)},set enabled(a){$(H,a,!0)},get text(){return i(N)},set text(a){$(N,a,!0)}});var g=e(m,2),_=s(g);u(_,()=>h.CharacterCount,(a,w)=>{w(a,{})});var l=e(_,2);u(l,()=>h.Submit,(a,w)=>{w(a,{})}),o(g),f(p,r)},$$slots:{default:!0}})});var q=e(Z,2),ee=e(s(q),2);{var je=n=>{var c=Qe();f(n,c)},xe=n=>{var c=Je();O(c,21,()=>i(R),p=>p.id,(p,b)=>{var r=Ge(),d=s(r),v=s(d,!0);o(d);var m=e(d,2),g=s(m);o(m),o(r),D(_=>{k(v,i(b).name),k(g,`${_??""} KB`)},[()=>(i(b).bytes/1024).toFixed(1)]),f(p,r)}),o(c),f(n,c)};U(ee,n=>{i(R).length===0?n(je):n(xe,!1)})}var $e=e(ee,2);M($e,{title:"Media + CW snippet",description:"Upload handler returns metadata consumed by the composer",code:ye}),o(q),o(Y),o(B);var F=e(B,2),te=e(s(F),2),oe=s(te);u(oe,()=>h.Root,(n,c)=>{c(n,{get handlers(){return _e},children:(p,b)=>{var r=Xe(),d=W(r);u(d,()=>h.EditorWithAutocomplete,(_,l)=>{l(_,{searchHandler:ge,rows:4})});var v=e(d,2),m=s(v);u(m,()=>h.VisibilitySelect,(_,l)=>{l(_,{})});var g=e(m,2);u(g,()=>h.Submit,(_,l)=>{l(_,{text:"Publish"})}),o(v),f(p,r)},$$slots:{default:!0}})});var ae=e(oe,2),se=s(ae);ze(se,{mode:"create",handlers:{onSubmit:async n=>($(j,n,!0),V(200))}});var re=e(se,2);{var Se=n=>{var c=Ye(),p=s(c),b=e(s(p));o(p);var r=e(p,4);Ve(r,{variant:"ghost",size:"sm",onclick:()=>$(j,null),children:(d,v)=>{Le();var m=ce("Clear poll");f(d,m)},$$slots:{default:!0}}),o(c),D(d=>k(b,` ${d??""}`),[()=>i(j).options.join(", ")]),f(n,c)};U(re,n=>{i(j)&&n(Se)})}var Pe=e(re,2);M(Pe,{title:"Autocomplete snippet",description:"EditorWithAutocomplete + PollComposer",code:Ce}),o(ae),o(te),o(F);var I=e(F,2),ne=e(s(I),2);u(ne,()=>h.Root,(n,c)=>{c(n,{get handlers(){return be},children:(p,b)=>{var r=Ze(),d=W(r);u(d,()=>h.Editor,(l,a)=>{a(l,{rows:3})});var v=e(d,2);u(v,()=>h.DraftSaver,(l,a)=>{a(l,{draftKey:"demo-phase3"})});var m=e(v,2),g=s(m);u(g,()=>h.CharacterCount,(l,a)=>{a(l,{})});var _=e(g,2);u(_,()=>h.Submit,(l,a)=>{a(l,{text:"Send"})}),o(m),f(p,r)},$$slots:{default:!0}})});var We=e(ne,2);M(We,{title:"Draft saver wiring",description:"Auto-save content every 30s and restore on mount",code:ke}),o(I);var De=e(I,2);{var Ae=n=>{var c=et(),p=e(s(c),2);O(p,21,()=>i(A),b=>b.id,(b,r)=>{var d=qe(),v=s(d),m=s(v),g=s(m,!0);o(m);var _=e(m,2),l=s(_,!0);o(_),o(v);var a=e(v,2),w=s(a,!0);o(a);var ie=e(a,2),de=s(ie),Re=e(de);{var Ee=K=>{var le=ce();D(()=>k(le,`· CW: ${i(r).contentWarning??""}`)),f(K,le)};U(Re,K=>{i(r).contentWarning&&K(Ee)})}o(ie),o(d),D(()=>{k(g,i(r).visibility),He(_,"datetime",i(r).createdAt),k(l,i(r).createdAt),k(w,i(r).content),k(de,`${i(r).mediaCount??""} media · ${i(r).label??""} `)}),f(b,d)}),o(p),o(c),f(n,c)};U(De,n=>{i(A).length>0&&n(Ae)})}f(t,S)},$$slots:{default:!0}}),Me()}export{_t as component,ht as universal};
