import{g as ve,j as ye,h as X,a as M,b as D,c as ue,s as _e}from"../chunks/BTgIKdxS.js";import{p as re,b as oe,g as e,d as P,t as Z,a as se,h as F,s as v,c as h,u as B,r as u,R as be,f as ne,Q as pe}from"../chunks/D-WlePPY.js";import{d as W,e as le,i as Se,s as Y,b as me,f as ie}from"../chunks/EAUZg0eb.js";import{D as Ae}from"../chunks/DhBnkOx0.js";import{C as ae}from"../chunks/DeXdVqsM.js";import{p as I,i as J}from"../chunks/COMTHQNu.js";import{b as ge}from"../chunks/gQNFtiqf.js";import{A as fe}from"../chunks/CPqaC5Jf.js";import{c as ce}from"../chunks/ByEp1Jo3.js";import{b as de}from"../chunks/BJAEqnvE.js";const te={sm:8,md:16,lg:24};function xe(a,t={}){const{minWidth:s=280,maxColumns:i=6,gap:l=te.md}=t;if(a<=0)return 1;const n=a+l,p=s+l,w=Math.floor(n/p);return Math.max(1,Math.min(w,i))}function Ce(a,t){if(t<1)return[];const s=Array.from({length:t},()=>({items:[],height:0}));for(const i of a){const n=1/he(i);let p=0,w=s[0].height;for(let _=1;_<s.length;_++){const g=s[_];g&&g.height<w&&(p=_,w=g.height)}const k=s[p];k&&(k.items.push(i),k.height+=n)}return s}function he(a){return a.dimensions?.width&&a.dimensions?.height?a.dimensions.width/a.dimensions.height:1}function Le(a){const t=new Map;for(const s of a){const i=s.artist.id,l=t.get(i)||[];l.push(s),t.set(i,l)}return t}function Re(a){const t=new Map;for(const s of a){const l=(s.metadata.tags||["uncategorized"])[0]||"uncategorized",n=t.get(l)||[];n.push(s),t.set(l,n)}return t}function Me(a){return[...a].sort((t,s)=>{if(t.artist.id!==s.artist.id)return t.artist.id.localeCompare(s.artist.id);const i=new Date(t.createdAt).getTime();return new Date(s.createdAt).getTime()-i})}function Ie(a,t){typeof sessionStorage<"u"&&sessionStorage.setItem(`gallery-scroll-${a}`,String(t))}function Ge(a){if(typeof sessionStorage<"u"){const t=sessionStorage.getItem(`gallery-scroll-${a}`);return t?parseInt(t,10):0}return 0}function ze(a,t,s,i){let l=a;switch(t){case"up":l=a-s;break;case"down":l=a+s;break;case"left":l=a-1;break;case"right":l=a+1;break}return Math.max(0,Math.min(l,i-1))}function Be(a,t,s){const i=Math.floor(a/t)+1,l=a%t+1,n=Math.ceil(s/t);return{row:i,column:l,totalRows:n}}var Te=D('<div role="article"><!></div>'),je=D('<div class="masonry-column svelte-1s4dj7i"></div>'),Ee=D('<div role="region"><a href="#gallery-end" class="skip-link svelte-1s4dj7i">Skip gallery</a> <div class="masonry-grid svelte-1s4dj7i"></div> <div id="gallery-end" tabindex="-1" class="sr-only svelte-1s4dj7i">End of gallery</div></div>');function ke(a,t){re(t,!0);let s=I(t,"items",19,()=>[]),i=I(t,"columns",3,"auto"),l=I(t,"gap",3,"md"),n=I(t,"clustering",3,"none"),p=I(t,"class",3,""),w=I(t,"scrollKey",3,"gallery"),k=F(null),_=F(0),g=F(-1);const A=B(()=>i()==="auto"?xe(e(_),{gap:te[l()]}):i()),S=B(()=>{if(n()==="none")return s();if(n()==="smart")return Me(s());const o=n()==="artist"?Le(s()):Re(s()),c=[];for(const[,r]of o)c.push(...r);return c}),O=B(()=>Ce(e(S),e(A)));function Q(o){const c=o.target,r=c.scrollTop;Ie(w(),r),t.onLoadMore&&c.scrollHeight-c.scrollTop-c.clientHeight<200&&t.onLoadMore()}function T(o){if(e(g)<0)return;let c=null;switch(o.key){case"ArrowUp":c="up";break;case"ArrowDown":c="down";break;case"ArrowLeft":c="left";break;case"ArrowRight":c="right";break;case"Enter":case" ":if(t.onItemClick){const r=e(S)[e(g)];r&&t.onItemClick(r)}o.preventDefault();return;default:return}if(c){o.preventDefault();const r=ze(e(g),c,e(A),e(S).length);P(g,r,!0),e(k)?.querySelector(`[data-index="${r}"] button`)?.focus()}}function q(o){P(g,o,!0)}function U(o){t.onItemClick?.(o)}function V(o){return o>=1.6?"gallery-item--ratio-16-9":o>=1.2?"gallery-item--ratio-4-3":o>=.9?"gallery-item--ratio-1-1":"gallery-item--ratio-3-4"}function H(o){const{row:c,column:r,totalRows:d}=Be(o,e(A),e(S).length);return`Gallery, ${e(S).length} artworks, row ${c} of ${d}, column ${r} of ${e(A)}`}oe(()=>{if(!e(k))return;const o=new ResizeObserver(r=>{for(const d of r)P(_,d.contentRect.width,!0)});o.observe(e(k));const c=Ge(w());return c>0&&(e(k).scrollTop=c),()=>o.disconnect()});var y=Ee();W(y,"aria-busy",!1);var x=v(h(y),2);le(x,21,()=>e(O),Se,(o,c,r)=>{var d=je();le(d,23,()=>e(c).items,m=>m.id,(m,f,G)=>{const z=B(()=>r+e(G)*e(A)),C=B(()=>he(e(f))),L=B(()=>V(e(C)));var b=Te();let R;var j=h(b);{var N=K=>{var E=ue(),ee=ne(E);me(ee,()=>t.itemRenderer,()=>e(f),()=>e(z)),M(K,E)},$=K=>{{let E=B(()=>e(g)===e(z)?0:-1);fe(K,{get artwork(){return e(f)},variant:"grid",get tabindex(){return e(E)},onclick:()=>U(e(f))})}};J(j,K=>{t.itemRenderer?K(N):K($,!1)})}u(b),Z(K=>{R=Y(b,1,`gallery-item ${e(L)}`,"svelte-1s4dj7i",R,{focused:e(g)===e(z)}),W(b,"data-index",e(z)),W(b,"aria-label",K)},[()=>H(e(z))]),X("focusin",b,()=>q(e(z))),M(m,b)}),u(d),M(o,d)}),u(x),be(2),u(y),ge(y,o=>P(k,o),()=>e(k)),Z(()=>{Y(y,1,`gallery-grid gallery-grid--gap-${l()} ${p()}`,"svelte-1s4dj7i"),W(y,"aria-label",w()==="gallery"?`Gallery with ${s().length} artworks`:`Gallery (${w()}) with ${s().length} artworks`)}),ye("scroll",y,Q),X("keydown",y,T),M(a,y),se()}ve(["keydown","focusin"]);var We=D('<h2 class="row-title svelte-1ik43ee"> </h2>'),De=D('<a class="show-all-link svelte-1ik43ee">Show All <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true" class="svelte-1ik43ee"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1ik43ee"></path></svg></a>'),Ke=D('<header class="row-header svelte-1ik43ee"><!> <!></header>'),Pe=D('<button class="item-button svelte-1ik43ee"><!></button>'),He=D('<div class="item-placeholder svelte-1ik43ee" aria-hidden="true"></div>'),Ne=D("<div><!></div>"),Fe=D('<section><!> <div class="row-container svelte-1ik43ee"><button aria-label="Scroll left"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="svelte-1ik43ee"><path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1ik43ee"></path></svg></button>  <div class="row-scroll svelte-1ik43ee" role="region" tabindex="0"></div> <button aria-label="Scroll right"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true" class="svelte-1ik43ee"><path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1ik43ee"></path></svg></button></div></section>');function qe(a,t){re(t,!0);let s=I(t,"items",19,()=>[]),i=I(t,"cardSize",3,"md"),l=I(t,"class",3,""),n=F(null),p=F(!1),w=F(!0);const k={sm:200,md:280,lg:360},_=B(()=>k[i()]);let g=F(pe(new Set));function A(){if(!e(n))return;const{scrollLeft:r,scrollWidth:d,clientWidth:m}=e(n);P(p,r>0),P(w,r<d-m-10)}function S(r){if(!e(n))return;const d=r==="left"?-e(_):e(_);e(n).scrollBy({left:d,behavior:"smooth"})}function O(r){r.key==="ArrowLeft"?(r.preventDefault(),S("left")):r.key==="ArrowRight"&&(r.preventDefault(),S("right"))}function Q(r){t.onItemClick?.(r)}oe(()=>{if(!e(n))return;const r=new IntersectionObserver(m=>{for(const f of m){const G=parseInt(f.target.dataset.index||"0",10);f.isIntersecting&&P(g,new Set([...e(g),G]),!0)}},{root:e(n),rootMargin:"100px",threshold:0});return e(n).querySelectorAll(".row-item").forEach(m=>r.observe(m)),()=>r.disconnect()}),oe(()=>{if(e(n))return A(),e(n).addEventListener("scroll",A),()=>{e(n)?.removeEventListener("scroll",A)}});var T=Fe(),q=h(T);{var U=r=>{var d=Ke(),m=h(d);{var f=C=>{var L=We(),b=h(L,!0);u(L),Z(()=>_e(b,t.title)),M(C,L)};J(m,C=>{t.title&&C(f)})}var G=v(m,2);{var z=C=>{var L=De();Z(()=>W(L,"href",t.showAllLink)),M(C,L)};J(G,C=>{t.showAllLink&&C(z)})}u(d),M(r,d)};J(q,r=>{(t.title||t.showAllLink)&&r(U)})}var V=v(q,2),H=h(V);let y;var x=v(H,2);le(x,23,s,r=>r.id,(r,d,m)=>{var f=Ne();let G;var z=h(f);{var C=R=>{var j=Pe(),N=h(j);{var $=E=>{var ee=ue(),we=ne(ee);me(we,()=>t.itemRenderer,()=>e(d),()=>e(m)),M(E,ee)},K=E=>{fe(E,{get artwork(){return e(d)},variant:"row",get size(){return i()},tagName:"div"})};J(N,E=>{t.itemRenderer?E($):E(K,!1)})}u(j),Z(()=>W(j,"aria-label",`${e(d).title} by ${e(d).artist.name}`)),X("click",j,()=>Q(e(d))),M(R,j)},L=B(()=>e(g).has(e(m))||e(m)<5),b=R=>{var j=He();M(R,j)};J(z,R=>{e(L)?R(C):R(b,!1)})}u(f),Z(R=>{G=Y(f,1,`row-item row-item--${i()}`,"svelte-1ik43ee",G,R),W(f,"data-index",e(m))},[()=>({loaded:e(g).has(e(m))})]),M(r,f)}),u(x),ge(x,r=>P(n,r),()=>e(n));var o=v(x,2);let c;u(V),u(T),Z(()=>{Y(T,1,`gallery-row ${l()}`,"svelte-1ik43ee"),W(T,"aria-label",t.title||"Gallery row"),y=Y(H,1,"nav-arrow nav-arrow-left svelte-1ik43ee",null,y,{hidden:!e(p)}),W(H,"tabindex",e(p)?0:-1),W(x,"aria-label",`${s().length} artworks`),c=Y(o,1,"nav-arrow nav-arrow-right svelte-1ik43ee",null,c,{hidden:!e(w)}),W(o,"tabindex",e(w)?0:-1)}),X("click",H,()=>S("left")),X("keydown",x,O),X("click",o,()=>S("right")),M(a,T),se()}ve(["click","keydown"]);function Oe(a,t){re(t,!0);let s=I(t,"items",19,()=>[]),i=I(t,"gap",3,16),l=I(t,"class",3,""),n=I(t,"scrollKey",3,"masonry");function p(k){return k<=te.sm?"sm":k<=te.md?"md":"lg"}const w=B(()=>p(i()));ke(a,{get items(){return s()},columns:"auto",get gap(){return e(w)},clustering:"none",get onLoadMore(){return t.onLoadMore},get onItemClick(){return t.onItemClick},get class(){return l()},get scrollKey(){return n()},get itemRenderer(){return t.itemRenderer}}),se()}var Qe=D('<section class="demo-section svelte-1dk2s9v"><header class="svelte-1dk2s9v"><h2 class="svelte-1dk2s9v">Gallery Grid</h2> <p class="svelte-1dk2s9v">Masonry-style grid layout with virtual scrolling support.</p></header> <div class="controls svelte-1dk2s9v"><label class="svelte-1dk2s9v">Columns: <select class="svelte-1dk2s9v"><option>Auto</option><option>2</option><option>3</option><option>4</option></select></label> <label class="svelte-1dk2s9v">Gap: <select class="svelte-1dk2s9v"><option>Small</option><option>Medium</option><option>Large</option></select></label></div> <div class="demo-container svelte-1dk2s9v"><!></div> <!></section> <section class="demo-section svelte-1dk2s9v"><header class="svelte-1dk2s9v"><h2 class="svelte-1dk2s9v">Gallery Row</h2> <p class="svelte-1dk2s9v">Horizontal scrolling row for curated selections.</p></header> <div class="demo-container svelte-1dk2s9v"><!></div> <!></section> <section class="demo-section svelte-1dk2s9v"><header class="svelte-1dk2s9v"><h2 class="svelte-1dk2s9v">Gallery Masonry</h2> <p class="svelte-1dk2s9v">Variable-height masonry layout respecting artwork aspect ratios.</p></header> <div class="demo-container svelte-1dk2s9v"><!></div> <!></section>',1);function st(a,t){re(t,!0);const s=Array.from({length:12},(k,_)=>({...ce[_%ce.length],id:`gallery-artwork-${_+1}`,title:`Artwork ${_+1}`}));let i=F("auto"),l=F("md");const n=`
<GalleryGrid 
  items={artworks}
  columns="auto"
  gap="md"
  virtualScrolling={true}
  onLoadMore={loadMore}
/>`,p=`
<GalleryRow 
  items={featuredArtworks}
  title="Featured This Week"
  showAllLink="${de}/artist/gallery"
  cardSize="md"
/>`,w=`
<GalleryMasonry 
  items={artworks}
  columnWidth={300}
  gap={16}
/>`;Ae(a,{eyebrow:"Artist Face / Layout",title:"Gallery Components",description:"Layout components for displaying artwork collections with virtual scrolling and responsive behavior.",children:(k,_)=>{var g=Qe(),A=ne(g),S=v(h(A),2),O=h(S),Q=v(h(O)),T=h(Q);T.value=T.__value="auto";var q=v(T);q.value=q.__value=2;var U=v(q);U.value=U.__value=3;var V=v(U);V.value=V.__value=4,u(Q),u(O);var H=v(O,2),y=v(h(H)),x=h(y);x.value=x.__value="sm";var o=v(x);o.value=o.__value="md";var c=v(o);c.value=c.__value="lg",u(y),u(H),u(S);var r=v(S,2),d=h(r);ke(d,{get items(){return s},get columns(){return e(i)},get gap(){return e(l)},virtualScrolling:!1}),u(r);var m=v(r,2);ae(m,{code:n,language:"svelte"}),u(A);var f=v(A,2),G=v(h(f),2),z=h(G);{let N=B(()=>s.slice(0,6)),$=B(()=>`${de}/artist/gallery`);qe(z,{get items(){return e(N)},title:"Featured This Week",get showAllLink(){return e($)},cardSize:"md"})}u(G);var C=v(G,2);ae(C,{get code(){return p},language:"svelte"}),u(f);var L=v(f,2),b=v(h(L),2),R=h(b);Oe(R,{get items(){return s},columnWidth:250,gap:16}),u(b);var j=v(b,2);ae(j,{code:w,language:"svelte"}),u(L),ie(Q,()=>e(i),N=>P(i,N)),ie(y,()=>e(l),N=>P(l,N)),M(k,g)},$$slots:{default:!0}}),se()}export{st as component};
