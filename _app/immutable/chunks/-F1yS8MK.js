import{g as J,h as he,j as tt,a as i,c as De,b as v,s as te,f as Oe,t as pt,r as aa}from"./BTgIKdxS.js";import{G as ra,J as bt,I as na,bp as oa,bq as ia,al as Tt,p as Ve,ak as Dt,c as l,g as t,r as s,t as A,a as Pe,u as k,s as m,f as Ce,h as be,Q as nt,d as L,br as rt,R as Fe,b as $e,o as Bt,P as Mt}from"./D-WlePPY.js";import{s as pe,d as K,b as Ze,e as Qe,r as ut,g as dt,f as sa,c as Lt,j as la,k as ca,l as ua,h as da,a as va,C as fa}from"./EAUZg0eb.js";import{p as Y,i as S}from"./COMTHQNu.js";import{u as Ot,a as It,f as ha}from"./CyXc35a2.js";import{b as st}from"./gQNFtiqf.js";import{u as ga,j as ma}from"./CHLjghYc.js";import{r as _a}from"./DMtAjUFB.js";import{r as pa,a as ba,d as ya}from"./BRZvputb.js";import{B as ft}from"./B3zyJtUo.js";import{a as Ht,S as wa,R as zt,U as ka,F as xa}from"./DfOL-LYk.js";function at(a,e,r){ra(()=>{var o=bt(()=>e(a,r?.())||{});if(r&&o?.update){var c=!1,n={};na(()=>{var f=r();oa(f),c&&ia(n,f)&&(n=f,o.update(f))}),c=!0}if(o?.destroy)return()=>o.destroy()})}const Sa=["p","br","span","a","del","pre","code","em","strong","b","i","u","s","strike","ul","ol","li","blockquote","h1","h2","h3","h4","h5","h6"],Ca=["href","title","class","rel","target"];function za(a){const{allowedTags:e=Sa,allowedAttributes:r=Ca,allowDataUri:o=!1,addRelToExternalLinks:c=!0,externalLinksInNewTab:n=!0}=a,f=["http","https","mailto"];o&&f.push("data");const u={"*":r.filter(d=>!["href","src"].includes(d))};return r.includes("href")&&(u.a=["href","title",...c?["rel"]:[],...n?["target"]:[]]),r.includes("src")&&(u.img=["src","alt","title"]),{...ya,tagNames:e,attributes:u,protocols:{href:f,src:f}}}function _t(a,e={}){if(!a||typeof a!="string")return"";const r=za(e),{addRelToExternalLinks:o=!0,externalLinksInNewTab:c=!0}=e,n=ga().use(_a,{fragment:!0}).use(pa,r).use(ba);let f=String(n.processSync(a));return(o||c)&&(f=f.replace(/<a\s+href="(https?:\/\/[^"]+)"([^>]*)>/g,(u,d,p)=>{let N=p||"";return o&&!N.includes("rel=")&&(N+=' rel="noopener noreferrer"'),c&&!N.includes("target=")&&(N+=' target="_blank"'),`<a href="${d}"${N}>`})),f}const Aa=[{unit:"year",ms:31536e6},{unit:"month",ms:2628e6},{unit:"week",ms:6048e5},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3,max:60}];function Ta(a,e={}){const{locale:r="en-US",numeric:o="auto",now:c=new Date,maxUnit:n="year"}=e,f=a instanceof Date?a:new Date(a),u=c instanceof Date?c:new Date(c);if(isNaN(f.getTime()))return"Invalid date";const d=u.getTime()-f.getTime(),p=Math.abs(d),N=d<0;if(p<5e3)return"just now";for(const{unit:C,ms:T,max:D}of Aa){if(n){const F=["year","month","week","day","hour","minute","second"],X=F.indexOf(n),ae=F.indexOf(C);if(X>=0&&ae<X)continue}const b=Math.floor(p/T);if(b>=1&&(!D||b<=D))try{return new Intl.RelativeTimeFormat(r,{numeric:o}).format(N?b:-b,C)}catch{const X=`${b} ${C}${b===1?"":"s"}`;return N?`in ${X}`:`${X} ago`}}const O=Math.floor(p/1e3);try{return new Intl.RelativeTimeFormat(r,{numeric:o}).format(N?O:-O,"second")}catch{const T=`${O} second${O===1?"":"s"}`;return N?`in ${T}`:`${T} ago`}}function Ft(a,e={}){const{locale:r="en-US",dateStyle:o="medium",timeStyle:c="short",...n}=e,f=a instanceof Date?a:new Date(a);if(isNaN(f.getTime()))return{absolute:"Invalid date",relative:"Invalid date",iso:""};const u=new Intl.DateTimeFormat(r,{dateStyle:o,timeStyle:c}).format(f),d=Ta(f,n),p=f.toISOString();return{absolute:u,relative:d,iso:p}}const Ct={mention:/(?:^|\s)(@[\w\-.]+(?:@[\w\-.]+)?)/g,hashtag:/(?:^|\s)(#[\p{L}\p{N}_]+)/gu,url:/(?:^|\s)((?:https?:\/\/)?(?:[\w-]+\.)+[a-z]{2,}(?:\/[^\s]*)?)/gi},Da={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ma(a){return a.replace(/[&<>"']/g,e=>Da[e]??e)}function La(a,e){if(a.length<=e)return a;const r=new URL(a),o=r.hostname;if(o.length>=e-3)return o.substring(0,e-3)+"...";const c=e-o.length-3,n=r.pathname+r.search+r.hash;return n.length<=c?o+n:o+n.substring(0,c)+"..."}function Na(a,e={}){const{mentionBaseUrl:r="/users/",hashtagBaseUrl:o="/tags/",mentionClass:c="mention",hashtagClass:n="hashtag",urlClass:f="url",openInNewTab:u=!0,maxUrlLength:d=30,nofollow:p=!0}=e;let N=Ma(a);const O=u?' target="_blank"':"",C=`${u?"noopener noreferrer":""}${p?" nofollow":""}`.trim(),T=C?` rel="${C}"`:"";return N=N.replace(Ct.url,(D,b)=>{const F=b.startsWith("http")?b:`https://${b}`;try{new URL(F);const X=La(F,d);return` <a href="${F}" class="${f}"${O}${T}>${X}</a>`}catch{return D}}),N=N.replace(Ct.mention,(D,b)=>{const F=b.substring(1);return` <a href="${r+F}" class="${c}"${O}${T}>${b}</a>`}),N=N.replace(Ct.hashtag,(D,b)=>{const F=b.substring(1);return` <a href="${o+encodeURIComponent(F)}" class="${n}"${O}${T}>${b}</a>`}),N.trim()}const Vt=Symbol("status-context");function Pt(){const a=Tt(Vt);if(!a)throw new Error("Status context not found. Make sure you are using Status components inside <Status.Root>.");return a}var Ra=v('<p class="status-tombstone__meta"> </p>'),Ea=v('<div class="status-tombstone" role="note"><div class="status-tombstone__icon" aria-hidden="true"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm1 15h-2v-2h2zm0-4h-2V7h2z"></path></svg></div> <div><p class="status-tombstone__title">This post has been deleted.</p> <!></div></div>'),Ia=v("<article><!></article>");function pi(a,e){Ve(e,!0);let r=Y(e,"config",19,()=>({})),o=Y(e,"handlers",19,()=>({}));const c=k(()=>e.status.reblog||e.status),n=k(()=>e.status.reblog?.account||e.status.account),f=k(()=>!!e.status.reblog),u=k(()=>e.status?.metadata?.lesser),d=k(()=>e.status.deletedAt??t(u)?.deletedAt??t(c)?.deletedAt),p=k(()=>e.status.type==="tombstone"||t(u)?.isDeleted===!0||e.status.isDeleted===!0),N=k(()=>t(d)?Ft(t(d)):null),O=k(()=>t(n).displayName||t(n).username||"Deleted post"),C={get status(){return e.status},get actualStatus(){return t(c)},get account(){return t(n)},get isReblog(){return t(f)},get config(){return{density:r().density||"comfortable",showActions:r().showActions??!0,clickable:r().clickable??!1,showThread:r().showThread??!0,class:r().class||""}},get handlers(){return o()}};Dt(Vt,C);function T(U){if(!C.config.clickable)return;const ie=U.target;ie.tagName==="A"||ie.tagName==="BUTTON"||ie.closest("a, button")||C.handlers.onClick?.(e.status)}function D(U){C.config.clickable&&(U.key==="Enter"||U.key===" ")&&(U.preventDefault(),C.handlers.onClick?.(e.status))}var b=Ia();let F;var X=l(b);{var ae=U=>{var ie=Ea(),ce=m(l(ie),2),j=m(l(ce),2);{var W=H=>{var $=Ra(),se=l($);s($),A(()=>te(se,`Deleted ${t(N).relative??""}`)),i(H,$)};S(j,H=>{t(N)&&H(W)})}s(ce),s(ie),i(U,ie)},q=U=>{var ie=De(),ce=Ce(ie);Ze(ce,()=>e.children),i(U,ie)};S(X,U=>{t(p)?U(ae):e.children&&U(q,1)})}s(b),A(()=>{F=pe(b,1,`status-root ${C.config.class}`,null,F,{"status-root--compact":C.config.density==="compact","status-root--comfortable":C.config.density==="comfortable","status-root--tombstone":t(p),"status-root--clickable":C.config.clickable}),K(b,"role",C.config.clickable?"button":void 0),K(b,"tabindex",C.config.clickable?0:void 0),K(b,"aria-label",C.config.clickable?`Status by ${t(O)}`:void 0)}),he("click",b,function(...U){(C.config.clickable?T:void 0)?.apply(this,U)}),tt("keypress",b,function(...U){(C.config.clickable?D:void 0)?.apply(this,U)}),i(a,b),Pe()}J(["click"]);var Ua=v('<div class="spoiler-warning"><span class="spoiler-text"> </span> <button class="spoiler-toggle"> </button></div>'),Ba=v("<div></div>"),Oa=v("<div><!> <!></div>");function qt(a,e){Ve(e,!0);let r=Y(e,"spoilerText",3,""),o=Y(e,"collapsed",3,!0),c=Y(e,"mentions",19,()=>[]),n=Y(e,"tags",19,()=>[]),f=Y(e,"mentionBaseUrl",3,"/users/"),u=Y(e,"hashtagBaseUrl",3,"/tags/"),d=Y(e,"class",3,""),p=be(nt(bt(()=>!o()||!r())));const N=Ot("content"),O=k(()=>N.value);function C(){r()&&(L(p,!t(p)),e.onToggle?.(t(p)))}const T=new Set(["http:","https:","mailto:"]);function D(W){return W.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(W){if(!W||typeof W!="string")return null;const H=W.trim();if(!H)return null;try{const $=new URL(H,"https://example.invalid");return T.has($.protocol)?encodeURI(H):null}catch{return null}}function F(W){let H=_t(W,{allowedTags:["p","br","span","a","del","pre","code","em","strong","b","i","u","s","strike","ul","ol","li","blockquote","h1","h2","h3","h4","h5","h6"],allowedAttributes:["href","title","class","rel","target"]});return c().length>0&&c().forEach($=>{const se=new RegExp(`@${D($.username)}(@[\\w.-]+)?`,"g"),I=b($.url);H=H.replace(se,Z=>I?`<a href="${I}" class="mention" rel="noopener noreferrer" target="_blank">${Z}</a>`:Z)}),n().length>0&&n().forEach($=>{const se=new RegExp(`#${D($.name)}\\b`,"gi"),I=b($.url);H=H.replace(se,Z=>I?`<a href="${I}" class="hashtag" rel="noopener noreferrer" target="_blank">${Z}</a>`:Z)}),c().length===0&&n().length===0&&(H=Na(H,{mentionBaseUrl:f(),hashtagBaseUrl:u(),openInNewTab:!0,nofollow:!1})),H}const X=k(()=>F(e.content));function ae(W,H){return W.innerHTML=H,{update($){W.innerHTML=$}}}var q=Oa(),U=l(q);{var ie=W=>{var H=Ua(),$=l(H),se=l($,!0);s($);var I=m($,2),Z=l(I,!0);s(I),s(H),A(()=>{te(se,r()),K(I,"aria-expanded",t(p)),K(I,"aria-controls",t(O)),te(Z,t(p)?"Hide":"Show more")}),he("click",I,C),i(W,H)};S(U,W=>{r()&&W(ie)})}var ce=m(U,2);{var j=W=>{var H=Ba();let $;at(H,(se,I)=>ae?.(se,I),()=>t(X)),A(()=>{$=pe(H,1,"content",null,$,{collapsed:!!r()&&!t(p)}),K(H,"id",t(O)),K(H,"aria-hidden",!!r()&&!t(p))}),i(W,H)};S(ce,W=>{(!r()||t(p))&&W(j)})}s(q),A(()=>pe(q,1,`content-renderer ${d()}`)),i(a,q),Pe()}J(["click"]);var Ha=v('<img loading="lazy" class="status-media__image"/>'),Fa=v('<video controls="" class="status-media__video"><track kind="captions"/></video>',2),Va=v('<audio controls="" class="status-media__audio"><track kind="captions"/></audio>'),Pa=v('<div class="status-media__file"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"></path></svg> <span> </span></div>'),qa=v('<p class="status-media__overlay-text"> </p>'),Wa=v('<div class="status-media__overlay status-media__overlay--sensitive"><span class="status-media__overlay-label">Sensitive content</span> <!> <button type="button" class="status-media__reveal">Show media</button></div>'),ja=v('<div class="status-media__badge">Sensitive</div>'),Ka=v("<div><!> <!></div>"),Ga=v("<div><!></div>");function bi(a,e){Ve(e,!0);let r=Y(e,"class",3,"");const o=Pt(),{actualStatus:c}=o,n=k(()=>c.mediaAttachments&&c.mediaAttachments.length>0);let f=be(nt({}));function u(D){if(D.mediaCategory)switch(D.mediaCategory.toUpperCase()){case"IMAGE":return"image";case"VIDEO":case"GIFV":return"video";case"AUDIO":return"audio";default:return"file"}const b=D.mimeType||D.mediaType;if(b){if(b.startsWith("image/"))return"image";if(b.startsWith("video/"))return"video";if(b.startsWith("audio/"))return"audio"}switch(D.type){case"Image":case"image":return"image";case"video":case"gifv":return"video";case"audio":return"audio";default:return"file"}}function d(D){return D.sensitive===!0&&t(f)[D.url]!==!0}function p(D){const b=t(f)[D]===!0;L(f,{...t(f),[D]:!b},!0)}function N(D){const b=D.description;return typeof b=="string"?b:D.name||""}var O=De(),C=Ce(O);{var T=D=>{var b=Ga();let F;var X=l(b);{var ae=U=>{var ie=De(),ce=Ce(ie);Ze(ce,()=>e.media),i(U,ie)},q=U=>{var ie=De(),ce=Ce(ie);Qe(ce,17,()=>c.mediaAttachments,j=>j.url,(j,W)=>{const H=k(()=>u(t(W))),$=k(()=>N(t(W)));var se=Ka();let I;var Z=l(se);{var ue=M=>{var Q=Ha();A(()=>{K(Q,"src",t(W).previewUrl||t(W).url),K(Q,"alt",t($))}),i(M,Q)},g=M=>{var Q=Fa();A(()=>{K(Q,"src",t(W).url),K(Q,"poster",t(W).previewUrl),K(Q,"aria-label",t($)||"Video")}),i(M,Q)},V=M=>{var Q=Va();A(()=>{K(Q,"src",t(W).url),K(Q,"aria-label",t($)||"Audio")}),i(M,Q)},G=M=>{var Q=Pa(),h=m(l(Q),2),y=l(h,!0);s(h),s(Q),A(()=>te(y,t($)||"Attachment")),i(M,Q)};S(Z,M=>{t(H)==="image"?M(ue):t(H)==="video"?M(g,1):t(H)==="audio"?M(V,2):M(G,!1)})}var z=m(Z,2);{var ne=M=>{var Q=De(),h=Ce(Q);{var y=oe=>{var ve=Wa(),w=m(l(ve),2);{var ee=xe=>{var ge=qa(),Ue=l(ge,!0);s(ge),A(()=>te(Ue,t(W).spoilerText)),i(xe,ge)};S(w,xe=>{t(W).spoilerText&&xe(ee)})}var ye=m(w,2);s(ve),he("click",ye,()=>p(t(W).url)),i(oe,ve)},R=k(()=>d(t(W))),P=oe=>{var ve=ja();i(oe,ve)};S(h,oe=>{t(R)?oe(y):oe(P,!1)})}i(M,Q)};S(z,M=>{t(W).sensitive&&M(ne)})}s(se),A(M=>I=pe(se,1,"status-media__item",null,I,M),[()=>({"status-media__item--blurred":d(t(W))})]),i(j,se)}),i(U,ie)};S(X,U=>{e.media?U(ae):U(q,!1)})}s(b),A(()=>F=pe(b,1,`status-media ${r()}`,null,F,{"status-media--single":c.mediaAttachments.length===1,"status-media--multiple":c.mediaAttachments.length>1})),i(D,b)};S(C,D=>{t(n)&&D(T)})}i(a,O),Pe()}J(["click"]);var Qa=v('<span class="gr-action-bar__count" aria-hidden="true"> </span>'),Xa=v('<span class="gr-action-bar__count" aria-hidden="true"> </span>'),Ja=Oe('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path></svg>'),Ya=v('<span class="gr-action-bar__count" aria-hidden="true"> </span>'),Za=v('<span class="gr-action-bar__count" aria-hidden="true"> </span>'),$a=v('<div class="gr-action-bar__extensions"><!></div>'),er=v('<div role="group" aria-label="Post actions"><!> <!> <!> <!> <!> <!></div>');function Wt(a,e){Ve(e,!0);let r=Y(e,"states",19,()=>({})),o=Y(e,"handlers",19,()=>({})),c=Y(e,"readonly",3,!1),n=Y(e,"size",3,"sm"),f=Y(e,"class",3,""),u=Y(e,"idPrefix",3,"action"),d=be(!1),p=be(!1),N=be(!1),O=be(!1),C=be(!1);const T=k(()=>e.counts.quotes??0),D=k(()=>r().boosted??!1),b=k(()=>r().favorited??!1);function F(g){return g===0?"":g<1e3?g.toString():g<1e4?(g/1e3).toFixed(1).replace(".0","")+"K":Math.floor(g/1e3)+"K"}async function X(){if(!(c()||t(d)||!o().onReply)){L(d,!0);try{await o().onReply()}catch(g){console.error("Reply action failed:",g)}finally{L(d,!1)}}}async function ae(){if(!(c()||t(p)||!o().onBoost)){L(p,!0);try{await o().onBoost()}catch(g){console.error("Boost action failed:",g)}finally{L(p,!1)}}}async function q(){if(!(c()||t(O)||!o().onFavorite)){L(O,!0);try{await o().onFavorite()}catch(g){console.error("Favorite action failed:",g)}finally{L(O,!1)}}}async function U(){if(!(c()||t(C))&&!(!o().onShare&&!e.shareUrl)){L(C,!0);try{if(o().onShare){await o().onShare();return}const g=e.shareUrl;if(typeof navigator<"u"&&typeof navigator.share=="function"){const V={url:g};e.shareTitle&&(V.title=e.shareTitle),e.shareText&&(V.text=e.shareText),await navigator.share(V)}else{const V=await ma(g);if(!V.success)throw new Error(V.error||"Failed to copy link")}}catch(g){console.error("Share action failed:",g)}finally{L(C,!1)}}}async function ie(){if(!(c()||t(N)||!o().onQuote)){L(N,!0);try{await o().onQuote()}catch(g){console.error("Quote action failed:",g)}finally{L(N,!1)}}}var ce=er(),j=l(ce);{const g=ne=>{{let M=k(()=>n()==="sm"?16:n()==="md"?18:20);Ht(ne,{get size(){return t(M)}})}};let V=k(()=>c()||t(d)||!o().onReply),G=k(()=>e.counts.replies>0?`Reply to this post. ${e.counts.replies} replies`:"Reply to this post"),z=k(()=>`${u()}-reply`);ft(j,{variant:"ghost",get size(){return n()},get disabled(){return t(V)},get loading(){return t(d)},onclick:X,class:"gr-action-bar__button gr-action-bar__button--reply",get"aria-label"(){return t(G)},get id(){return t(z)},prefix:g,children:(ne,M)=>{var Q=De(),h=Ce(Q);{var y=R=>{var P=Qa(),oe=l(P,!0);s(P),A(ve=>te(oe,ve),[()=>F(e.counts.replies)]),i(R,P)};S(h,R=>{e.counts.replies>0&&R(y)})}i(ne,Q)},$$slots:{prefix:!0,default:!0}})}var W=m(j,2);{const g=M=>{var Q=De(),h=Ce(Q);{var y=P=>{{let oe=k(()=>n()==="sm"?16:n()==="md"?18:20);zt(P,{get size(){return t(oe)}})}},R=P=>{{let oe=k(()=>n()==="sm"?16:n()==="md"?18:20);zt(P,{get size(){return t(oe)}})}};S(h,P=>{t(D)?P(y):P(R,!1)})}i(M,Q)};let V=k(()=>c()||t(p)||!o().onBoost),G=k(()=>`gr-action-bar__button gr-action-bar__button--boost${t(D)?" gr-action-bar__button--active":""}`),z=k(()=>t(D)?`Undo boost. ${e.counts.boosts} boosts`:e.counts.boosts>0?`Boost this post. ${e.counts.boosts} boosts`:"Boost this post"),ne=k(()=>`${u()}-boost`);ft(W,{variant:"ghost",get size(){return n()},get disabled(){return t(V)},get loading(){return t(p)},onclick:ae,get class(){return t(G)},get"aria-label"(){return t(z)},get"aria-pressed"(){return t(D)},get id(){return t(ne)},prefix:g,children:(M,Q)=>{var h=De(),y=Ce(h);{var R=P=>{var oe=Xa(),ve=l(oe,!0);s(oe),A(w=>te(ve,w),[()=>F(e.counts.boosts)]),i(P,oe)};S(y,P=>{e.counts.boosts>0&&P(R)})}i(M,h)},$$slots:{prefix:!0,default:!0}})}var H=m(W,2);{var $=g=>{{const V=M=>{var Q=Ja();A(()=>{K(Q,"width",n()==="sm"?16:n()==="md"?18:20),K(Q,"height",n()==="sm"?16:n()==="md"?18:20)}),i(M,Q)};let G=k(()=>c()||t(N)),z=k(()=>t(T)>0?`Quote this post. ${t(T)} quotes`:"Quote this post"),ne=k(()=>`${u()}-quote`);ft(g,{variant:"ghost",get size(){return n()},get disabled(){return t(G)},get loading(){return t(N)},onclick:ie,class:"gr-action-bar__button gr-action-bar__button--quote",get"aria-label"(){return t(z)},get id(){return t(ne)},prefix:V,children:(M,Q)=>{var h=De(),y=Ce(h);{var R=P=>{var oe=Ya(),ve=l(oe,!0);s(oe),A(w=>te(ve,w),[()=>F(t(T))]),i(P,oe)};S(y,P=>{t(T)>0&&P(R)})}i(M,h)},$$slots:{prefix:!0,default:!0}})}};S(H,g=>{o().onQuote&&g($)})}var se=m(H,2);{const g=M=>{var Q=De(),h=Ce(Q);{var y=P=>{{let oe=k(()=>n()==="sm"?16:n()==="md"?18:20);ka(P,{get size(){return t(oe)}})}},R=P=>{{let oe=k(()=>n()==="sm"?16:n()==="md"?18:20);xa(P,{get size(){return t(oe)}})}};S(h,P=>{t(b)?P(y):P(R,!1)})}i(M,Q)};let V=k(()=>c()||t(O)||!o().onFavorite),G=k(()=>`gr-action-bar__button gr-action-bar__button--favorite${t(b)?" gr-action-bar__button--active":""}`),z=k(()=>t(b)?`Remove from favorites. ${e.counts.favorites} favorites`:e.counts.favorites>0?`Add to favorites. ${e.counts.favorites} favorites`:"Add to favorites"),ne=k(()=>`${u()}-favorite`);ft(se,{variant:"ghost",get size(){return n()},get disabled(){return t(V)},get loading(){return t(O)},onclick:q,get class(){return t(G)},get"aria-label"(){return t(z)},get"aria-pressed"(){return t(b)},get id(){return t(ne)},prefix:g,children:(M,Q)=>{var h=De(),y=Ce(h);{var R=P=>{var oe=Za(),ve=l(oe,!0);s(oe),A(w=>te(ve,w),[()=>F(e.counts.favorites)]),i(P,oe)};S(y,P=>{e.counts.favorites>0&&P(R)})}i(M,h)},$$slots:{prefix:!0,default:!0}})}var I=m(se,2);{const g=z=>{{let ne=k(()=>n()==="sm"?16:n()==="md"?18:20);wa(z,{get size(){return t(ne)}})}};let V=k(()=>c()||t(C)||!o().onShare&&!e.shareUrl),G=k(()=>`${u()}-share`);ft(I,{variant:"ghost",get size(){return n()},get disabled(){return t(V)},get loading(){return t(C)},onclick:U,class:"gr-action-bar__button gr-action-bar__button--share","aria-label":"Share this post",get id(){return t(G)},prefix:g,$$slots:{prefix:!0}})}var Z=m(I,2);{var ue=g=>{var V=$a(),G=l(V);Ze(G,()=>e.extensions),s(V),i(g,V)};S(Z,g=>{e.extensions&&g(ue)})}s(ce),A(()=>pe(ce,1,`gr-action-bar ${f()}`)),i(a,ce),Pe()}var tr=v('<button class="status-actions__delete"> </button>'),ar=v("<div><!></div>");function yi(a,e){Ve(e,!0);let r=Y(e,"size",3,"sm"),o=Y(e,"readonly",3,!1),c=Y(e,"class",3,""),n=Y(e,"showDelete",3,!1),f=Y(e,"deleteLabel",3,"Delete");const u=Pt(),{actualStatus:d,handlers:p,config:N}=u,O=k(()=>u.status.type==="tombstone"||u.status.isDeleted===!0||u.status?.metadata?.lesser?.isDeleted===!0),C=k(()=>N.showActions&&!t(O)),T=k(()=>({onReply:p.onReply?()=>p.onReply(u.status):void 0,onBoost:p.onBoost?()=>p.onBoost(u.status):void 0,onFavorite:p.onFavorite?()=>p.onFavorite(u.status):void 0,onShare:p.onShare?()=>p.onShare(u.status):void 0,onQuote:p.onQuote?()=>p.onQuote(u.status):void 0})),D=d,b=k(()=>D.quoteCount);let F=be(!1);const X=k(()=>n()&&!!p.onDelete);async function ae(){if(!(o()||t(F)||!p.onDelete)){L(F,!0);try{await p.onDelete(u.status)}catch(ce){console.error("Delete action failed:",ce)}finally{L(F,!1)}}}var q=De(),U=Ce(q);{var ie=ce=>{var j=ar(),W=l(j);{var H=se=>{var I=De(),Z=Ce(I);Ze(Z,()=>e.actions),i(se,I)},$=se=>{const I=Z=>{var ue=tr(),g=l(ue,!0);s(ue),A(()=>{ue.disabled=o()||t(F),K(ue,"aria-label",f()),te(g,t(F)?"Deleting…":f())}),he("click",ue,ae),i(Z,ue)};{let Z=k(()=>({replies:d.repliesCount,boosts:d.reblogsCount,favorites:d.favouritesCount,quotes:t(b)})),ue=k(()=>({boosted:d.reblogged,favorited:d.favourited,bookmarked:d.bookmarked})),g=k(()=>`Post by ${u.account.displayName||u.account.username||"Unknown"}`),V=k(()=>`status-${d.id}`),G=k(()=>t(X)?I:void 0);Wt(se,{get counts(){return t(Z)},get states(){return t(ue)},get handlers(){return t(T)},get shareUrl(){return d.url},get shareTitle(){return t(g)},get readonly(){return o()},get size(){return r()},get idPrefix(){return t(V)},get extensions(){return t(G)}})}};S(W,se=>{e.actions?se(H):se($,!1)})}s(j),A(()=>pe(j,1,`status-actions ${c()}`)),i(ce,j)};S(U,ce=>{t(C)&&ce(ie)})}i(a,q),Pe()}J(["click"]);J(["click"]);J(["click"]);J(["click"]);J(["click","keydown"]);let rr=0;function nr(a="greater"){return`${a}-${++rr}`}J(["click","change"]);J(["click"]);J(["click","keydown"]);J(["input","click","keydown"]);function or(a){return a.key==="Enter"||a.key===" "||a.key==="Spacebar"}function gt(a={}){const{type:e="button",disabled:r=!1,loading:o=!1,pressed:c=!1,id:n,label:f,onClick:u,onPressedChange:d,onKeyDown:p,onFocus:N,onBlur:O,onDestroy:C}=a;let T=null;const D={disabled:r,loading:o,pressed:c,id:n||nr("button"),focused:!1},b=new Proxy(D,{set(g,V,G){const z=g[V];return g[V]=G,V==="pressed"&&z!==G&&d?.(G),F(),!0}});function F(){T&&ce(T)}function X(g){if(b.disabled||b.loading){g.preventDefault(),g.stopPropagation();return}u?.(g)}function ae(g){if(!(b.disabled||b.loading)){if(or(g)&&(g.preventDefault(),T&&u)){const V=new MouseEvent("click",{bubbles:!0,cancelable:!0});X(V)}p?.(g)}}function q(g){b.focused=!0,N?.(g)}function U(g){b.focused=!1,O?.(g)}function ie(g){return T=g,g.setAttribute("type",e),g.id=b.id,ce(g),g.addEventListener("click",X),g.addEventListener("keydown",ae),g.addEventListener("focus",q),g.addEventListener("blur",U),{update(){ce(g)},destroy(){g.removeEventListener("click",X),g.removeEventListener("keydown",ae),g.removeEventListener("focus",q),g.removeEventListener("blur",U),T=null,C?.()}}}function ce(g){const V=!b.disabled&&!b.loading;g.disabled=b.disabled||b.loading,g.setAttribute("aria-disabled",String(b.disabled||b.loading)),g.setAttribute("aria-busy",String(b.loading)),g.setAttribute("aria-pressed",String(b.pressed)),f&&g.setAttribute("aria-label",f),V?g.removeAttribute("tabindex"):g.setAttribute("tabindex","-1")}function j(){T&&!b.disabled&&!b.loading&&T.click()}function W(){T&&!b.disabled&&T.focus()}function H(){T&&T.blur()}function $(){b.pressed=!b.pressed}function se(g){b.disabled=g}function I(g){b.loading=g}function Z(g){b.pressed=g}function ue(){if(T){const g=T;g.removeEventListener("click",X),g.removeEventListener("keydown",ae),g.removeEventListener("focus",q),g.removeEventListener("blur",U),T=null}C?.()}return{state:b,actions:{button:ie},helpers:{click:j,focus:W,blur:H,toggle:$,setDisabled:se,setLoading:I,setPressed:Z,destroy:ue}}}var ir=v("<span> </span>"),sr=v('<button class="poll-composer__remove-btn svelte-1k5zzx"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-1k5zzx"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button>'),lr=v('<div class="poll-composer__option-row svelte-1k5zzx"><input type="text" class="poll-composer__option-input svelte-1k5zzx"/> <!> <!></div>'),cr=v('<button class="poll-composer__add-option svelte-1k5zzx"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-1k5zzx"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg> </button>'),ur=v("<option> </option>"),dr=v('<div class="poll-composer__error svelte-1k5zzx"> </div>'),vr=Oe('<svg class="poll-composer__spinner svelte-1k5zzx" viewBox="0 0 24 24"><circle class="poll-composer__spinner-track svelte-1k5zzx" cx="12" cy="12" r="10"></circle><circle class="poll-composer__spinner-path svelte-1k5zzx" cx="12" cy="12" r="10"></circle></svg> Creating poll...',1),fr=v('<div class="poll-composer__create svelte-1k5zzx"><div class="poll-composer__options svelte-1k5zzx"></div> <!> <div class="poll-composer__settings svelte-1k5zzx"><div class="poll-composer__setting svelte-1k5zzx"><label for="poll-expiration" class="svelte-1k5zzx">Poll length</label> <select id="poll-expiration" class="poll-composer__select svelte-1k5zzx"></select></div> <label class="poll-composer__checkbox svelte-1k5zzx"><input type="checkbox" class="svelte-1k5zzx"/> <span>Multiple choice</span></label> <label class="poll-composer__checkbox svelte-1k5zzx"><input type="checkbox" class="svelte-1k5zzx"/> <span>Hide vote counts until poll ends</span></label></div> <!> <button class="poll-composer__submit svelte-1k5zzx"><!></button></div>'),hr=Oe('<svg class="poll-composer__check-icon svelte-1k5zzx" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>'),gr=v('<span class="poll-composer__result-percentage svelte-1k5zzx"> </span>'),mr=v('<div><svg class="poll-composer__result-bar-svg svelte-1k5zzx" viewBox="0 0 100 1" preserveAspectRatio="none" aria-hidden="true"><rect class="poll-composer__result-bar-fill svelte-1k5zzx" x="0" y="0" height="1"></rect></svg></div>'),_r=v('<div class="poll-composer__result-content svelte-1k5zzx"><span class="poll-composer__result-title svelte-1k5zzx"> <!></span> <!></div> <!>',1),pr=v("<div><!></div>"),br=Oe('<svg viewBox="0 0 24 24" fill="currentColor" class="svelte-1k5zzx"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></svg>'),yr=Oe('<svg viewBox="0 0 24 24" fill="currentColor" class="svelte-1k5zzx"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></svg>'),wr=Oe('<svg viewBox="0 0 24 24" fill="currentColor" class="svelte-1k5zzx"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path><circle cx="12" cy="12" r="5"></circle></svg>'),kr=Oe('<svg viewBox="0 0 24 24" fill="currentColor" class="svelte-1k5zzx"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg>'),xr=v('<button><div class="poll-composer__vote-radio svelte-1k5zzx"><!></div> <span class="poll-composer__vote-option-text svelte-1k5zzx"> </span></button>'),Sr=v("<span> </span>"),Cr=v("<span>•</span> <span> </span>",1),zr=Oe('<svg class="poll-composer__spinner svelte-1k5zzx" viewBox="0 0 24 24"><circle class="poll-composer__spinner-track svelte-1k5zzx" cx="12" cy="12" r="10"></circle><circle class="poll-composer__spinner-path svelte-1k5zzx" cx="12" cy="12" r="10"></circle></svg> Voting...',1),Ar=v('<button class="poll-composer__vote-submit svelte-1k5zzx"><!></button>'),Tr=v('<button class="poll-composer__refresh svelte-1k5zzx" aria-label="Refresh poll results"><svg viewBox="0 0 24 24" fill="currentColor" class="svelte-1k5zzx"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></svg></button>'),Dr=v('<div class="poll-composer__error svelte-1k5zzx"> </div>'),Mr=v('<div class="poll-composer__vote svelte-1k5zzx"><div class="poll-composer__vote-options svelte-1k5zzx"></div> <div class="poll-composer__meta svelte-1k5zzx"><div class="poll-composer__vote-stats svelte-1k5zzx"><!> <!></div> <!></div> <!></div>'),Lr=v("<div><!></div>");function wi(a,e){Ve(e,!0);let r=Y(e,"config",19,()=>({})),o=Y(e,"handlers",19,()=>({}));const c=k(()=>rt(r().maxOptions,4)),n=k(()=>rt(r().minOptions,2)),f=k(()=>rt(r().maxOptionLength,50)),u=k(()=>rt(r().expirationOptions,()=>[{label:"5 minutes",seconds:300},{label:"30 minutes",seconds:1800},{label:"1 hour",seconds:3600},{label:"6 hours",seconds:21600},{label:"1 day",seconds:86400},{label:"3 days",seconds:259200},{label:"7 days",seconds:604800}],!0)),d=k(()=>rt(r().showCharacterCount,!0)),p=k(()=>rt(r().class,"")),N=k(()=>rt(r().showPercentages,!0)),O=k(()=>rt(r().animateResults,!0));let C=0;function T(M=""){return C+=1,{id:`poll-option-${C}`,value:M}}let D=be(nt([T(),T()])),b=be(86400),F=be(!1),X=be(!1),ae=be(nt([])),q=be(!1),U=be(null);const ie=gt({onClick:()=>se()}),ce=gt({onClick:()=>I()});function j(){t(D).length<t(c)&&L(D,[...t(D),T()],!0)}function W(M){t(D).length>t(n)&&L(D,t(D).filter(Q=>Q.id!==M),!0)}function H(M,Q){Q.length>t(f)||L(D,t(D).map(h=>h.id===M?{...h,value:Q}:h),!0)}function $(M){e.poll?.expired||e.poll?.voted||(e.poll?.multiple?t(ae).includes(M)?L(ae,t(ae).filter(Q=>Q!==M),!0):L(ae,[...t(ae),M],!0):L(ae,[M],!0))}async function se(){if(t(q))return;const M=t(D).map(Q=>Q.value.trim()).filter(Q=>Q.length>0);if(M.length<t(n)){L(U,`Please provide at least ${t(n)} options`);return}L(q,!0),L(U,null);try{await o().onSubmit?.({options:M,expiresIn:t(b),multiple:t(F),hideTotals:t(X)}),L(D,[T(),T()],!0),L(F,!1),L(X,!1)}catch(Q){L(U,Q instanceof Error?Q.message:"Failed to create poll",!0)}finally{L(q,!1)}}async function I(){if(!(t(q)||t(ae).length===0)){L(q,!0),L(U,null);try{await o().onVote?.(t(ae))}catch(M){L(U,M instanceof Error?M.message:"Failed to submit vote",!0)}finally{L(q,!1)}}}function Z(M){return!e.poll||!e.poll.votersCount||e.poll.votersCount===0?0:(M.votesCount||0)/e.poll.votersCount*100}function ue(){if(!e.poll?.expiresAt)return null;const M=typeof e.poll.expiresAt=="string"?new Date(e.poll.expiresAt):e.poll.expiresAt,Q=new Date,h=M.getTime()-Q.getTime();if(h<=0)return"Expired";const y=Math.floor(h/1e3),R=Math.floor(y/60),P=Math.floor(R/60),oe=Math.floor(P/24);return oe>0?`${oe} day${oe>1?"s":""} left`:P>0?`${P} hour${P>1?"s":""} left`:R>0?`${R} minute${R>1?"s":""} left`:`${y} second${y!==1?"s":""} left`}const g=k(()=>e.poll?.hideResultsUntilVoted&&!e.poll.voted&&!e.poll.expired);var V=Lr(),G=l(V);{var z=M=>{var Q=fr(),h=l(Q);Qe(h,23,()=>t(D),x=>x.id,(x,le,_e)=>{var He=lr(),E=l(He);ut(E);var B=m(E,2);{var re=ke=>{var we=ir();let ze;var Te=l(we);s(we),A(()=>{ze=pe(we,1,"poll-composer__char-count svelte-1k5zzx",null,ze,{"poll-composer__char-count--warn":t(le).value.length>t(f)*.9}),te(Te,`${t(le).value.length??""}/${t(f)??""}`)}),i(ke,we)};S(B,ke=>{t(d)&&ke(re)})}var Se=m(B,2);{var Re=ke=>{var we=sr();A(()=>K(we,"aria-label",`Remove option ${t(_e)+1}`)),he("click",we,()=>W(t(le).id)),i(ke,we)};S(Se,ke=>{t(D).length>t(n)&&ke(Re)})}s(He),A(()=>{K(E,"placeholder",`Option ${t(_e)+1}`),dt(E,t(le).value),K(E,"maxlength",t(f)),K(E,"aria-label",`Poll option ${t(_e)+1}`)}),he("input",E,ke=>H(t(le).id,ke.currentTarget.value)),i(x,He)}),s(h);var y=m(h,2);{var R=x=>{var le=cr(),_e=m(l(le));s(le),A(()=>te(_e,` Add option (${t(D).length??""}/${t(c)??""})`)),he("click",le,j),i(x,le)};S(y,x=>{t(D).length<t(c)&&x(R)})}var P=m(y,2),oe=l(P),ve=m(l(oe),2);Qe(ve,21,()=>t(u),x=>x.seconds,(x,le)=>{var _e=ur(),He=l(_e,!0);s(_e);var E={};A(()=>{te(He,t(le).label),E!==(E=t(le).seconds)&&(_e.value=(_e.__value=t(le).seconds)??"")}),i(x,_e)}),s(ve),s(oe);var w=m(oe,2),ee=l(w);ut(ee),Fe(2),s(w);var ye=m(w,2),xe=l(ye);ut(xe),Fe(2),s(ye),s(P);var ge=m(P,2);{var Ue=x=>{var le=dr(),_e=l(le,!0);s(le),A(()=>te(_e,t(U))),i(x,le)};S(ge,x=>{t(U)&&x(Ue)})}var Me=m(ge,2),fe=l(Me);{var de=x=>{var le=vr();Fe(),i(x,le)},_=x=>{var le=pt("Create poll");i(x,le)};S(fe,x=>{t(q)?x(de):x(_,!1)})}s(Me),at(Me,x=>ie.actions.button?.(x)),s(Q),A(x=>Me.disabled=x,[()=>t(D).map(x=>x.value.trim()).filter(x=>x.length>0).length<t(n)||t(q)]),sa(ve,()=>t(b),x=>L(b,x)),It(ee,()=>t(F),x=>L(F,x)),It(xe,()=>t(X),x=>L(X,x)),i(M,Q)},ne=M=>{var Q=Mr(),h=l(Q);Qe(h,23,()=>e.poll.options,(fe,de)=>fe.title+"-"+de,(fe,de,_)=>{var x=De(),le=Ce(x);{var _e=E=>{var B=pr();let re;var Se=l(B);{var Re=we=>{var ze=De(),Te=Ce(ze);Ze(Te,()=>e.renderOption,()=>t(de),()=>t(_),()=>t(de).voted||!1),i(we,ze)},ke=we=>{var ze=_r(),Te=Ce(ze),Le=l(Te),Ne=l(Le),Ee=m(Ne);{var Ie=We=>{var Je=hr();i(We,Je)};S(Ee,We=>{t(de).voted&&We(Ie)})}s(Le);var je=m(Le,2);{var Ge=We=>{var Je=gr(),Xe=l(Je);s(Je),A(ot=>te(Xe,`${ot??""}%`),[()=>Z(t(de)).toFixed(1)]),i(We,Je)};S(je,We=>{t(N)&&!t(g)&&We(Ge)})}s(Te);var Be=m(Te,2);{var Ke=We=>{const Je=k(()=>Math.max(0,Math.min(100,Z(t(de)))));var Xe=mr();let ot;var lt=l(Xe),me=l(lt);s(lt),s(Xe),A(()=>{ot=pe(Xe,1,"poll-composer__result-bar svelte-1k5zzx",null,ot,{"poll-composer__result-bar--animate":t(O)}),K(me,"width",t(Je))}),i(We,Xe)};S(Be,We=>{t(g)||We(Ke)})}A(()=>te(Ne,`${t(de).title??""} `)),i(we,ze)};S(Se,we=>{e.renderOption?we(Re):we(ke,!1)})}s(B),A(()=>re=pe(B,1,"poll-composer__result svelte-1k5zzx",null,re,{"poll-composer__result--voted":t(de).voted})),i(E,B)},He=E=>{var B=xr();let re;var Se=l(B),Re=l(Se);{var ke=Le=>{var Ne=De(),Ee=Ce(Ne);{var Ie=Be=>{var Ke=br();i(Be,Ke)},je=k(()=>t(ae).includes(t(_))),Ge=Be=>{var Ke=yr();i(Be,Ke)};S(Ee,Be=>{t(je)?Be(Ie):Be(Ge,!1)})}i(Le,Ne)},we=Le=>{var Ne=De(),Ee=Ce(Ne);{var Ie=Be=>{var Ke=wr();i(Be,Ke)},je=k(()=>t(ae).includes(t(_))),Ge=Be=>{var Ke=kr();i(Be,Ke)};S(Ee,Be=>{t(je)?Be(Ie):Be(Ge,!1)})}i(Le,Ne)};S(Re,Le=>{e.poll.multiple?Le(ke):Le(we,!1)})}s(Se);var ze=m(Se,2),Te=l(ze,!0);s(ze),s(B),A(Le=>{re=pe(B,1,"poll-composer__vote-option svelte-1k5zzx",null,re,Le),te(Te,t(de).title)},[()=>({"poll-composer__vote-option--selected":t(ae).includes(t(_))})]),he("click",B,()=>$(t(_))),i(E,B)};S(le,E=>{e.poll.voted||e.poll.expired||t(g)?E(_e):E(He,!1)})}i(fe,x)}),s(h);var y=m(h,2),R=l(y),P=l(R);{var oe=fe=>{var de=Sr(),_=l(de);s(de),A(()=>te(_,`${(e.poll.votersCount||0)??""} ${e.poll.votersCount===1?"vote":"votes"}`)),i(fe,de)};S(P,fe=>{t(g)||fe(oe)})}var ve=m(P,2);{var w=fe=>{var de=Cr(),_=m(Ce(de),2);let x;var le=l(_,!0);s(_),A(_e=>{x=pe(_,1,"svelte-1k5zzx",null,x,{"poll-composer__expired":e.poll.expired}),te(le,_e)},[ue]),i(fe,de)},ee=k(()=>ue());S(ve,fe=>{t(ee)&&fe(w)})}s(R);var ye=m(R,2);{var xe=fe=>{var de=Ar(),_=l(de);{var x=_e=>{var He=zr();Fe(),i(_e,He)},le=_e=>{var He=pt("Vote");i(_e,He)};S(_,_e=>{t(q)?_e(x):_e(le,!1)})}s(de),at(de,_e=>ce.actions.button?.(_e)),A(()=>de.disabled=t(ae).length===0||t(q)),i(fe,de)},ge=fe=>{var de=Tr();he("click",de,()=>o().onRefresh?.()),i(fe,de)};S(ye,fe=>{!e.poll.voted&&!e.poll.expired?fe(xe):e.poll.expired||fe(ge,1)})}s(y);var Ue=m(y,2);{var Me=fe=>{var de=Dr(),_=l(de,!0);s(de),A(()=>te(_,t(U))),i(fe,de)};S(Ue,fe=>{t(U)&&fe(Me)})}s(Q),i(M,Q)};S(G,M=>{e.mode==="create"?M(z):e.poll&&M(ne,1)})}s(V),A(()=>pe(V,1,`poll-composer poll-composer--${e.mode} ${t(p)}`,"svelte-1k5zzx")),i(a,V),Pe()}J(["input","click"]);J(["click","input","change"]);J(["click","change"]);class Nr{cache;accessOrder;maxSize;defaultTTL;debug;hits;misses;logger;constructor(e={}){this.cache=new Map,this.accessOrder=[],this.maxSize=e.maxSize??1e3,this.defaultTTL=e.defaultTTL??3e5,this.debug=e.debug??!1,this.hits=0,this.misses=0,this.logger=e.logger}get(e){const r=this.cache.get(e);if(!r){this.misses++,this.log("miss",e);return}if(Date.now()-r.timestamp>r.ttl){this.cache.delete(e),this.removeFromAccessOrder(e),this.misses++,this.log("expired",e);return}return this.updateAccessOrder(e),this.hits++,this.log("hit",e),r.value}set(e,r,o){const c={value:r,timestamp:Date.now(),ttl:o??this.defaultTTL,size:this.estimateSize(r)};this.cache.size>=this.maxSize&&!this.cache.has(e)&&this.evictLRU(),this.cache.set(e,c),this.updateAccessOrder(e),this.log("set",e,`ttl=${c.ttl}ms`)}has(e){return this.get(e)!==void 0}delete(e){const r=this.cache.delete(e);return r&&(this.removeFromAccessOrder(e),this.log("delete",e)),r}clear(){this.cache.clear(),this.accessOrder=[],this.hits=0,this.misses=0,this.log("clear","all")}getStats(){return{size:this.cache.size,maxSize:this.maxSize,hits:this.hits,misses:this.misses,hitRate:this.hits/(this.hits+this.misses)||0}}invalidate(e){const r=typeof e=="string"?new RegExp(e):e,o=e.toString();let c=0;for(const n of this.cache.keys())r.test(n)&&(this.delete(n),c++);return this.log("invalidate",o,`${c} entries`),c}updateAccessOrder(e){this.removeFromAccessOrder(e),this.accessOrder.push(e)}removeFromAccessOrder(e){const r=this.accessOrder.indexOf(e);r!==-1&&this.accessOrder.splice(r,1)}evictLRU(){if(this.accessOrder.length===0)return;const e=this.accessOrder[0];e!==void 0&&(this.cache.delete(e),this.accessOrder.shift(),this.log("evict",e))}estimateSize(e){try{return JSON.stringify(e).length}catch{return 1e3}}log(e,r,o){if(!this.debug)return;const c=this.getStats(),n={scope:"cache",action:e,message:`${r}${o?` ${o}`:""}`.trim(),stats:c};this.logger?this.logger(n):typeof console<"u"&&typeof console.warn=="function"&&console.warn(`[Cache] ${e} key="${r}" ${o||""} (${c.size}/${c.maxSize}, hit rate: ${(c.hitRate*100).toFixed(1)}%)`)}}new Nr({maxSize:1e3,defaultTTL:3e5,debug:!1});J(["click"]);J(["click"]);J(["change","click","input"]);J(["change","click"]);J(["change","click"]);J(["input","click"]);J(["input","click"]);J(["click"]);J(["click"]);J(["click"]);J(["click"]);var Rr=v('<div class="reblog-indicator"><!> <span> </span></div>'),Er=v('<div class="custom-header"><!></div>'),Ir=v('<a class="reply-indicator__link"> </a>'),Ur=v('<span class="reply-indicator__link"> </span>'),Br=v('<div class="reply-indicator"><!> <span>Replying to</span> <!></div>'),Or=v('<span class="bot-badge" aria-label="Bot account">BOT</span>'),Hr=v('<img loading="lazy" class="media-image"/>'),Fr=v('<video controls="" class="media-video"><track kind="captions"/></video>',2),Vr=v('<audio controls="" class="media-audio"></audio>'),Pr=v('<div class="media-file"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"></path></svg> <span> </span></div>'),qr=v('<p class="media-overlay__text"> </p>'),Wr=v('<div class="media-overlay media-overlay--sensitive"><span class="media-overlay__label">Sensitive content</span> <!> <button type="button" class="media-reveal">Show media</button></div>'),jr=v('<div class="media-badge">Sensitive</div>'),Kr=v("<div><!> <!></div>"),Gr=v("<div></div>"),Qr=v('<div class="custom-footer"><!></div>'),Xr=v('<article><!> <!> <!> <div class="status-header"><a class="avatar-link"><img alt="" class="avatar" loading="lazy" width="48" height="48"/></a> <div class="account-info"><a class="display-name"> <!></a> <div class="account-handle"> </div></div> <time class="timestamp"> </time></div> <div class="status-content"><!></div> <!> <!> <!></article>');function ki(a,e){Ve(e,!0);let r=Y(e,"density",3,"comfortable"),o=Y(e,"showActions",3,!0),c=Y(e,"class",3,"");const n=k(()=>e.status.reblog?.account||e.status.account),f=k(()=>e.status.reblog||e.status),u=k(()=>Ft(t(f).createdAt)),d=k(()=>t(f).inReplyToAccount),p=k(()=>t(f).inReplyToStatus?.url||(t(f).inReplyToId?`#/status/${t(f).inReplyToId}`:void 0));function N(w){const ee=w.target;ee instanceof HTMLElement&&(ee.tagName==="A"||ee.tagName==="BUTTON"||ee.closest("a, button"))||e.onclick?.(e.status)}const O=k(()=>({onReply:e.actionHandlers?.onReply?()=>e.actionHandlers.onReply(e.status):void 0,onBoost:e.actionHandlers?.onBoost?()=>e.actionHandlers.onBoost(e.status):void 0,onFavorite:e.actionHandlers?.onFavorite?()=>e.actionHandlers.onFavorite(e.status):void 0,onShare:e.actionHandlers?.onShare?()=>e.actionHandlers.onShare(e.status):void 0,onQuote:e.actionHandlers?.onQuote?()=>e.actionHandlers.onQuote(e.status):void 0}));let C=be(nt({}));function T(w){if(w.mediaCategory)switch(w.mediaCategory){case"IMAGE":return"image";case"VIDEO":case"GIFV":return"video";case"AUDIO":return"audio";default:return"file"}switch(w.type){case"image":return"image";case"video":case"gifv":return"video";case"audio":return"audio";default:return"file"}}function D(w){return w.sensitive===!0&&t(C)[w.id]!==!0}function b(w){L(C,{...t(C),[w]:t(C)[w]!==!0},!0)}var F=Xr();let X;var ae=l(F);{var q=w=>{var ee=Rr(),ye=l(ee);zt(ye,{class:"reblog-icon",size:16});var xe=m(ye,2),ge=l(xe);s(xe),s(ee),A(()=>te(ge,`${(e.status.account.displayName||e.status.account.username)??""} boosted`)),i(w,ee)};S(ae,w=>{e.status.reblog&&w(q)})}var U=m(ae,2);{var ie=w=>{var ee=Er(),ye=l(ee);Ze(ye,()=>e.header),s(ee),i(w,ee)};S(U,w=>{e.header&&w(ie)})}var ce=m(U,2);{var j=w=>{var ee=Br(),ye=l(ee);Ht(ye,{class:"reply-icon",size:16});var xe=m(ye,4);{var ge=Me=>{var fe=Ir(),de=l(fe);s(fe),A(()=>{K(fe,"href",t(p)),te(de,`post from ${(t(d)?.displayName||t(d)?.username||"original author")??""}`)}),i(Me,fe)},Ue=Me=>{var fe=Ur(),de=l(fe);s(fe),A(()=>te(de,`post from ${(t(d).displayName||t(d).username)??""}`)),i(Me,fe)};S(xe,Me=>{t(p)?Me(ge):t(d)&&Me(Ue,1)})}s(ee),i(w,ee)};S(ce,w=>{(t(d)||t(p))&&w(j)})}var W=m(ce,2),H=l(W),$=l(H);s(H);var se=m(H,2),I=l(se),Z=l(I),ue=m(Z);{var g=w=>{var ee=Or();i(w,ee)};S(ue,w=>{t(n).bot&&w(g)})}s(I);var V=m(I,2),G=l(V);s(V),s(se);var z=m(se,2),ne=l(z,!0);s(z),s(W);var M=m(W,2),Q=l(M);qt(Q,{get content(){return t(f).content},get spoilerText(){return t(f).spoilerText},get mentions(){return t(f).mentions},get tags(){return t(f).tags}}),s(M);var h=m(M,2);{var y=w=>{var ee=Gr();let ye;Qe(ee,21,()=>t(f).mediaAttachments,xe=>xe.id,(xe,ge)=>{const Ue=k(()=>T(t(ge)));var Me=Kr();let fe;var de=l(Me);{var _=B=>{var re=Hr();A(()=>{K(re,"src",t(ge).previewUrl||t(ge).url),K(re,"alt",t(ge).description||"")}),i(B,re)},x=B=>{var re=Fr();A(()=>{K(re,"src",t(ge).url),K(re,"poster",t(ge).previewUrl),K(re,"aria-label",t(ge).description||"Video")}),i(B,re)},le=B=>{var re=Vr();A(()=>{K(re,"src",t(ge).url),K(re,"aria-label",t(ge).description||"Audio")}),i(B,re)},_e=B=>{var re=Pr(),Se=m(l(re),2),Re=l(Se,!0);s(Se),s(re),A(()=>te(Re,t(ge).description||"Attachment")),i(B,re)};S(de,B=>{t(Ue)==="image"?B(_):t(Ue)==="video"?B(x,1):t(Ue)==="audio"?B(le,2):B(_e,!1)})}var He=m(de,2);{var E=B=>{var re=De(),Se=Ce(re);{var Re=ze=>{var Te=Wr(),Le=m(l(Te),2);{var Ne=Ie=>{var je=qr(),Ge=l(je,!0);s(je),A(()=>te(Ge,t(ge).spoilerText)),i(Ie,je)};S(Le,Ie=>{t(ge).spoilerText&&Ie(Ne)})}var Ee=m(Le,2);s(Te),he("click",Ee,()=>b(t(ge).id)),i(ze,Te)},ke=k(()=>D(t(ge))),we=ze=>{var Te=jr();i(ze,Te)};S(Se,ze=>{t(ke)?ze(Re):ze(we,!1)})}i(B,re)};S(He,B=>{t(ge).sensitive&&B(E)})}s(Me),A(B=>fe=pe(Me,1,"media-item",null,fe,B),[()=>({blurred:D(t(ge))})]),i(xe,Me)}),s(ee),A(()=>ye=pe(ee,1,"media-attachments",null,ye,{single:t(f).mediaAttachments.length===1})),i(w,ee)};S(h,w=>{t(f).mediaAttachments&&t(f).mediaAttachments.length>0&&w(y)})}var R=m(h,2);{var P=w=>{{let ee=k(()=>({replies:t(f).repliesCount,boosts:t(f).reblogsCount,favorites:t(f).favouritesCount,quotes:t(f).quoteCount})),ye=k(()=>({boosted:t(f).reblogged,favorited:t(f).favourited,bookmarked:t(f).bookmarked})),xe=k(()=>`Post by ${t(n).displayName||t(n).username}`),ge=k(()=>(r()==="compact","sm")),Ue=k(()=>`status-${t(f).id}`);Wt(w,{get counts(){return t(ee)},get states(){return t(ye)},get handlers(){return t(O)},get shareUrl(){return t(f).url},get shareTitle(){return t(xe)},get size(){return t(ge)},get idPrefix(){return t(Ue)}})}};S(R,w=>{o()&&w(P)})}var oe=m(R,2);{var ve=w=>{var ee=Qr(),ye=l(ee);Ze(ye,()=>e.footer),s(ee),i(w,ee)};S(oe,w=>{e.footer&&w(ve)})}s(F),A(()=>{X=pe(F,1,`status-card ${r()} ${c()}`,null,X,{clickable:e.onclick}),K(F,"role",e.onclick?"button":void 0),K(F,"tabindex",e.onclick?0:void 0),K(F,"aria-label",`Status by ${t(n).displayName||t(n).username}`),K(H,"href",t(n).url),K(H,"aria-label",`View ${t(n).displayName||t(n).username}'s profile`),K($,"src",t(n).avatar),K(I,"href",t(n).url),te(Z,`${(t(n).displayName||t(n).username)??""} `),te(G,`@${t(n).acct??""}`),K(z,"datetime",t(u).iso),K(z,"title",t(u).absolute),te(ne,t(u).relative)}),he("click",F,function(...w){(e.onclick?N:void 0)?.apply(this,w)}),tt("keypress",F,function(...w){(e.onclick?ee=>ee.key==="Enter"&&N(ee):void 0)?.apply(this,w)}),i(a,F),Pe()}J(["click"]);function Jr(a){const e=new Map;for(const r of a){const o=Yr(r),c=e.get(o);if(c)c.notifications.push(r),c.count=c.notifications.length,c.accounts.some(f=>f.id===r.account.id)||c.accounts.push(r.account),new Date(r.createdAt)>new Date(c.latestCreatedAt)&&(c.latestCreatedAt=r.createdAt,c.sampleNotification=r),c.allRead=c.allRead&&(r.read??!1);else{const n={id:o,type:r.type,notifications:[r],accounts:[r.account],sampleNotification:r,count:1,latestCreatedAt:r.createdAt,allRead:r.read??!1};e.set(o,n)}}return Array.from(e.values()).sort((r,o)=>new Date(o.latestCreatedAt).getTime()-new Date(r.latestCreatedAt).getTime())}function Yr(a){switch(a.type){case"reblog":case"favourite":return`${a.type}-${"status"in a&&a.status?.id||"unknown"}`;case"mention":return`${a.type}-${"status"in a&&a.status?.id||a.id}`;case"follow":case"follow_request":return`${a.type}-group`;case"poll":return`${a.type}-${"status"in a&&a.status?.id||"unknown"}`;case"status":case"update":return`${a.type}-${a.id}`;case"admin.sign_up":case"admin.report":return`${a.type}-group`;default:return`${a.type}-${a.id}`}}function Zr(a){const{type:e,count:r,accounts:o}=a,c=o[0];if(!c)return`${r} notification${r!==1?"s":""}`;if(r===1)switch(e){case"mention":return`${c.displayName} mentioned you`;case"reblog":return`${c.displayName} boosted your post`;case"favourite":return`${c.displayName} favorited your post`;case"follow":return`${c.displayName} followed you`;case"follow_request":return`${c.displayName} requested to follow you`;case"poll":return`${c.displayName} voted in your poll`;case"status":return`${c.displayName} posted`;case"update":return`${c.displayName} edited a post`;case"admin.sign_up":return"New user registration";case"admin.report":return"New report submitted";default:return"Notification"}if(r===2){const n=o[1];if(!n)return`${c.displayName} and 1 other`;switch(e){case"mention":return`${c.displayName} and ${n.displayName} mentioned you`;case"reblog":return`${c.displayName} and ${n.displayName} boosted your post`;case"favourite":return`${c.displayName} and ${n.displayName} favorited your post`;case"follow":return`${c.displayName} and ${n.displayName} followed you`;case"follow_request":return`${c.displayName} and ${n.displayName} requested to follow you`;case"poll":return`${c.displayName} and ${n.displayName} voted in your poll`;default:return`${r} notifications`}}switch(e){case"mention":return`${c.displayName} and ${r-1} others mentioned you`;case"reblog":return`${c.displayName} and ${r-1} others boosted your post`;case"favourite":return`${c.displayName} and ${r-1} others favorited your post`;case"follow":return`${c.displayName} and ${r-1} others followed you`;case"follow_request":return`${c.displayName} and ${r-1} others requested to follow you`;case"poll":return`${c.displayName} and ${r-1} others voted in your poll`;case"admin.sign_up":return`${r} new user registrations`;case"admin.report":return`${r} new reports`;default:return`${r} notifications`}}function $r(a){switch(a){case"mention":return"at-sign";case"reblog":return"repeat";case"favourite":return"heart";case"follow":return"user-plus";case"follow_request":return"user-clock";case"poll":return"bar-chart";case"status":return"message-circle";case"update":return"edit";case"admin.sign_up":return"user-check";case"admin.report":return"flag";default:return"bell"}}function en(a){switch(a){case"mention":return"primary";case"reblog":return"success";case"favourite":return"accent";case"follow":case"follow_request":return"secondary";case"poll":return"info";case"status":case"update":return"primary";case"admin.sign_up":case"admin.report":return"warning";default:return"muted"}}function tn(a){const e=new Date,r=new Date(a),o=Math.floor((e.getTime()-r.getTime())/1e3);return o<60?"now":o<3600?`${Math.floor(o/60)}m`:o<86400?`${Math.floor(o/3600)}h`:o<604800?`${Math.floor(o/86400)}d`:r.toLocaleDateString(void 0,{month:"short",day:"numeric",year:r.getFullYear()!==e.getFullYear()?"numeric":void 0})}function an(a){if(!a.read)return!0;const e=new Date(Date.now()-36e5);return new Date(a.createdAt)>e}J(["click"]);const jt=Symbol("search-context"),Kt={actors:[],notes:[],tags:[],total:0};function xi(a=""){return{query:a,type:"all",results:Kt,loading:!1,error:null,semantic:!1,following:!1,recentSearches:rn()}}function Si(a,e={}){const r={state:a,handlers:e,updateState:o=>{Object.assign(a,o)},clearError:()=>{a.error=null},search:async o=>{const c=o??a.query;if(c.trim()){a.loading=!0,a.error=null;try{const n=await e.onSearch?.({query:c.trim(),type:a.type==="all"?void 0:a.type,semantic:a.semantic,following:a.following});n&&(a.results=n,r.addRecentSearch(c.trim()))}catch(n){a.error=n instanceof Error?n.message:"Search failed"}finally{a.loading=!1}}},clear:()=>{a.query="",a.results=Kt,a.error=null,e.onClear?.()},setType:o=>{a.type=o,a.query.trim()&&r.search()},toggleSemantic:()=>{a.semantic=!a.semantic,a.query.trim()&&r.search()},toggleFollowing:()=>{a.following=!a.following,a.query.trim()&&r.search()},addRecentSearch:o=>{const c=o.trim();c&&(a.recentSearches=[c,...a.recentSearches.filter(n=>n!==c)].slice(0,10),nn(a.recentSearches))}};return Dt(jt,r),r}function Gt(){const a=Tt(jt);if(!a)throw new Error("Search components must be used within a Search.Root component");return a}function rn(){if(typeof window>"u")return[];try{const a=localStorage.getItem("greater-search-recent");return a?JSON.parse(a):[]}catch{return[]}}function nn(a){if(!(typeof window>"u"))try{localStorage.setItem("greater-search-recent",JSON.stringify(a))}catch{}}var on=v('<button class="search-bar__clear" aria-label="Clear search"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button>'),sn=v('<button title="AI Semantic Search"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M9 2C7.89 2 7 2.89 7 4V20C7 21.11 7.89 22 9 22H15C16.11 22 17 21.11 17 20V4C17 2.89 16.11 2 15 2H9M9 4H15V8H9V4M15 12V14H9V12H15M15 16V18H9V16H15Z"></path></svg></button>'),ln=v('<span class="search-bar__spinner"></span>'),cn=v('<button class="search-bar__recent-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></svg> </button>'),un=v('<div class="search-bar__recent"><div class="search-bar__recent-header"><span>Recent Searches</span> <button class="search-bar__recent-clear">Clear</button></div> <div class="search-bar__recent-list"></div></div>'),dn=v('<div><div class="search-bar__input-wrapper"><svg class="search-bar__icon" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg> <input type="text" class="search-bar__input"/> <!> <!> <button class="search-bar__submit"><!></button> <!></div></div>');function Ci(a,e){Ve(e,!0);let r=Y(e,"placeholder",3,"Search..."),o=Y(e,"showSemantic",3,!0),c=Y(e,"showRecent",3,!0),n=Y(e,"autofocus",3,!1),f=Y(e,"class",3,"");const{state:u,search:d,clear:p,toggleSemantic:N,updateState:O}=Gt();let C=be(!1);const T=gt({onClick:()=>F()}),D=gt({onClick:()=>X()});let b=be(null);$e(()=>{n()&&t(b)&&document.activeElement!==t(b)&&t(b).focus()});function F(){u.query.trim()&&(d(),L(C,!1))}function X(){p(),L(C,!1)}function ae(z){O({query:z}),L(C,c()&&!z.trim()&&u.recentSearches.length>0,!0)}function q(z){O({query:z}),d(z),L(C,!1)}function U(z){z.key==="Enter"?F():z.key==="Escape"&&L(C,!1)}var ie=dn(),ce=l(ie),j=m(l(ce),2);ut(j),st(j,z=>L(b,z),()=>t(b));var W=m(j,2);{var H=z=>{var ne=on();at(ne,M=>D.actions.button?.(M)),i(z,ne)};S(W,z=>{u.query&&z(H)})}var $=m(W,2);{var se=z=>{var ne=sn();let M;A(()=>{M=pe(ne,1,"search-bar__semantic",null,M,{"search-bar__semantic--active":u.semantic}),ne.disabled=u.loading,K(ne,"aria-pressed",u.semantic),K(ne,"aria-label",u.semantic?"Disable semantic search":"Enable semantic search")}),he("click",ne,N),i(z,ne)};S($,z=>{o()&&z(se)})}var I=m($,2),Z=l(I);{var ue=z=>{var ne=ln();i(z,ne)},g=z=>{var ne=pt("Search");i(z,ne)};S(Z,z=>{u.loading?z(ue):z(g,!1)})}s(I),at(I,z=>T.actions.button?.(z));var V=m(I,2);{var G=z=>{var ne=un(),M=l(ne),Q=m(l(M),2);s(M);var h=m(M,2);Qe(h,20,()=>u.recentSearches,y=>y,(y,R)=>{var P=cn(),oe=m(l(P));s(P),A(()=>te(oe,` ${R??""}`)),he("click",P,()=>q(R)),i(y,P)}),s(h),s(ne),he("click",Q,()=>O({recentSearches:[]})),i(z,ne)};S(V,z=>{t(C)&&z(G)})}s(ce),s(ie),A(z=>{pe(ie,1,`search-bar ${f()}`),K(j,"placeholder",r()),dt(j,u.query),j.disabled=u.loading,K(I,"aria-label",u.loading?"Searching":"Search"),I.disabled=z},[()=>u.loading||!u.query.trim()]),he("input",j,z=>ae(z.currentTarget.value)),he("keydown",j,U),tt("focus",j,()=>L(C,c()&&!u.query.trim()&&u.recentSearches.length>0,!0)),i(a,ie),Pe()}J(["input","keydown","click"]);var vn=v('<span class="search-filters__count"> </span>'),fn=v("<button><span> </span> <!></button>"),hn=v("<div></div>");function zi(a,e){Ve(e,!0);let r=Y(e,"class",3,"");const{state:o,setType:c}=Gt(),n=[{id:"all",label:"All",getCount:()=>o.results.total},{id:"actors",label:"People",getCount:()=>o.results.actors.length},{id:"notes",label:"Posts",getCount:()=>o.results.notes.length},{id:"tags",label:"Tags",getCount:()=>o.results.tags.length}];var f=hn();Qe(f,21,()=>n,u=>u.id,(u,d)=>{var p=fn();let N;var O=l(p),C=l(O,!0);s(O);var T=m(O,2);{var D=F=>{var X=vn(),ae=l(X,!0);s(X),A(q=>te(ae,q),[()=>t(d).getCount()]),i(F,X)},b=k(()=>t(d).getCount()>0);S(T,F=>{t(b)&&F(D)})}s(p),A(()=>{N=pe(p,1,"search-filters__tab",null,N,{"search-filters__tab--active":o.type===t(d).id}),te(C,t(d).label)}),he("click",p,()=>c(t(d).id)),i(u,p)}),s(f),A(()=>pe(f,1,`search-filters ${r()}`)),i(a,f),Pe()}J(["click"]);J(["click","keydown"]);J(["click","keydown"]);J(["click"]);J(["click"]);J(["click"]);J(["click"]);J(["change"]);J(["click"]);J(["click"]);J(["keydown"]);J(["click"]);const Qt=Symbol("compose-context");function Ai(a={},e={},r={},o){const c=a.characterLimit||500,n={content:"",contentWarning:"",visibility:a.defaultVisibility||"public",mediaAttachments:[],submitting:!1,error:null,characterCount:0,overLimit:!1,inReplyTo:void 0,contentWarningEnabled:!1},f=o||{...n,...r};function u(){Object.assign(f,n)}const d={config:{characterLimit:c,allowMedia:a.allowMedia??!0,maxMediaAttachments:a.maxMediaAttachments||4,allowPolls:a.allowPolls??!0,allowContentWarnings:a.allowContentWarnings??!0,defaultVisibility:a.defaultVisibility||"public",enableMarkdown:a.enableMarkdown??!1,placeholder:a.placeholder||"What's on your mind?",class:a.class||""},handlers:e,state:f,updateState:p=>{Object.assign(f,p)},reset:u};return Dt(Qt,d),d}function yt(){const a=Tt(Qt);if(!a)throw new Error("Compose context not found. Make sure you are using Compose components inside <Compose.Root>.");return a}var gn=v('<div><textarea aria-label="Compose post content" aria-describedby="compose-character-count"></textarea></div>');function Ti(a,e){Ve(e,!0);let r=Y(e,"rows",3,4),o=Y(e,"autofocus",3,!1),c=Y(e,"class",3,"");const n=yt();let f;bt(()=>o())&&Bt(()=>{queueMicrotask(()=>f?.focus())});function u(C){const T=C.target;n.updateState({content:T.value})}function d(C){if((C.metaKey||C.ctrlKey)&&C.key==="Enter"){C.preventDefault();const T=f.closest("form");T&&T.requestSubmit()}}var p=gn();let N;var O=l(p);Mt(O),st(O,C=>f=C,()=>f),s(p),A(C=>{N=pe(p,1,C,null,N,{"compose-editor--disabled":n.state.submitting}),K(p,"data-gr-value",`${n.state.content}
`),K(O,"rows",r()),K(O,"placeholder",n.config.placeholder),dt(O,n.state.content),O.disabled=n.state.submitting},[()=>Lt(`compose-editor gr-autosize-textarea ${c()}`.trim())]),he("input",O,u),he("keydown",O,d),i(a,p),Pe()}J(["input","keydown"]);var mn=v("<option> </option>"),_n=v('<div><label for="compose-visibility" class="compose-visibility-select__label">Visibility</label> <select id="compose-visibility" class="compose-visibility-select__select" aria-label="Post visibility"></select> <p class="compose-visibility-select__description"> </p></div>');function Di(a,e){Ve(e,!0);let r=Y(e,"class",3,"");const o=yt(),c=[{value:"public",label:"Public",icon:"🌐",description:"Anyone can see this post"},{value:"unlisted",label:"Unlisted",icon:"🔓",description:"Not shown in public timelines"},{value:"private",label:"Followers only",icon:"🔒",description:"Only your followers can see"},{value:"direct",label:"Direct",icon:"✉️",description:"Only mentioned users can see"}],n=k(()=>c.find(C=>C.value===o.state.visibility)||c[0]);function f(C){const T=C.target;o.updateState({visibility:T.value})}var u=_n(),d=m(l(u),2);Qe(d,21,()=>c,C=>C.value,(C,T)=>{var D=mn(),b=l(D);s(D);var F={};A(()=>{te(b,`${t(T).icon??""}
				${t(T).label??""}`),F!==(F=t(T).value)&&(D.value=(D.__value=t(T).value)??"")}),i(C,D)}),s(d);var p;la(d);var N=m(d,2),O=l(N,!0);s(N),s(u),A(()=>{pe(u,1,`compose-visibility-select ${r()}`),d.disabled=o.state.submitting,p!==(p=o.state.visibility)&&(d.value=(d.__value=o.state.visibility)??"",ca(d,o.state.visibility)),te(O,t(n).description)}),he("change",d,f),i(a,u),Pe()}J(["change"]);var pn=v('<div class="autocomplete-menu__loading"><span class="autocomplete-menu__spinner"></span> <span>Loading suggestions...</span></div>'),bn=v('<div class="autocomplete-menu__empty">No suggestions found</div>'),yn=v('<img alt="" class="autocomplete-menu__avatar"/>'),wn=v('<span class="autocomplete-menu__followers"> </span>'),kn=v('<div class="autocomplete-menu__secondary"><!> <!></div>'),xn=v('<div class="autocomplete-menu__secondary"> </div>'),Sn=v('<span class="autocomplete-menu__emoji"> </span>'),Cn=v('<button role="option" type="button"><!> <div class="autocomplete-menu__content"><div class="autocomplete-menu__primary"> </div> <!> <!></div> <!></button>'),zn=v('<div role="listbox" aria-label="Autocomplete suggestions"><!></div>');function An(a,e){Ve(e,!0);let r=Y(e,"selectedIndex",3,0),o=Y(e,"loading",3,!1),c=Y(e,"class",3,""),n=null;function f(T){T.key==="Escape"&&(T.preventDefault(),e.onClose())}function u(T){n&&!n.contains(T.target)&&e.onClose()}$e(()=>(document.addEventListener("keydown",f),document.addEventListener("click",u),()=>{document.removeEventListener("keydown",f),document.removeEventListener("click",u)})),$e(()=>{if(n&&r()>=0){const T=n.querySelector(`[data-index="${r()}"]`);T&&T.scrollIntoView({block:"nearest",behavior:"smooth"})}});var d=zn(),p=l(d);{var N=T=>{var D=pn();i(T,D)},O=T=>{var D=bn();i(T,D)},C=T=>{var D=De(),b=Ce(D);Qe(b,19,()=>e.suggestions,F=>F.value,(F,X,ae)=>{var q=Cn();let U;var ie=l(q);{var ce=V=>{var G=yn();A(()=>K(G,"src",t(X).metadata.avatar)),i(V,G)};S(ie,V=>{t(X).type==="mention"&&t(X).metadata?.avatar&&V(ce)})}var j=m(ie,2),W=l(j),H=l(W,!0);s(W);var $=m(W,2);{var se=V=>{var G=kn(),z=l(G);{var ne=h=>{var y=pt();A(()=>te(y,t(X).metadata.displayName)),i(h,y)};S(z,h=>{t(X).metadata.displayName&&h(ne)})}var M=m(z,2);{var Q=h=>{var y=wn(),R=l(y);s(y),A(P=>te(R,`${P??""} followers`),[()=>t(X).metadata.followers.toLocaleString()]),i(h,y)};S(M,h=>{t(X).metadata.followers!==void 0&&h(Q)})}s(G),i(V,G)};S($,V=>{t(X).type==="mention"&&t(X).metadata&&V(se)})}var I=m($,2);{var Z=V=>{var G=xn(),z=l(G);s(G),A(()=>te(z,`#${t(X).value??""}`)),i(V,G)};S(I,V=>{t(X).type==="hashtag"&&V(Z)})}s(j);var ue=m(j,2);{var g=V=>{var G=Sn(),z=l(G,!0);s(G),A(()=>te(z,t(X).value)),i(V,G)};S(ue,V=>{t(X).type==="emoji"&&V(g)})}s(q),A(()=>{U=pe(q,1,"autocomplete-menu__item",null,U,{"autocomplete-menu__item--selected":t(ae)===r()}),K(q,"data-index",t(ae)),K(q,"aria-selected",t(ae)===r()),te(H,t(X).text)}),he("click",q,()=>e.onSelect(t(X))),i(F,q)}),i(T,D)};S(p,T=>{o()?T(N):e.suggestions.length===0?T(O,1):T(C,!1)})}s(d),st(d,T=>n=T,()=>n),A(()=>pe(d,1,`autocomplete-menu ${c()}`)),i(a,d),Pe()}J(["click"]);function Tn(a,e){let r=e-1;for(;r>=0&&a[r]!==" "&&a[r]!==`
`;)r--;r++;const o=r,c=e,n=a.substring(o,c);return n.startsWith("#")&&n.length>1?{type:"hashtag",query:n.slice(1),start:o,end:c}:n.startsWith("@")&&n.length>1?{type:"mention",query:n.slice(1),start:o,end:c}:n.startsWith(":")&&n.length>1?{type:"emoji",query:n.slice(1),start:o,end:c}:null}function Dn(a,e,r=10){if(!e)return a.slice(0,r);const o=e.toLowerCase();return a.map(n=>{const f=n.text.toLowerCase();let u=0;return f===o?u=1e3:f.startsWith(o)?u=100:f.includes(o)?u=10:u=0,{suggestion:n,score:u}}).filter(n=>n.score>0).sort((n,f)=>f.score-n.score).slice(0,r).map(n=>n.suggestion)}function Mn(a,e,r){let o=r.value;const c=a[e.end];c!==" "&&c!==`
`&&c!==void 0&&(o+=" ");const n=a.substring(0,e.start),f=a.substring(e.end),u=n+o+f,d=e.start+o.length;return{text:u,cursorPosition:d}}function Ln(a){return a.selectionStart||0}function Nn(a,e){a.setSelectionRange(e,e),a.focus()}function Rn(a){if(!a)return 0;if(typeof Intl<"u"&&"Segmenter"in Intl){const e=Intl.Segmenter;if(e){const r=new e("en",{granularity:"grapheme"});return Array.from(r.segment(a)).length}}return Array.from(a).length}const En=/https?:\/\/(?:www\.)?[-\w@:%+.~#=]{1,256}\.[\w()]{1,6}\b([-\w()@:%+.~#?&/=]*)/giu;function In(a,e={}){const{urlWeight:r=23,useUrlWeighting:o=!0}=e;if(!a)return{count:0,graphemeCount:0,urls:0,mentions:0,hashtags:0};const c=Rn(a),n=a.match(En)||[],f=n.reduce((N,O)=>N+O.length,0),u=a.match(/@[a-zA-Z0-9_]+(?:@[a-zA-Z0-9.-]+)?/g)||[],d=a.match(/#[a-zA-Z0-9_]+/g)||[];let p=c;return o&&n.length>0&&(p-=f,p+=n.length*r),{count:p,graphemeCount:c,urls:n.length,mentions:u.length,hashtags:d.length}}var Un=v('<div class="editor-with-autocomplete"><div><textarea aria-label="Compose post content" aria-describedby="compose-character-count"></textarea></div> <!></div>');function Mi(a,e){Ve(e,!0);let r=Y(e,"rows",3,4),o=Y(e,"autofocus",3,!1),c=Y(e,"class",3,"");const n=yt();let f,u=be(!1),d=be(null),p=be(nt([])),N=be(0),O=be(!1);bt(()=>o())&&Bt(()=>{queueMicrotask(()=>f?.focus())});async function C(){if(!f)return;const j=n.state.content,W=Ln(f),H=Tn(j,W);if(!H){L(u,!1),L(d,null);return}if(L(d,H,!0),e.searchHandler){L(O,!0);try{const $=await e.searchHandler(H.query,H.type);L(p,Dn($,H.query,10),!0),L(N,0),L(u,t(p).length>0)}catch($){console.error("Failed to fetch suggestions:",$),L(p,[],!0),L(u,!1)}finally{L(O,!1)}}}async function T(j){const W=j.target,H=In(W.value,{useUrlWeighting:!0,maxCharacters:n.config.characterLimit});n.updateState({content:W.value,characterCount:H.count,overLimit:H.count>n.config.characterLimit}),await C()}async function D(j){if(t(u)){if(j.key==="ArrowDown"){j.preventDefault(),L(N,Math.min(t(N)+1,t(p).length-1),!0);return}if(j.key==="ArrowUp"){j.preventDefault(),L(N,Math.max(t(N)-1,0),!0);return}if(j.key==="Enter"||j.key==="Tab"){j.preventDefault(),t(p)[t(N)]&&b(t(p)[t(N)]);return}if(j.key==="Escape"){j.preventDefault(),L(u,!1);return}}if((j.metaKey||j.ctrlKey)&&j.key==="Enter"){j.preventDefault();const W=f.closest("form");W&&W.requestSubmit()}}function b(j){if(!t(d)||!f)return;const W=Mn(n.state.content,t(d),j);n.updateState({content:W.text}),f.value=W.text,Nn(f,W.cursorPosition),L(u,!1),L(d,null)}function F(){L(u,!1),L(d,null)}var X=Un(),ae=l(X);let q;var U=l(ae);Mt(U),st(U,j=>f=j,()=>f),s(ae);var ie=m(ae,2);{var ce=j=>{An(j,{get suggestions(){return t(p)},get selectedIndex(){return t(N)},get loading(){return t(O)},onSelect:b,onClose:F})};S(ie,j=>{t(u)&&t(d)&&j(ce)})}s(X),A(j=>{q=pe(ae,1,j,null,q,{"compose-editor--disabled":n.state.submitting}),K(ae,"data-gr-value",`${n.state.content}
`),K(U,"rows",r()),K(U,"placeholder",n.config.placeholder),dt(U,n.state.content),U.disabled=n.state.submitting},[()=>Lt(`compose-editor gr-autosize-textarea ${c()}`.trim())]),he("input",U,T),he("keydown",U,D),i(a,X),Pe()}J(["input","keydown"]);const Bn="greater-compose-draft",vt="default",On=10080*60*1e3;function Nt(){try{const a="__localStorage_test__";return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch{return!1}}function Rt(a=vt){return`${Bn}-${a}`}function Hn(a,e=vt){if(!Nt())return console.warn("localStorage not available, cannot save draft"),!1;try{const r=Rt(e),o={...a,savedAt:Date.now()};return localStorage.setItem(r,JSON.stringify(o)),!0}catch(r){return console.error("Failed to save draft:",r),!1}}function Et(a=vt){if(!Nt())return null;try{const e=Rt(a),r=localStorage.getItem(e);if(!r)return null;const o=JSON.parse(r);return Date.now()-o.savedAt>On?(Xt(a),null):o}catch(e){return console.error("Failed to load draft:",e),null}}function Xt(a=vt){if(!Nt())return!1;try{const e=Rt(a);return localStorage.removeItem(e),!0}catch(e){return console.error("Failed to delete draft:",e),!1}}function Fn(a=vt){return Et(a)!==null}function Vn(a=vt){const e=Et(a);return e?Date.now()-e.savedAt:null}function Ut(a){const e=Math.floor(a/6e4),r=Math.floor(a/(3600*1e3)),o=Math.floor(a/(1440*60*1e3));return o>0?`${o} day${o!==1?"s":""} ago`:r>0?`${r} hour${r!==1?"s":""} ago`:e>0?`${e} minute${e!==1?"s":""} ago`:"just now"}var Pn=v('<button type="button" class="draft-saver__load"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"></path></svg> </button>'),qn=v('<div class="draft-saver__indicator"><svg viewBox="0 0 24 24" fill="currentColor" class="draft-saver__icon"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"></path></svg> <span class="draft-saver__text"> </span></div>'),Wn=v("<div><!> <!></div>");function Li(a,e){Ve(e,!0);let r=Y(e,"draftKey",3,"default"),o=Y(e,"autoSave",3,!0),c=Y(e,"intervalSeconds",3,30),n=Y(e,"showIndicator",3,!0),f=Y(e,"class",3,"");const u=yt();let d=be(null),p=be(!1),N=be(null);const O=["public","unlisted","private","direct"];function C(q){return q&&O.includes(q)?q:"public"}function T(){const q={content:u.state.content,contentWarning:u.state.contentWarning,visibility:u.state.visibility,savedAt:Date.now(),inReplyTo:u.state.inReplyTo,mediaIds:u.state.mediaAttachments.map(ie=>ie.id).filter(Boolean),metadata:{sensitive:u.state.contentWarningEnabled}},U=Hn(q,r());return U&&(L(d,Date.now(),!0),L(p,!0)),U}function D(){const q=Et(r());return q?(u.updateState({content:q.content||"",contentWarning:q.contentWarning||"",visibility:C(q.visibility),inReplyTo:q.inReplyTo,contentWarningEnabled:q.metadata?.sensitive??!1}),!0):!1}function b(){Xt(r()),L(p,!1),L(d,null)}$e(()=>{if(!o())return;const q=setInterval(()=>{u.state.content.trim().length>0&&T()},c()*1e3);return()=>clearInterval(q)}),$e(()=>{if(Fn(r())){L(p,!0);const q=Vn(r());q&&L(N,q,!0)}}),$e(()=>{if(!t(p)||!t(d))return;const q=setInterval(()=>{L(N,Date.now()-t(d))},1e3);return()=>clearInterval(q)}),$e(()=>{u.state.submitting&&b()});var F=De(),X=Ce(F);{var ae=q=>{var U=Wn(),ie=l(U);{var ce=H=>{var $=Pn(),se=m(l($));s($),A(I=>te(se,` Load draft from ${I??""}`),[()=>t(N)?Ut(t(N)):"earlier"]),he("click",$,()=>D()),i(H,$)};S(ie,H=>{t(p)&&!u.state.content&&H(ce)})}var j=m(ie,2);{var W=H=>{var $=qn(),se=m(l($),2),I=l(se);s(se),s($),A(Z=>te(I,`Draft saved ${Z??""}`),[()=>Ut(Date.now()-t(d))]),i(H,$)};S(j,H=>{t(d)&&u.state.content&&H(W)})}s(U),A(()=>pe(U,1,`draft-saver ${f()}`)),i(q,U)};S(X,q=>{n()&&q(ae)})}i(a,F),Pe()}J(["click"]);J(["click","input"]);const wt={maxFileSize:8*1024*1024,allowedTypes:["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","audio/mp3","audio/ogg","audio/wav"],maxFiles:4,generateThumbnails:!0,thumbnailSize:200};function kt(a){return a.startsWith("image/")?"image":a.startsWith("video/")?"video":a.startsWith("audio/")?"audio":"unknown"}function Jt(a){const e=a.toLowerCase();return e.startsWith("image/")?e==="image/gif"?"GIFV":"IMAGE":e.startsWith("video/")?"VIDEO":e.startsWith("audio/")?"AUDIO":"DOCUMENT"}function At(a){return a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:a<1024*1024*1024?`${(a/(1024*1024)).toFixed(1)} MB`:`${(a/(1024*1024*1024)).toFixed(1)} GB`}function Yt(a,e={}){const r={...wt,...e},o=[],c=kt(a.type)==="video"?40*1024*1024:r.maxFileSize;return a.size>c&&o.push(`File size ${At(a.size)} exceeds limit of ${At(c)}`),r.allowedTypes.includes(a.type)||o.push(`File type ${a.type} is not allowed`),{valid:o.length===0,errors:o}}function Zt(a,e={}){const r={...wt,...e},o=[];a.length>r.maxFiles&&o.push(`Maximum ${r.maxFiles} files allowed`);for(const c of a){const n=Yt(c,e);o.push(...n.errors)}return{valid:o.length===0,errors:o}}async function jn(a){const e=kt(a.type);return e==="image"||e==="video"?URL.createObjectURL(a):""}async function Kn(a,e=200){return a.type.startsWith("image/")?new Promise(r=>{const o=new Image,c=new FileReader;c.onload=n=>{o.src=n.target?.result},o.onload=()=>{const n=document.createElement("canvas"),f=n.getContext("2d");if(!f){r(null);return}let u=o.width,d=o.height;u>d?u>e&&(d=d*e/u,u=e):d>e&&(u=u*e/d,d=e),n.width=u,n.height=d,f.drawImage(o,0,0,u,d),r(n.toDataURL("image/jpeg",.8))},o.onerror=()=>r(null),c.readAsDataURL(a)}):null}async function Gn(a){return a.type.startsWith("image/")?new Promise(e=>{const r=new Image,o=URL.createObjectURL(a);r.onload=()=>{URL.revokeObjectURL(o),e({width:r.width,height:r.height})},r.onerror=()=>{URL.revokeObjectURL(o),e(null)},r.src=o}):null}async function Qn(a){return a.type.startsWith("video/")?new Promise(e=>{const r=document.createElement("video"),o=URL.createObjectURL(a);r.onloadedmetadata=()=>{URL.revokeObjectURL(o),e(r.duration)},r.onerror=()=>{URL.revokeObjectURL(o),e(null)},r.src=o}):null}async function Xn(a,e={}){const r={...wt,...e},o=kt(a.type),c=Jt(a.type),n=Yt(a,e);if(!n.valid)return{id:crypto.randomUUID(),file:a,type:o,mediaCategory:c,progress:0,status:"error",error:n.errors.join(", "),sensitive:!1,spoilerText:"",metadata:{size:a.size}};const f=await jn(a);let u;r.generateThumbnails&&o==="image"&&(u=await Kn(a,r.thumbnailSize)||void 0);let d={size:a.size};if(o==="image"){const p=await Gn(a);p&&(d={...d,...p})}else if(o==="video"){const p=await Qn(a);p&&(d={...d,duration:p})}return{id:crypto.randomUUID(),file:a,type:o,mediaCategory:c,previewUrl:f,thumbnailUrl:u,progress:0,status:"pending",sensitive:!1,spoilerText:"",metadata:d}}async function Jn(a,e={}){const r={...wt,...e},o=Zt(a,e);if(!o.valid)return a.map(n=>({id:crypto.randomUUID(),file:n,type:kt(n.type),mediaCategory:Jt(n.type),progress:0,status:"error",error:o.errors[0],sensitive:!1,spoilerText:"",metadata:{size:n.size}}));const c=a.slice(0,r.maxFiles);return Promise.all(c.map(n=>Xn(n,e)))}function Yn(a){a.previewUrl&&a.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(a.previewUrl)}function Zn(a){a.forEach(Yn)}var $n=v('<div class="media-upload__error" role="alert"> </div>'),eo=v("<strong>Drop files here</strong>"),to=v("<strong>Click or drag files to upload</strong> <span>Images, videos, or audio</span>",1),ao=v('<div role="button" tabindex="0"><svg class="media-upload__icon" viewBox="0 0 24 24" fill="currentColor"><path d="M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"></path></svg> <div class="media-upload__text"><!></div></div>'),ro=v('<img class="media-upload__preview-image"/>'),no=v('<video class="media-upload__preview-video" loop=""></video>',2),oo=v('<div class="media-upload__preview-audio"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"></path></svg> <span> </span></div>'),io=v('<p class="media-upload__overlay-text"> </p>'),so=v('<div class="media-upload__overlay media-upload__overlay--sensitive"><span class="media-upload__overlay-label">Sensitive media</span> <!> <button type="button" class="media-upload__reveal">Reveal media</button></div>'),lo=v('<div class="media-upload__badge">Sensitive</div>'),co=v('<div class="media-upload__overlay"><div class="media-upload__progress"><svg class="media-upload__progress-ring" viewBox="0 0 36 36"><path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="white" stroke-width="3"></path></svg> <span class="media-upload__progress-text"> </span></div></div>'),uo=v('<div class="media-upload__overlay media-upload__overlay--error"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></svg> <span> </span></div>'),vo=v("<option> </option>"),fo=v('<div class="media-upload__item"><div><!> <!> <!> <!> <button type="button" class="media-upload__remove" aria-label="Remove file">×</button></div> <div class="media-upload__info"><div class="media-upload__filename"> </div> <div class="media-upload__filesize"> </div></div> <div class="media-upload__meta"><label class="media-upload__field media-upload__field--toggle"><input type="checkbox"/> <span>Sensitive content</span></label> <label class="media-upload__field"><span class="media-upload__field-label">Spoiler text <span class="media-upload__counter"> </span></span> <input type="text" placeholder="Optional warning shown before media"/></label> <label class="media-upload__field"><span class="media-upload__field-label">Description <span class="media-upload__counter"> </span></span> <textarea rows="3" placeholder="Describe the media for accessibility"></textarea></label> <label class="media-upload__field"><span class="media-upload__field-label">Media type</span> <select></select></label></div></div>'),ho=v('<button type="button" class="media-upload__add-more"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg> <span>Add more</span></button>'),go=v('<div class="media-upload__grid"><!> <!></div>'),mo=v('<div><input class="media-upload__input" type="file" accept="image/*,video/*,audio/*" multiple=""/> <!> <!></div>');function Ni(a,e){Ve(e,!0);const r=200,o=1500,c=[{value:"IMAGE",label:"Image"},{value:"VIDEO",label:"Video"},{value:"AUDIO",label:"Audio"},{value:"GIFV",label:"Animated GIF"},{value:"DOCUMENT",label:"Document"}];let n=Y(e,"maxFiles",3,4),f=Y(e,"config",19,()=>({})),u=Y(e,"class",3,""),d=be(nt([])),p=be(!1),N=be(null),O,C=be(nt({}));const T=gt();function D(h){return h instanceof Error?h.message:typeof h=="string"?h:"Upload failed"}async function b(h){if(!h||h.length===0)return;L(N,null);const y=Array.from(h);if(t(d).length+y.length>n()){L(N,`Maximum ${n()} files allowed`);return}const R=Zt(y,{...f(),maxFiles:n()});if(!R.valid){L(N,R.errors[0],!0);return}const P=await Jn(y,f()),oe=t(d).length;if(L(d,[...t(d),...P],!0),e.onUpload)for(let ve=0;ve<P.length;ve++)F(t(d)[oe+ve])}async function F(h){if(e.onUpload){h.status="uploading";try{const y=P=>{h.progress=P},R=await e.onUpload(h.file,y,h);R.thumbnailUrl&&(h.thumbnailUrl=R.thumbnailUrl),h.sensitive=R.sensitive??h.sensitive,R.spoilerText!==void 0&&(h.spoilerText=R.spoilerText??""),R.mediaCategory&&(h.mediaCategory=R.mediaCategory),h.serverId=R.id,h.status="complete",h.progress=100}catch(y){h.status="error",h.error=D(y)}}}function X(h){const y=t(d).find(R=>R.id===h);y&&(y.previewUrl&&y.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(y.previewUrl),e.onRemove&&y.serverId&&e.onRemove(y.serverId)),L(d,t(d).filter(R=>R.id!==h),!0)}function ae(h,y){L(d,t(d).map(R=>R.id===h?y(R):R),!0)}function q(h,y){if(ae(h,R=>({...R,sensitive:y})),y)L(C,{...t(C),[h]:!1},!0);else{const R={...t(C)};delete R[h],L(C,R,!0)}}function U(h,y){const R=y.slice(0,r);ae(h,P=>({...P,spoilerText:R}))}function ie(h,y){const R=y.slice(0,o);ae(h,P=>({...P,description:R}))}function ce(h,y){ae(h,R=>({...R,mediaCategory:y}))}function j(h){const y=t(C)[h]===!0;L(C,{...t(C),[h]:!y},!0)}function W(h){switch(h.mediaCategory){case"IMAGE":return"image";case"VIDEO":case"GIFV":return"video";case"AUDIO":return"audio";default:return"file"}}function H(h){h.preventDefault(),L(p,!0)}function $(h){h.preventDefault();const y=h.currentTarget.getBoundingClientRect(),R=h.clientX,P=h.clientY;(R<y.left||R>=y.right||P<y.top||P>=y.bottom)&&L(p,!1)}function se(h){h.preventDefault(),L(p,!1);const y=h.dataTransfer?.files;b(y||null)}function I(h){const y=h.target;b(y.files),y.value=""}function Z(){O?.click()}$e(()=>()=>{Zn(t(d))});const ue=k(()=>t(d).length<n());var g=mo(),V=l(g);st(V,h=>O=h,()=>O);var G=m(V,2);{var z=h=>{var y=$n(),R=l(y,!0);s(y),A(()=>te(R,t(N))),i(h,y)};S(G,h=>{t(N)&&h(z)})}var ne=m(G,2);{var M=h=>{var y=ao();let R;var P=m(l(y),2),oe=l(P);{var ve=ee=>{var ye=eo();i(ee,ye)},w=ee=>{var ye=to();Fe(2),i(ee,ye)};S(oe,ee=>{t(p)?ee(ve):ee(w,!1)})}s(P),s(y),A(()=>R=pe(y,1,"media-upload__drop-zone",null,R,{"media-upload__drop-zone--dragging":t(p)})),tt("dragover",y,H),tt("dragleave",y,$),tt("drop",y,se),he("click",y,Z),he("keydown",y,ee=>ee.key==="Enter"&&Z()),i(h,y)},Q=h=>{var y=go(),R=l(y);Qe(R,17,()=>t(d),ve=>ve.id,(ve,w)=>{const ee=k(()=>W(t(w)));var ye=fo(),xe=l(ye);let ge;var Ue=l(xe);{var Me=me=>{var Ae=ro();A(()=>{K(Ae,"src",t(w).previewUrl),K(Ae,"alt",t(w).description||t(w).file.name)}),i(me,Ae)},fe=me=>{var Ae=no();Ae.muted=!0,A(()=>K(Ae,"src",t(w).previewUrl)),i(me,Ae)},de=me=>{var Ae=oo(),qe=m(l(Ae),2),Ye=l(qe,!0);s(qe),s(Ae),A(()=>te(Ye,t(w).file.name)),i(me,Ae)};S(Ue,me=>{t(ee)==="image"&&t(w).previewUrl?me(Me):t(ee)==="video"&&t(w).previewUrl?me(fe,1):t(ee)==="audio"&&me(de,2)})}var _=m(Ue,2);{var x=me=>{var Ae=De(),qe=Ce(Ae);{var Ye=et=>{var it=so(),mt=m(l(it),2);{var $t=xt=>{var St=io(),ta=l(St,!0);s(St),A(()=>te(ta,t(w).spoilerText)),i(xt,St)};S(mt,xt=>{t(w).spoilerText&&xt($t)})}var ea=m(mt,2);s(it),he("click",ea,()=>j(t(w).id)),i(et,it)},ct=et=>{var it=lo();i(et,it)};S(qe,et=>{t(C)[t(w).id]!==!0?et(Ye):et(ct,!1)})}i(me,Ae)};S(_,me=>{t(w).sensitive&&t(w).status!=="uploading"&&t(w).status!=="error"&&me(x)})}var le=m(_,2);{var _e=me=>{var Ae=co(),qe=l(Ae),Ye=l(qe),ct=l(Ye);s(Ye);var et=m(Ye,2),it=l(et);s(et),s(qe),s(Ae),A(mt=>{K(ct,"stroke-dasharray",`${t(w).progress}, 100`),te(it,`${mt??""}%`)},[()=>Math.round(t(w).progress)]),i(me,Ae)};S(le,me=>{t(w).status==="uploading"&&me(_e)})}var He=m(le,2);{var E=me=>{var Ae=uo(),qe=m(l(Ae),2),Ye=l(qe,!0);s(qe),s(Ae),A(()=>te(Ye,t(w).error)),i(me,Ae)};S(He,me=>{t(w).status==="error"&&me(E)})}var B=m(He,2);s(xe);var re=m(xe,2),Se=l(re),Re=l(Se,!0);s(Se);var ke=m(Se,2),we=l(ke,!0);s(ke),s(re);var ze=m(re,2),Te=l(ze),Le=l(Te);ut(Le),Fe(2),s(Te);var Ne=m(Te,2),Ee=l(Ne),Ie=m(l(Ee)),je=l(Ie);s(Ie),s(Ee);var Ge=m(Ee,2);ut(Ge),K(Ge,"maxlength",r),s(Ne);var Be=m(Ne,2),Ke=l(Be),We=m(l(Ke)),Je=l(We);s(We),s(Ke);var Xe=m(Ke,2);Mt(Xe),K(Xe,"maxlength",o),s(Be);var ot=m(Be,2),lt=m(l(ot),2);Qe(lt,21,()=>c,me=>me.value,(me,Ae)=>{var qe=vo(),Ye=l(qe,!0);s(qe);var ct={};A(()=>{ua(qe,t(Ae).value===t(w).mediaCategory),te(Ye,t(Ae).label),ct!==(ct=t(Ae).value)&&(qe.value=(qe.__value=t(Ae).value)??"")}),i(me,qe)}),s(lt),s(ot),s(ze),s(ye),A(me=>{ge=pe(xe,1,"media-upload__preview",null,ge,{"media-upload__preview--blurred":t(w).sensitive&&t(C)[t(w).id]!==!0}),te(Re,t(w).file.name),te(we,me),da(Le,t(w).sensitive),te(je,`${t(w).spoilerText.length??""}/200`),dt(Ge,t(w).spoilerText),te(Je,`${(t(w).description||"").length??""}/1500`),dt(Xe,t(w).description??"")},[()=>At(t(w).metadata?.size||0)]),he("click",B,()=>X(t(w).id)),he("change",Le,me=>q(t(w).id,me.target.checked)),he("input",Ge,me=>U(t(w).id,me.target.value)),he("input",Xe,me=>ie(t(w).id,me.target.value)),he("change",lt,me=>ce(t(w).id,me.target.value)),i(ve,ye)});var P=m(R,2);{var oe=ve=>{var w=ho();at(w,ee=>T.actions.button?.(ee)),he("click",w,Z),i(ve,w)};S(P,ve=>{t(ue)&&ve(oe)})}s(y),i(h,y)};S(ne,h=>{t(d).length===0?h(M):h(Q,!1)})}s(g),A(()=>pe(g,1,`media-upload ${u()}`)),he("change",V,I),i(a,g),Pe()}J(["change","click","keydown","input"]);J(["mousedown","click","input"]);J(["change","click","input"]);J(["click"]);J(["click"]);J(["click","change"]);J(["change","keydown","click"]);J(["click"]);J(["keydown","click"]);J(["click"]);J(["click"]);J(["click"]);J(["input","keydown","change"]);var _o=v('<img alt="" class="gr-profile-header__banner-image"/>'),po=v('<div class="gr-profile-header__banner" role="img"><!></div>'),bo=v('<div class="gr-profile-header__verified-badge" role="img" aria-label="Verified account" title="Verified account"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></svg></div>'),yo=v('<div class="gr-profile-header__bot-badge" role="img" aria-label="Bot account" title="Bot account"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></svg> <span class="sr-only">Bot</span></div>'),wo=v('<div class="gr-profile-header__actions"><!></div>'),ko=Oe('<svg class="gr-profile-header__lock-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-label="Private account" role="img"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></svg>'),xo=v('<div class="gr-profile-header__bio"><!></div>'),So=Oe('<svg class="gr-profile-header__field-verified" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" aria-label="Verified link" role="img"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></svg>'),Co=v('<div class="gr-profile-header__field"><dt class="gr-profile-header__field-name"><span class="gr-profile-header__field-name-content"></span></dt> <dd class="gr-profile-header__field-value"><span class="gr-profile-header__field-value-content"></span> <!></dd></div>'),zo=v('<dl class="gr-profile-header__fields"></dl>'),Ao=v('<div class="gr-profile-header__join-date"><svg class="gr-profile-header__calendar-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></svg> <span> </span></div>'),To=v('<div class="gr-profile-header__counts"><button><span class="gr-profile-header__count-number"> </span> <span class="gr-profile-header__count-label">Posts</span></button> <button><span class="gr-profile-header__count-number"> </span> <span class="gr-profile-header__count-label">Following</span></button> <button><span class="gr-profile-header__count-number"> </span> <span class="gr-profile-header__count-label">Followers</span></button></div>'),Do=v('<article><!> <div class="gr-profile-header__content"><div class="gr-profile-header__top"><div class="gr-profile-header__avatar-wrapper"><!> <!> <!></div> <!></div> <div class="gr-profile-header__identity"><h1 class="gr-profile-header__display-name"><span class="gr-profile-header__display-name-text"></span> <!></h1> <p class="gr-profile-header__handle"> </p></div> <!> <!> <div class="gr-profile-header__stats"><!> <!></div></div></article>');function Ri(a,e){Ve(e,!0);let r=Y(e,"showBanner",3,!0),o=Y(e,"avatarSize",3,"xl"),c=Y(e,"showBio",3,!0),n=Y(e,"showFields",3,!0),f=Y(e,"showJoinDate",3,!0),u=Y(e,"showCounts",3,!0),d=Y(e,"clickableCounts",3,!1),p=Y(e,"class",3,""),N=be(!1),O=be(!1),C=be(null);const T=k(()=>["gr-profile-header",p()].filter(Boolean).join(" ")),D=k(()=>e.emojiRenderer?e.emojiRenderer(e.account.displayName||e.account.username):e.account.displayName||e.account.username),b=k(()=>_t(t(D)||e.account.username||"Profile",{allowedTags:["span","em","strong","b","i","u","img"],allowedAttributes:["class","alt","src","title","aria-label","role","draggable","loading","width","height"]}));function F(E,B){return E.innerHTML=B,{update(re){E.innerHTML=re}}}function X(E){return E<1e3?E.toString():E<1e4?`${(E/1e3).toFixed(1)}K`:E<1e6?`${Math.floor(E/1e3)}K`:E<1e7?`${(E/1e6).toFixed(1)}M`:`${Math.floor(E/1e6)}M`}const ae=k(()=>{if(!e.account.createdAt)return"";try{return new Date(e.account.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})}catch{return""}});function q(){L(N,!0),L(O,!1)}function U(){L(N,!1),L(O,!0)}$e(()=>{e.account.header&&(L(N,!1),L(O,!1))});function ie(E){d()&&e.onFollowersClick&&(E.preventDefault(),e.onFollowersClick())}function ce(E){d()&&e.onFollowingClick&&(E.preventDefault(),e.onFollowingClick())}function j(E){d()&&e.onPostsClick&&(E.preventDefault(),e.onPostsClick())}const W=Ot("profile-header"),H=k(()=>W.value||void 0),$=k(()=>t(H)?`${t(H)}-banner`:void 0),se=k(()=>t(H)?`${t(H)}-bio`:void 0),I=k(()=>t(H)?`${t(H)}-fields`:void 0);var Z=Do(),ue=l(Z);{var g=E=>{var B=po(),re=l(B);{var Se=Re=>{var ke=_o();st(ke,we=>L(C,we),()=>t(C)),A(()=>{K(ke,"src",e.account.header),K(ke,"hidden",!t(N))}),tt("load",ke,q),tt("error",ke,U),aa(ke),i(Re,ke)};S(re,Re=>{e.account.header&&!t(O)&&Re(Se)})}s(B),A(()=>{K(B,"id",t($)),K(B,"aria-label",e.account.header?"Profile banner":"Profile banner (default color)")}),i(E,B)};S(ue,E=>{r()&&E(g)})}var V=m(ue,2),G=l(V),z=l(G),ne=l(z);{let E=k(()=>`${e.account.displayName||e.account.username} avatar`),B=k(()=>e.account.displayName||e.account.username);ha(ne,{get src(){return e.account.avatar},get alt(){return t(E)},get name(){return t(B)},get size(){return o()},class:"gr-profile-header__avatar"})}var M=m(ne,2);{var Q=E=>{var B=bo();i(E,B)};S(M,E=>{e.account.verified&&E(Q)})}var h=m(M,2);{var y=E=>{var B=yo();i(E,B)};S(h,E=>{e.account.bot&&E(y)})}s(z);var R=m(z,2);{var P=E=>{var B=wo(),re=l(B);Ze(re,()=>e.followButton),s(B),i(E,B)};S(R,E=>{e.followButton&&E(P)})}s(G);var oe=m(G,2),ve=l(oe),w=l(ve);at(w,(E,B)=>F?.(E,B),()=>t(b));var ee=m(w,2);{var ye=E=>{var B=ko();i(E,B)};S(ee,E=>{e.account.locked&&E(ye)})}s(ve);var xe=m(ve,2),ge=l(xe);s(xe),s(oe);var Ue=m(oe,2);{var Me=E=>{var B=xo(),re=l(B);qt(re,{get content(){return e.account.note},mentions:[],tags:[],class:"gr-profile-header__bio-content"}),s(B),A(()=>K(B,"id",t(se))),i(E,B)};S(Ue,E=>{c()&&e.account.note&&E(Me)})}var fe=m(Ue,2);{var de=E=>{var B=zo();Qe(B,21,()=>e.account.fields,re=>re.name,(re,Se)=>{var Re=Co(),ke=l(Re),we=l(ke);at(we,(Ee,Ie)=>F?.(Ee,Ie),()=>_t(t(Se).name,{allowedTags:["span","em","strong"],allowedAttributes:["class"]})),s(ke);var ze=m(ke,2),Te=l(ze);at(Te,(Ee,Ie)=>F?.(Ee,Ie),()=>_t(t(Se).value,{allowedTags:["a","span","em","strong"],allowedAttributes:["href","class","rel","target"]}));var Le=m(Te,2);{var Ne=Ee=>{var Ie=So();A(je=>K(Ie,"title",je),[()=>`Verified on ${new Date(t(Se).verifiedAt).toLocaleDateString()}`]),i(Ee,Ie)};S(Le,Ee=>{t(Se).verifiedAt&&Ee(Ne)})}s(ze),s(Re),i(re,Re)}),s(B),A(()=>K(B,"id",t(I))),i(E,B)};S(fe,E=>{n()&&e.account.fields&&e.account.fields.length>0&&E(de)})}var _=m(fe,2),x=l(_);{var le=E=>{var B=Ao(),re=m(l(B),2),Se=l(re);s(re),s(B),A(()=>te(Se,`Joined ${t(ae)??""}`)),i(E,B)};S(x,E=>{f()&&t(ae)&&E(le)})}var _e=m(x,2);{var He=E=>{var B=To(),re=l(B);let Se;var Re=l(re),ke=l(Re,!0);s(Re),Fe(2),s(re);var we=m(re,2);let ze;var Te=l(we),Le=l(Te,!0);s(Te),Fe(2),s(we);var Ne=m(we,2);let Ee;var Ie=l(Ne),je=l(Ie,!0);s(Ie),Fe(2),s(Ne),s(B),A((Ge,Be,Ke,We,Je,Xe)=>{Se=pe(re,1,"gr-profile-header__count",null,Se,{clickable:d()&&e.onPostsClick}),re.disabled=!d()||!e.onPostsClick,K(re,"aria-label",Ge),te(ke,Be),ze=pe(we,1,"gr-profile-header__count",null,ze,{clickable:d()&&e.onFollowingClick}),we.disabled=!d()||!e.onFollowingClick,K(we,"aria-label",Ke),te(Le,We),Ee=pe(Ne,1,"gr-profile-header__count",null,Ee,{clickable:d()&&e.onFollowersClick}),Ne.disabled=!d()||!e.onFollowersClick,K(Ne,"aria-label",Je),te(je,Xe)},[()=>`${X(e.account.statusesCount)} posts`,()=>X(e.account.statusesCount),()=>`${X(e.account.followingCount)} following`,()=>X(e.account.followingCount),()=>`${X(e.account.followersCount)} followers`,()=>X(e.account.followersCount)]),he("click",re,j),he("click",we,ce),he("click",Ne,ie),i(E,B)};S(_e,E=>{u()&&E(He)})}s(_),s(V),s(Z),A(()=>{pe(Z,1,Lt(t(T))),K(ve,"aria-label",t(D)||e.account.username||"Profile"),te(ge,`@${e.account.acct??""}`)}),i(a,Z),Pe()}J(["click"]);J(["click","keydown"]);var Mo=v('<div class="unread-indicator" aria-hidden="true"></div>'),Lo=Oe('<circle cx="12" cy="12" r="4"></circle><path d="m12 2a15.3 15.3 0 0 1 4 10"></path><path d="M2 12a15.3 15.3 0 0 1 4-10"></path><circle cx="12" cy="12" r="10"></circle>',1),No=Oe('<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11v-1a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v1a4 4 0 0 1-4 4H3"></path>',1),Ro=Oe('<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>'),Eo=Oe('<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',1),Io=Oe('<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><circle cx="18.5" cy="10.5" r="2.5"></circle><path d="m19.5 8.5-.5 2h2"></path>',1),Uo=Oe('<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',1),Bo=Oe('<path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"></path>'),Oo=Oe('<path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>'),Ho=Oe('<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17,11 19,13 23,9"></polyline>',1),Fo=Oe('<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',1),Vo=Oe('<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="m13.73 21a2 2 0 0 1-3.46 0"></path>',1),Po=v('<img class="avatar" loading="lazy"/>'),qo=v('<div class="avatar-overflow"> </div>'),Wo=v('<div class="status-preview"><p> </p></div>'),jo=v('<div class="group-summary"> </div>'),Ko=v('<button class="action-button mark-read" title="Mark as read (M)" aria-label="Mark notification as read"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="20,6 9,17 4,12"></polyline></svg></button>'),Go=v('<button class="action-button dismiss" title="Dismiss (X)" aria-label="Dismiss notification"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>'),Qo=v('<div class="notification-actions"><!> <!></div>'),Xo=v('<article><!> <div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><!></svg></div> <div class="avatars"><!> <!></div> <div class="notification-content"><div class="notification-header"><h3 class="notification-title"> </h3> <time class="notification-time"> </time></div> <!> <!></div> <!></article>');function Jo(a,e){Ve(e,!0);let r=Y(e,"density",3,"comfortable"),o=Y(e,"showActions",3,!0);const c=k(()=>e.group!==void 0),n=k(()=>!e.notification.read),f=k(()=>an(e.notification)),u=k(()=>$r(e.notification.type)),d=k(()=>en(e.notification.type)),p=k(()=>tn(e.notification.createdAt)),N=k(()=>{const _=new Date(e.notification.createdAt);return Number.isNaN(_.getTime())?null:_}),O=k(()=>{if(e.group)return Zr(e.group);switch(e.notification.type){case"mention":return`${e.notification.account.displayName} mentioned you`;case"reblog":return`${e.notification.account.displayName} boosted your post`;case"favourite":return`${e.notification.account.displayName} favorited your post`;case"follow":return`${e.notification.account.displayName} followed you`;case"follow_request":return`${e.notification.account.displayName} requested to follow you`;case"poll":return`${e.notification.account.displayName} voted in your poll`;case"status":return`${e.notification.account.displayName} posted`;case"update":return`${e.notification.account.displayName} edited a post`;case"admin.sign_up":return"New user registration";case"admin.report":return"New report submitted";default:return"Notification"}}),C=k(()=>(e.group?e.group.accounts:[e.notification.account]).filter(x=>!!x?.id).slice(0,4));function T(_){return"status"in _&&_.status?_.status:_.type==="quote"&&_.quoteStatus?_.quoteStatus:_.type==="admin.report"&&_.report?.status?_.report.status:null}const D=k(()=>T(e.notification)),b=k(()=>{const _=t(D);if(!_?.content)return"";const x=_.content.replace(/<[^>]*>/g,"");return x.length>100?`${x.slice(0,100)}...`:x});function F(){e.onClick?.(e.notification)}function X(_){_.key==="Enter"||_.key===" "?(_.preventDefault(),F()):_.key==="m"||_.key==="M"?(_.preventDefault(),e.onMarkAsRead?.(e.notification.id)):(_.key==="x"||_.key==="X")&&(_.preventDefault(),e.onDismiss?.(e.notification.id))}function ae(_){_.stopPropagation(),e.onMarkAsRead?.(e.notification.id)}function q(_){_.stopPropagation(),e.onDismiss?.(e.notification.id)}var U=Xo();va(U,()=>({class:`notification-item ${r()}`,onclick:e.onClick?F:void 0,onkeydown:e.onClick?X:void 0,...e.onClick?{role:"button",tabindex:0}:{},"aria-label":e.onClick?`${t(O)}. ${t(n)?"Unread. ":""}Press Enter to open, M to mark as read, X to dismiss`:t(O),"aria-describedby":`notification-time-${e.notification.id}`,[fa]:{unread:t(n),highlighted:t(f),grouped:t(c),clickable:e.onClick}}));var ie=l(U);{var ce=_=>{var x=Mo();i(_,x)};S(ie,_=>{t(n)&&_(ce)})}var j=m(ie,2),W=l(j),H=l(W);{var $=_=>{var x=Lo();Fe(3),i(_,x)},se=_=>{var x=No();Fe(3),i(_,x)},I=_=>{var x=Ro();i(_,x)},Z=_=>{var x=Eo();Fe(3),i(_,x)},ue=_=>{var x=Io();Fe(3),i(_,x)},g=_=>{var x=Uo();Fe(2),i(_,x)},V=_=>{var x=Bo();i(_,x)},G=_=>{var x=Oo();i(_,x)},z=_=>{var x=Ho();Fe(2),i(_,x)},ne=_=>{var x=Fo();Fe(),i(_,x)},M=_=>{var x=Vo();Fe(),i(_,x)};S(H,_=>{t(u)==="at-sign"?_($):t(u)==="repeat"?_(se,1):t(u)==="heart"?_(I,2):t(u)==="user-plus"?_(Z,3):t(u)==="user-clock"?_(ue,4):t(u)==="bar-chart"?_(g,5):t(u)==="message-circle"?_(V,6):t(u)==="edit"?_(G,7):t(u)==="user-check"?_(z,8):t(u)==="flag"?_(ne,9):_(M,!1)})}s(W),s(j);var Q=m(j,2),h=l(Q);Qe(h,17,()=>t(C),_=>_.id,(_,x)=>{var le=Po();A(()=>{K(le,"src",t(x).avatar),K(le,"alt",`${t(x).displayName} (@${t(x).acct})`)}),i(_,le)});var y=m(h,2);{var R=_=>{var x=qo(),le=l(x);s(x),A(()=>te(le,`+${e.group.count-4}`)),i(_,x)};S(y,_=>{e.group&&e.group.count>4&&_(R)})}s(Q);var P=m(Q,2),oe=l(P),ve=l(oe),w=l(ve,!0);s(ve);var ee=m(ve,2),ye=l(ee,!0);s(ee),s(oe);var xe=m(oe,2);{var ge=_=>{var x=Wo(),le=l(x),_e=l(le,!0);s(le),s(x),A(()=>te(_e,t(b))),i(_,x)};S(xe,_=>{t(b)&&_(ge)})}var Ue=m(xe,2);{var Me=_=>{var x=jo(),le=l(x);s(x),A(()=>te(le,`${e.group.count??""} notifications`)),i(_,x)};S(Ue,_=>{e.group&&e.group.count>1&&_(Me)})}s(P);var fe=m(P,2);{var de=_=>{var x=Qo(),le=l(x);{var _e=B=>{var re=Ko();he("click",re,ae),i(B,re)};S(le,B=>{t(n)&&e.onMarkAsRead&&B(_e)})}var He=m(le,2);{var E=B=>{var re=Go();he("click",re,q),i(B,re)};S(He,B=>{e.onDismiss&&B(E)})}s(x),i(_,x)};S(fe,_=>{o()&&_(de)})}s(U),A((_,x)=>{pe(j,1,`notification-icon notification-icon--${t(d)}`),te(w,t(O)),K(ee,"id",`notification-time-${e.notification.id}`),K(ee,"datetime",_),K(ee,"title",x),te(ye,t(p))},[()=>t(N)?.toISOString(),()=>t(N)?.toLocaleString()]),i(a,U),Pe()}J(["click"]);function ht(a){return!a||typeof a!="object"?!1:"notifications"in a&&Array.isArray(a.notifications)}function Yo(a){return ht(a),a.id}var Zo=v('<button class="mark-all-read" aria-label="Mark all notifications as read">Mark all as read</button>'),$o=v('<div class="feed-header"><div class="unread-indicator"><span class="unread-count"> </span></div> <!></div>'),ei=v('<div class="loading-spinner" aria-label="Loading notifications"></div> <p>Loading notifications...</p>',1),ti=v('<div class="loading-container" aria-live="polite"><!></div>'),ai=v('<div class="empty-icon">🔔</div> <h2>No notifications</h2> <p> </p>',1),ri=v('<div class="empty-state" role="status" aria-live="polite"><!></div>'),ni=v('<div class="load-more-indicator" aria-live="polite"><div class="loading-spinner" aria-label="Loading more notifications"></div> <p>Loading more...</p></div>'),oi=v('<div class="notifications-scroll" role="feed" aria-label="Notifications"><!> <!></div>'),ii=v('<div role="main" aria-label="Notifications feed"><!> <!></div>');function Ei(a,e){Ve(e,!0);let r=Y(e,"notifications",19,()=>[]),o=Y(e,"groups",19,()=>[]),c=Y(e,"grouped",3,!0),n=Y(e,"loading",3,!1),f=Y(e,"loadingMore",3,!1),u=Y(e,"hasMore",3,!1),d=Y(e,"emptyStateMessage",3,"No notifications yet"),p=Y(e,"density",3,"comfortable"),N=Y(e,"className",3,""),O=be(void 0),C=0,T=0;const D=k(()=>n()&&r().length===0?[]:c()&&o().length>0?o():c()?Jr(r()):r());function b(){if(!t(O)||!e.onLoadMore||!u()||f())return;const{scrollTop:I,scrollHeight:Z,clientHeight:ue}=t(O),g=I>C?"down":"up";C=I,g==="down"&&Z-I-ue<500&&e.onLoadMore()}$e(()=>{if(!t(O))return;const I=t(D).length;if(I>T&&T>0){const Z=t(O).scrollHeight,ue=t(O);requestAnimationFrame(()=>{if(!ue)return;const V=ue.scrollHeight-Z;V>0&&ue.scrollTop<1e3&&(ue.scrollTop+=V)})}T=I});function F(I){e.onNotificationClick?.(I),I.read||e.onMarkAsRead?.(I.id)}function X(I){e.onMarkAsRead?.(I)}function ae(I){e.onDismiss?.(I)}function q(){e.onMarkAllAsRead?.()}const U=k(()=>r().filter(I=>!I.read).length);var ie=ii(),ce=l(ie);{var j=I=>{var Z=$o(),ue=l(Z),g=l(ue),V=l(g);s(g),s(ue);var G=m(ue,2);{var z=ne=>{var M=Zo();he("click",M,q),i(ne,M)};S(G,ne=>{e.onMarkAllAsRead&&ne(z)})}s(Z),A(()=>{K(g,"aria-label",`${t(U)} unread notifications`),te(V,`${t(U)??""} unread`)}),i(I,Z)};S(ce,I=>{r().length>0&&t(U)>0&&I(j)})}var W=m(ce,2);{var H=I=>{var Z=ti(),ue=l(Z);{var g=G=>{var z=De(),ne=Ce(z);Ze(ne,()=>e.loadingState),i(G,z)},V=G=>{var z=ei();Fe(2),i(G,z)};S(ue,G=>{e.loadingState?G(g):G(V,!1)})}s(Z),i(I,Z)},$=I=>{var Z=ri(),ue=l(Z);{var g=G=>{var z=De(),ne=Ce(z);Ze(ne,()=>e.emptyState),i(G,z)},V=G=>{var z=ai(),ne=m(Ce(z),4),M=l(ne,!0);s(ne),A(()=>te(M,d())),i(G,z)};S(ue,G=>{e.emptyState?G(g):G(V,!1)})}s(Z),i(I,Z)},se=I=>{var Z=oi(),ue=l(Z);Qe(ue,17,()=>t(D),G=>Yo(G),(G,z)=>{var ne=De(),M=Ce(ne);{var Q=y=>{var R=De(),P=Ce(R);{let oe=k(()=>({notification:ht(t(z))?t(z).sampleNotification:t(z),group:ht(t(z))?t(z):void 0,isGrouped:c(),onClick:F,onMarkAsRead:X,onDismiss:ae}));Ze(P,()=>e.notificationRenderer,()=>t(oe))}i(y,R)},h=y=>{{let R=k(()=>ht(t(z))?t(z).sampleNotification:t(z)),P=k(()=>ht(t(z))?t(z):void 0);Jo(y,{get notification(){return t(R)},get group(){return t(P)},get density(){return p()},onClick:F,onMarkAsRead:X,onDismiss:ae})}};S(M,y=>{e.notificationRenderer?y(Q):y(h,!1)})}i(G,ne)});var g=m(ue,2);{var V=G=>{var z=ni();i(G,z)};S(g,G=>{f()&&G(V)})}s(Z),st(Z,G=>L(O,G),()=>t(O)),A(()=>K(Z,"aria-busy",f())),tt("scroll",Z,b),i(I,Z)};S(W,I=>{n()&&r().length===0?I(H):t(D).length===0?I($,1):I(se,!1)})}s(ie),A(()=>pe(ie,1,`notifications-feed ${N()} ${p()}`)),i(a,ie),Pe()}J(["click"]);J(["click"]);J(["click","keydown"]);J(["click","keydown"]);J(["click"]);J(["click"]);J(["click"]);J(["click"]);J(["click"]);export{yi as A,Ci as B,qt as C,Li as D,Ti as E,zi as F,Ni as M,Ei as N,wi as P,pi as R,ki as S,Di as V,Ri as a,Si as b,xi as c,Ai as d,yt as e,gt as f,Gt as g,at as h,Mi as i,Pt as j,Ft as k,bi as l};
