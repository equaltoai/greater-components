# BEGIN MODULES LIST

## BEGIN MODULE

### Module: ChatHeader Component Types Update
Update the ChatHeaderProps interface in types.ts to include the new props required for the ChatHeader component.

## Description
Updates the existing ChatHeaderProps interface to include additional props for connection status indicator, clear button functionality, and settings button. The interface will be extended to support:
- Connection status indicator with 'connected', 'connecting', 'disconnected' states
- Clear conversation button with callback
- Settings button with callback
- Show/hide controls for clear and settings buttons

## Type
update

## Dependencies
none

## Files
packages/shared/chat/src/types.ts

## File Changes
- packages/shared/chat/src/types.ts: BEFORE: <<<
/**
 * Chat header component props
 */
export interface ChatHeaderProps {
  /** Title text */
  title?: string;
  /** Subtitle text */
  subtitle?: string;
  /** Whether to show settings button */
  showSettings?: boolean;
  /** Called when settings button is clicked */
  onSettingsClick?: () => void;
  /** Whether to show close button */
  showClose?: boolean;
  /** Called when close button is clicked */
  onClose?: () => void;
  /** Custom actions slot */
  actions?: Snippet;
  /** Custom CSS class */
  class?: string;
}
>>> | AFTER: <<<
/**
 * Chat header component props
 */
export interface ChatHeaderProps {
  /** Title text */
  title?: string;
  /** Subtitle text */
  subtitle?: string;
  /** Connection status indicator */
  connectionStatus?: 'connected' | 'connecting' | 'disconnected';
  /** Whether to show clear conversation button */
  showClearButton?: boolean;
  /** Whether to show settings button */
  showSettingsButton?: boolean;
  /** Called when clear button is clicked */
  onClear?: () => void;
  /** Called when settings button is clicked */
  onSettings?: () => void;
  /** Custom actions slot */
  actions?: Snippet;
  /** Custom CSS class */
  class?: string;
}
>>> | TYPE: content replacement | DESC: Update ChatHeaderProps interface to include connectionStatus, showClearButton, showSettingsButton, onClear, and onSettings props while removing deprecated showClose and onClose props

## Priority
high

## END MODULE

## BEGIN MODULE

### Module: ChatHeader Component Implementation
Create the ChatHeader.svelte component that provides the top bar for the chat interface with title, connection status indicator, and action buttons.

## Description
Implements the ChatHeader component at `packages/shared/chat/src/ChatHeader.svelte` with the following features:
- Title and optional subtitle display using styled text
- Connection status indicator with colored dot (green=connected, yellow/amber with pulse=connecting, red=disconnected)
- Tooltip showing status text on the connection indicator
- Clear conversation button with trash icon (ghost variant)
- Settings button with gear icon (ghost variant)
- Responsive flex layout with space-between alignment
- Sticky top positioning with subtle bottom border
- Dark mode support via CSS custom properties
- Full accessibility with ARIA attributes

## Type
creation

## Dependencies
ChatHeader Component Types Update

## Files
packages/shared/chat/src/ChatHeader.svelte

## File Changes
- packages/shared/chat/src/ChatHeader.svelte: BEFORE: DOES NOT EXIST | AFTER: <<<
<!--
  ChatHeader - Chat Interface Header Component
  
  Provides the top bar for the chat interface with title, connection status,
  and action buttons (clear, settings).
  
  @component
  @example
  ```svelte
  <Chat.Container {handlers}>
    <Chat.Header 
      title="AI Assistant" 
      subtitle="Powered by GPT-4"
      connectionStatus="connected"
      showClearButton={true}
      onClear={() => clearConversation()}
    />
    <Chat.Messages />
    <Chat.Input />
  </Chat.Container>
  ```
-->
<script lang="ts">
  import type { Snippet } from 'svelte';
  import { Button, Tooltip } from '@equaltoai/greater-components-primitives';
  import { Trash2Icon, SettingsIcon } from '@equaltoai/greater-components-icons';

  /**
   * Connection status type for the header indicator
   */
  type HeaderConnectionStatus = 'connected' | 'connecting' | 'disconnected';

  /**
   * Get status text for connection status
   * @param status - Connection status
   * @returns Human-readable status text
   */
  function getStatusText(status: HeaderConnectionStatus): string {
    switch (status) {
      case 'disconnected':
        return 'Disconnected';
      case 'connecting':
        return 'Connecting...';
      case 'connected':
        return 'Connected';
      default:
        return 'Unknown';
    }
  }

  /**
   * ChatHeader component props
   */
  interface Props {
    /**
     * Title text displayed in the header
     * @default "Chat"
     */
    title?: string;

    /**
     * Subtitle text displayed below the title in muted color
     */
    subtitle?: string;

    /**
     * Connection status indicator
     * - `connected`: Green dot
     * - `connecting`: Yellow/amber dot with pulse animation
     * - `disconnected`: Red dot
     */
    connectionStatus?: HeaderConnectionStatus;

    /**
     * Whether to show the clear conversation button
     * @default true
     */
    showClearButton?: boolean;

    /**
     * Whether to show the settings button
     * @default false
     */
    showSettingsButton?: boolean;

    /**
     * Called when clear button is clicked
     */
    onClear?: () => void;

    /**
     * Called when settings button is clicked
     */
    onSettings?: () => void;

    /**
     * Custom actions slot for additional buttons
     */
    actions?: Snippet;

    /**
     * Custom CSS class
     */
    class?: string;
  }

  let {
    title = 'Chat',
    subtitle,
    connectionStatus,
    showClearButton = true,
    showSettingsButton = false,
    onClear,
    onSettings,
    actions,
    class: className = '',
  }: Props = $props();

  /**
   * Handle clear button click
   */
  function handleClear() {
    onClear?.();
  }

  /**
   * Handle settings button click
   */
  function handleSettings() {
    onSettings?.();
  }

  // Compute header classes
  const headerClass = $derived.by(() => {
    const classes = [
      'chat-header',
      connectionStatus && `chat-header--${connectionStatus}`,
      className,
    ]
      .filter(Boolean)
      .join(' ');

    return classes;
  });

  // Get connection status text for tooltip
  const statusText = $derived(
    connectionStatus ? getStatusText(connectionStatus) : ''
  );
</script>

<header class={headerClass} role="banner">
  <div class="chat-header__left">
    <div class="chat-header__title-group">
      <h1 class="chat-header__title">{title}</h1>
      {#if subtitle}
        <p class="chat-header__subtitle">{subtitle}</p>
      {/if}
    </div>
    
    {#if connectionStatus}
      <Tooltip content={statusText} placement="bottom">
        <div 
          class="chat-header__status"
          class:chat-header__status--connected={connectionStatus === 'connected'}
          class:chat-header__status--connecting={connectionStatus === 'connecting'}
          class:chat-header__status--disconnected={connectionStatus === 'disconnected'}
          role="status"
          aria-label={statusText}
        >
          <span class="chat-header__status-dot" aria-hidden="true"></span>
        </div>
      </Tooltip>
    {/if}
  </div>

  <div class="chat-header__right">
    {#if actions}
      {@render actions()}
    {/if}

    {#if showClearButton}
      <Tooltip content="Clear conversation" placement="bottom">
        <Button
          variant="ghost"
          size="sm"
          onclick={handleClear}
          aria-label="Clear conversation"
        >
          {#snippet prefix()}
            <Trash2Icon size={18} />
          {/snippet}
        </Button>
      </Tooltip>
    {/if}

    {#if showSettingsButton}
      <Tooltip content="Settings" placement="bottom">
        <Button
          variant="ghost"
          size="sm"
          onclick={handleSettings}
          aria-label="Open settings"
        >
          {#snippet prefix()}
            <SettingsIcon size={18} />
          {/snippet}
        </Button>
      </Tooltip>
    {/if}
  </div>
</header>

<style>
  /* Base header styles */
  .chat-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--gr-spacing-scale-3, 0.75rem) var(--gr-spacing-scale-4, 1rem);
    background-color: var(--gr-semantic-background-primary, #ffffff);
    border-bottom: 1px solid var(--gr-semantic-border-primary, #e5e7eb);
    position: sticky;
    top: 0;
    z-index: 10;
    flex-shrink: 0;
  }

  /* Left section with title and status */
  .chat-header__left {
    display: flex;
    align-items: center;
    gap: var(--gr-spacing-scale-3, 0.75rem);
    min-width: 0;
    flex: 1;
  }

  /* Title group */
  .chat-header__title-group {
    display: flex;
    flex-direction: column;
    gap: var(--gr-spacing-scale-1, 0.25rem);
    min-width: 0;
  }

  .chat-header__title {
    margin: 0;
    font-family: var(--gr-typography-fontFamily-sans, system-ui, sans-serif);
    font-size: var(--gr-typography-fontSize-lg, 1.125rem);
    font-weight: var(--gr-typography-fontWeight-semibold, 600);
    line-height: 1.25;
    color: var(--gr-semantic-foreground-primary, #111827);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .chat-header__subtitle {
    margin: 0;
    font-family: var(--gr-typography-fontFamily-sans, system-ui, sans-serif);
    font-size: var(--gr-typography-fontSize-sm, 0.875rem);
    line-height: 1.25;
    color: var(--gr-semantic-foreground-secondary, #6b7280);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Connection status indicator */
  .chat-header__status {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--gr-spacing-scale-1, 0.25rem);
    cursor: help;
  }

  .chat-header__status-dot {
    width: 0.5rem;
    height: 0.5rem;
    border-radius: var(--gr-radii-full, 9999px);
    transition: background-color 0.2s ease-in-out;
  }

  /* Connected state - green */
  .chat-header__status--connected .chat-header__status-dot {
    background-color: var(--gr-color-success-500, #22c55e);
  }

  /* Connecting state - yellow/amber with pulse */
  .chat-header__status--connecting .chat-header__status-dot {
    background-color: var(--gr-color-warning-500, #f59e0b);
    animation: status-pulse 1.5s ease-in-out infinite;
  }

  /* Disconnected state - red */
  .chat-header__status--disconnected .chat-header__status-dot {
    background-color: var(--gr-color-error-500, #ef4444);
  }

  /* Right section with action buttons */
  .chat-header__right {
    display: flex;
    align-items: center;
    gap: var(--gr-spacing-scale-1, 0.25rem);
    flex-shrink: 0;
  }

  /* Pulse animation for connecting state */
  @keyframes status-pulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.6;
      transform: scale(0.9);
    }
  }

  /* Dark mode */
  :global([data-theme='dark']) .chat-header {
    background-color: var(--gr-semantic-background-primary, #1f2937);
    border-bottom-color: var(--gr-semantic-border-primary, #374151);
  }

  :global([data-theme='dark']) .chat-header__title {
    color: var(--gr-semantic-foreground-primary, #f9fafb);
  }

  :global([data-theme='dark']) .chat-header__subtitle {
    color: var(--gr-semantic-foreground-secondary, #9ca3af);
  }

  /* Mobile responsive */
  @media (max-width: 640px) {
    .chat-header {
      padding: var(--gr-spacing-scale-2, 0.5rem) var(--gr-spacing-scale-3, 0.75rem);
    }

    .chat-header__title {
      font-size: var(--gr-typography-fontSize-base, 1rem);
    }

    .chat-header__subtitle {
      font-size: var(--gr-typography-fontSize-xs, 0.75rem);
    }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .chat-header__status--connecting .chat-header__status-dot {
      animation: none;
    }
  }
</style>
>>> | TYPE: content creation | DESC: Create ChatHeader.svelte component with title, subtitle, connection status indicator, and action buttons

## Priority
high

## END MODULE

## BEGIN MODULE

### Module: ChatHeader Export Update
Update the chat package index.ts to export the ChatHeader component as Header.

## Description
Updates the packages/shared/chat/src/index.ts file to export the ChatHeader component. The component will be exported as `Header` to follow the existing naming convention (e.g., Container, Message, Messages, Input).

## Type
update

## Dependencies
ChatHeader Component Implementation

## Files
packages/shared/chat/src/index.ts

## File Changes
- packages/shared/chat/src/index.ts: BEFORE: <<<
// Tool call display component
export { default as ToolCall } from './ChatToolCall.svelte';

// Suggestions component for quick prompts
export { default as Suggestions } from './ChatSuggestions.svelte';
>>> | AFTER: <<<
// Tool call display component
export { default as ToolCall } from './ChatToolCall.svelte';

// Chat header component
export { default as Header } from './ChatHeader.svelte';

// Suggestions component for quick prompts
export { default as Suggestions } from './ChatSuggestions.svelte';
>>> | TYPE: line edit | DESC: Add export for ChatHeader component as Header between ToolCall and Suggestions exports

## Priority
high

## END MODULE

# END MODULES LIST