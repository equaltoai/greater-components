# BEGIN MODULES LIST

## BEGIN MODULE

### Module: ChatSuggestions Component Implementation
Implement the ChatSuggestions Svelte component that displays clickable prompt suggestions in pills or cards variants.

## Description
This module creates the `ChatSuggestions.svelte` component at `packages/shared/chat/src/ChatSuggestions.svelte`. The component displays quick prompt suggestions that users can click to populate the chat input. It supports two visual variants:
- **Pills variant (default)**: Horizontal row of pill-shaped buttons that wrap on smaller screens, with horizontal scroll on mobile
- **Cards variant**: Larger cards in a grid layout (2 columns desktop, 1 column mobile) with optional description text

The component uses Svelte 5 `$props()` runes pattern, follows the existing chat component architecture, uses design tokens for styling, and supports full keyboard navigation and accessibility.

## Type
creation

## Dependencies
none

## Files
packages/shared/chat/src/ChatSuggestions.svelte

## File Changes
- packages/shared/chat/src/ChatSuggestions.svelte: BEFORE: DOES NOT EXIST | AFTER: <<<
<!--
  ChatSuggestions - Quick Prompt Suggestions Component
  
  Displays clickable prompt suggestions in empty state or after responses.
  Supports pills (default) and cards variants with full keyboard navigation.
  
  @component
  @example
  ```svelte
  <Chat.Container {handlers}>
    <Chat.Messages />
    <Chat.Suggestions
      suggestions={["What is PAI?", "How do I create a scope?"]}
      onSelect={(suggestion) => handleSelect(suggestion)}
    />
    <Chat.Input />
  </Chat.Container>
  ```
-->
<script lang="ts">
  /**
   * Suggestion item with optional description for cards variant
   */
  interface SuggestionItem {
    /** Display text */
    text: string;
    /** Optional description (only shown in cards variant) */
    description?: string;
  }

  /**
   * ChatSuggestions component props
   */
  interface Props {
    /**
     * Array of suggestion texts or objects with text and description
     */
    suggestions: (string | SuggestionItem)[];

    /**
     * Callback when a suggestion is clicked
     */
    onSelect: (suggestion: string) => void;

    /**
     * Visual variant
     * - `pills`: Horizontal row of pill-shaped buttons (default)
     * - `cards`: Larger cards in grid layout
     * @default 'pills'
     */
    variant?: 'pills' | 'cards';

    /**
     * Custom CSS class
     */
    class?: string;
  }

  let {
    suggestions,
    onSelect,
    variant = 'pills',
    class: className = '',
  }: Props = $props();

  /**
   * Normalize suggestion to object format
   */
  function normalizeSuggestion(suggestion: string | SuggestionItem): SuggestionItem {
    if (typeof suggestion === 'string') {
      return { text: suggestion };
    }
    return suggestion;
  }

  /**
   * Handle suggestion click
   */
  function handleClick(suggestion: SuggestionItem) {
    onSelect(suggestion.text);
  }

  /**
   * Handle keyboard navigation
   */
  function handleKeyDown(event: KeyboardEvent, suggestion: SuggestionItem) {
    if (event.key === 'Enter' || event.key === ' ') {
      event.preventDefault();
      onSelect(suggestion.text);
    }
  }

  // Compute container classes
  const containerClass = $derived.by(() => {
    const classes = [
      'chat-suggestions',
      `chat-suggestions--${variant}`,
      className,
    ]
      .filter(Boolean)
      .join(' ');

    return classes;
  });
</script>

<div
  class={containerClass}
  role="group"
  aria-label="Suggested prompts"
>
  {#each suggestions as suggestion, index}
    {@const item = normalizeSuggestion(suggestion)}
    <button
      type="button"
      class="chat-suggestions__item"
      onclick={() => handleClick(item)}
      onkeydown={(e) => handleKeyDown(e, item)}
      tabindex={0}
      aria-label={`Suggestion: ${item.text}`}
    >
      <span class="chat-suggestions__text">{item.text}</span>
      {#if variant === 'cards' && item.description}
        <span class="chat-suggestions__description">{item.description}</span>
      {/if}
    </button>
  {/each}
</div>

<style>
  /* Base container styles */
  .chat-suggestions {
    display: flex;
    gap: var(--gr-spacing-scale-2, 0.5rem);
    padding: var(--gr-spacing-scale-3, 0.75rem) var(--gr-spacing-scale-4, 1rem);
  }

  /* Pills variant - horizontal row with wrapping */
  .chat-suggestions--pills {
    flex-wrap: wrap;
    justify-content: flex-start;
  }

  /* Pills variant mobile - horizontal scroll */
  @media (max-width: 640px) {
    .chat-suggestions--pills {
      flex-wrap: nowrap;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE/Edge */
      padding-bottom: var(--gr-spacing-scale-2, 0.5rem);
    }

    .chat-suggestions--pills::-webkit-scrollbar {
      display: none; /* Chrome/Safari */
    }
  }

  /* Cards variant - grid layout */
  .chat-suggestions--cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--gr-spacing-scale-3, 0.75rem);
  }

  @media (max-width: 640px) {
    .chat-suggestions--cards {
      grid-template-columns: 1fr;
    }
  }

  /* Base item styles */
  .chat-suggestions__item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    border: none;
    cursor: pointer;
    font-family: var(--gr-typography-fontFamily-sans, system-ui, sans-serif);
    font-size: var(--gr-typography-fontSize-sm, 0.875rem);
    line-height: 1.5;
    text-align: left;
    transition: all 0.15s ease-in-out;
    background-color: var(--gr-semantic-background-secondary, #f3f4f6);
    color: var(--gr-semantic-foreground-primary, #111827);
  }

  .chat-suggestions__item:focus {
    outline: 2px solid var(--gr-color-primary-500, #3b82f6);
    outline-offset: 2px;
  }

  .chat-suggestions__item:focus-visible {
    outline: 2px solid var(--gr-color-primary-500, #3b82f6);
    outline-offset: 2px;
  }

  /* Pills variant item styles */
  .chat-suggestions--pills .chat-suggestions__item {
    flex-direction: row;
    padding: var(--gr-spacing-scale-2, 0.5rem) var(--gr-spacing-scale-3, 0.75rem);
    border-radius: var(--gr-radii-full, 9999px);
    white-space: nowrap;
    flex-shrink: 0;
  }

  .chat-suggestions--pills .chat-suggestions__item:hover {
    background-color: var(--gr-color-primary-50, #eff6ff);
    color: var(--gr-color-primary-700, #1d4ed8);
  }

  .chat-suggestions--pills .chat-suggestions__item:active {
    background-color: var(--gr-color-primary-100, #dbeafe);
    transform: scale(0.98);
  }

  /* Cards variant item styles */
  .chat-suggestions--cards .chat-suggestions__item {
    padding: var(--gr-spacing-scale-4, 1rem);
    border-radius: var(--gr-radii-lg, 0.5rem);
    border: 1px solid var(--gr-color-gray-200, #e5e7eb);
    gap: var(--gr-spacing-scale-1, 0.25rem);
  }

  .chat-suggestions--cards .chat-suggestions__item:hover {
    background-color: var(--gr-color-primary-50, #eff6ff);
    border-color: var(--gr-color-primary-300, #93c5fd);
    box-shadow: var(--gr-shadows-sm, 0 1px 2px 0 rgb(0 0 0 / 0.05));
    transform: translateY(-1px);
  }

  .chat-suggestions--cards .chat-suggestions__item:active {
    background-color: var(--gr-color-primary-100, #dbeafe);
    transform: translateY(0);
  }

  /* Text styles */
  .chat-suggestions__text {
    font-weight: 500;
  }

  .chat-suggestions__description {
    font-size: var(--gr-typography-fontSize-xs, 0.75rem);
    color: var(--gr-color-gray-500, #6b7280);
    font-weight: 400;
  }

  /* Dark mode support */
  :global([data-theme='dark']) .chat-suggestions__item {
    background-color: var(--gr-color-gray-800, #1f2937);
    color: var(--gr-color-gray-100, #f3f4f6);
  }

  :global([data-theme='dark']) .chat-suggestions--pills .chat-suggestions__item:hover {
    background-color: var(--gr-color-primary-900, #1e3a8a);
    color: var(--gr-color-primary-100, #dbeafe);
  }

  :global([data-theme='dark']) .chat-suggestions--cards .chat-suggestions__item {
    border-color: var(--gr-color-gray-700, #374151);
  }

  :global([data-theme='dark']) .chat-suggestions--cards .chat-suggestions__item:hover {
    background-color: var(--gr-color-primary-900, #1e3a8a);
    border-color: var(--gr-color-primary-700, #1d4ed8);
    color: var(--gr-color-primary-100, #dbeafe);
  }

  :global([data-theme='dark']) .chat-suggestions__description {
    color: var(--gr-color-gray-400, #9ca3af);
  }
</style>
>>> | TYPE: content creation | DESC: Create the ChatSuggestions Svelte component with pills and cards variants, keyboard navigation, accessibility support, and dark mode styling

## Priority
high

## END MODULE

## BEGIN MODULE

### Module: Update Chat Types for Enhanced Suggestions
Update the types.ts file to support the enhanced ChatSuggestionsProps interface with variant support and string array input.

## Description
This module updates the existing `ChatSuggestionsProps` interface in `packages/shared/chat/src/types.ts` to support:
- Simple string array input for suggestions (in addition to existing ChatSuggestion objects)
- New `variant` prop for 'pills' | 'cards' display modes
- Updated `onSelect` callback to accept string instead of ChatSuggestion object for simpler API

The existing `ChatSuggestion` interface is kept for backward compatibility but the component will accept both string arrays and ChatSuggestion arrays.

## Type
update

## Dependencies
none

## Files
packages/shared/chat/src/types.ts

## File Changes
- packages/shared/chat/src/types.ts: BEFORE: <<<
/**
 * Suggestion item
 */
export interface ChatSuggestion {
  /** Unique identifier */
  id: string;
  /** Display text */
  text: string;
  /** Optional icon name */
  icon?: string;
}

/**
 * Chat suggestions component props
 */
export interface ChatSuggestionsProps {
  /** Array of suggestions to display */
  suggestions: ChatSuggestion[];
  /** Called when a suggestion is selected */
  onSelect?: (suggestion: ChatSuggestion) => void;
  /** Custom CSS class */
  class?: string;
}
>>> | AFTER: <<<
/**
 * Suggestion item
 */
export interface ChatSuggestion {
  /** Unique identifier */
  id: string;
  /** Display text */
  text: string;
  /** Optional icon name */
  icon?: string;
  /** Optional description (shown in cards variant) */
  description?: string;
}

/**
 * Simple suggestion item for string-based API
 */
export interface ChatSuggestionItem {
  /** Display text */
  text: string;
  /** Optional description (shown in cards variant) */
  description?: string;
}

/**
 * Chat suggestions component props
 */
export interface ChatSuggestionsProps {
  /** Array of suggestions to display - can be strings or objects */
  suggestions: string[] | ChatSuggestionItem[];
  /** Called when a suggestion is selected */
  onSelect: (suggestion: string) => void;
  /** Visual variant - pills (default) or cards */
  variant?: 'pills' | 'cards';
  /** Custom CSS class */
  class?: string;
}
>>> | TYPE: content replacement | DESC: Update ChatSuggestionsProps to support string arrays, variant prop, and simplified onSelect callback

## Priority
high

## END MODULE

## BEGIN MODULE

### Module: Update Chat Index Exports
Update the index.ts file to export the ChatSuggestions component as Suggestions and add the defaultPAISuggestions constant.

## Description
This module updates `packages/shared/chat/src/index.ts` to:
1. Export the new `ChatSuggestions` component as `Suggestions`
2. Export the `defaultPAISuggestions` constant with PAI-specific default suggestions
3. Export the new `ChatSuggestionItem` type

## Type
update

## Dependencies
ChatSuggestions Component Implementation, Update Chat Types for Enhanced Suggestions

## Files
packages/shared/chat/src/index.ts

## File Changes
- packages/shared/chat/src/index.ts: BEFORE: <<<
// Export types
export type {
  MessageRole,
  MessageStatus,
  ToolCallStatus,
  ToolCall,
  ChatMessage,
  ChatContainerProps,
  ChatMessageProps,
  ChatMessagesProps,
  ChatInputProps,
  ChatToolCallProps,
  ChatSuggestion,
  ChatSuggestionsProps,
  ChatHeaderProps,
  ChatSettingsState,
  ChatSettingsProps,
} from './types.js';

// Export context utilities and types
export type {
  ChatHandlers,
  ChatState,
  ChatContextValue,
  ConnectionStatus,
} from './context.svelte.js';

export {
  createChatContext,
  getChatContext,
  setChatContext,
  hasChatContext,
  formatMessageTime,
  formatStreamDuration,
  getConnectionStatusText,
} from './context.svelte.js';

// Component exports
export { default as Container } from './ChatContainer.svelte';

// Component exports
export { default as Message } from './ChatMessage.svelte';

// Messages list container with auto-scroll
export { default as Messages } from './ChatMessages.svelte';

// Chat input component
export { default as Input } from './ChatInput.svelte';

// Tool call display component
export { default as ToolCall } from './ChatToolCall.svelte';

// Additional component exports will be added as they are implemented:
// export { default as Header } from './Header.svelte';
// export { default as Suggestions } from './Suggestions.svelte';
// export { default as Settings } from './Settings.svelte';
>>> | AFTER: <<<
// Export types
export type {
  MessageRole,
  MessageStatus,
  ToolCallStatus,
  ToolCall,
  ChatMessage,
  ChatContainerProps,
  ChatMessageProps,
  ChatMessagesProps,
  ChatInputProps,
  ChatToolCallProps,
  ChatSuggestion,
  ChatSuggestionItem,
  ChatSuggestionsProps,
  ChatHeaderProps,
  ChatSettingsState,
  ChatSettingsProps,
} from './types.js';

// Export context utilities and types
export type {
  ChatHandlers,
  ChatState,
  ChatContextValue,
  ConnectionStatus,
} from './context.svelte.js';

export {
  createChatContext,
  getChatContext,
  setChatContext,
  hasChatContext,
  formatMessageTime,
  formatStreamDuration,
  getConnectionStatusText,
} from './context.svelte.js';

// Component exports
export { default as Container } from './ChatContainer.svelte';

// Component exports
export { default as Message } from './ChatMessage.svelte';

// Messages list container with auto-scroll
export { default as Messages } from './ChatMessages.svelte';

// Chat input component
export { default as Input } from './ChatInput.svelte';

// Tool call display component
export { default as ToolCall } from './ChatToolCall.svelte';

// Suggestions component for quick prompts
export { default as Suggestions } from './ChatSuggestions.svelte';

/**
 * Default PAI suggestions for empty state
 */
export const defaultPAISuggestions: string[] = [
  "What is PAI?",
  "How do I create a scope?",
  "Show me an example workflow",
  "What knowledgebases are available?"
];

// Additional component exports will be added as they are implemented:
// export { default as Header } from './Header.svelte';
// export { default as Settings } from './Settings.svelte';
>>> | TYPE: content replacement | DESC: Add Suggestions component export, defaultPAISuggestions constant, and ChatSuggestionItem type export

## Priority
high

## END MODULE

# END MODULES LIST