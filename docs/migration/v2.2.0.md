# Migrating to v2.2.0

Version 2.2.0 introduces dedicated components for Profile timelines, new settings composition primitives, and advanced theme utilities.

## Quick Start

If you're new to v2.2.0, here's the fastest way to get started:

### 1. Profile Timelines (Most Common)
```svelte
<script>
  import { Profile } from '@equaltoai/greater-components-fediverse';
  import { LesserGraphQLAdapter } from '@equaltoai/greater-components-adapters';
  
  const adapter = new LesserGraphQLAdapter({
    instanceUrl: 'https://your-instance.com',
    authToken: '...'
  });
</script>

<Profile.Root username="johndoe" {adapter}>
  <Profile.Header />
  <Profile.Timeline showReplies={false} />
</Profile.Root>
```

### 2. Settings Panels (Most Common)
```svelte
<script>
  import { SettingsSection, SettingsToggle } from '@equaltoai/greater-components-primitives';
  
  let darkMode = $state(false);
</script>

<SettingsSection title="Appearance">
  <SettingsToggle 
    label="Dark Mode" 
    bind:value={darkMode}
  />
</SettingsSection>
```

### 3. Theme Customization (Advanced)
```svelte
<script>
  import { ThemeWorkbench } from '@equaltoai/greater-components-primitives';
  import { generateTheme } from '@equaltoai/greater-components-utils';
  
  const theme = generateTheme('#3b82f6');
</script>

<ThemeWorkbench initialColor="#3b82f6" />
```

## New Features

### Profile.Timeline Component

You can now use `<Profile.Timeline>` instead of manually configuring `TimelineVirtualizedReactive`.

**Before (v2.1.x):**
```svelte
<TimelineVirtualizedReactive
  {adapter}
  view={{ type: 'profile', username: 'alice' }}
/>
```

**After (v2.2.0):**
```svelte
<Profile.Timeline 
  username="alice" 
  {adapter} 
/>
```

It can also be used within `Profile.Root` without passing props explicitly:

```svelte
<Profile.Root {profile} {adapter}>
  <!-- Automatically picks up username and adapter from context -->
  <Profile.Timeline />
</Profile.Root>
```

### Authentication Helper

`LesserGraphQLAdapter` now has a `verifyCredentials` method.

```typescript
const user = await adapter.verifyCredentials();
console.log('Logged in as:', user.username);
```

### Settings Composition

New primitives are available for building settings panels consistently:

- `SettingsSection`
- `SettingsGroup`
- `SettingsField`
- `SettingsToggle`
- `SettingsSelect`

### Theme Utilities

New utilities for color manipulation and theme generation:

- `generateColorHarmony`
- `getContrastRatio`
- `generateTheme`
- `ThemeWorkbench` component

## Breaking Changes

There are no breaking changes in this release. All new features are additive.

## Deprecations

- Manual usage of `TimelineVirtualizedReactive` for profile views is deprecated in favor of `Profile.Timeline`.
