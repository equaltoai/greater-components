# Demo Suite Deployment Runbook (Phase 5)

Last updated: 2025-02-18 (Phase 5 “Documentation & Testing”)

This checklist describes how to ship the refreshed documentation site (`apps/docs`) and playground demo (`apps/playground`) after the Phase 5 hardening pass.

## 1. Build artifacts

```bash
# Docs site
pnpm --filter @greater-components/docs build
# Playground demo
pnpm --filter @equaltoai/playground build
```

- `apps/docs/build/` is a static bundle generated by SvelteKit’s adapter-static. Upload the directory to the docs bucket/CDN as-is.
- `apps/playground/dist/` is a Vite SPA build. Serve it via any static host (Cloudflare Pages, Netlify, S3 + CloudFront).

> **Environment variables**: No new secrets are required for the Phase 5 demo flows; all data is powered by local fixtures. If your host requires absolute paths, set `PUBLIC_BASE_PATH` before running the docs build (e.g., `PUBLIC_BASE_PATH=/docs pnpm --filter @greater-components/docs build`).

## 2. Smoke test

```bash
pnpm --filter @greater-components/docs preview --host 127.0.0.1 --port 4172
pnpm --filter @equaltoai/playground preview --host 127.0.0.1 --port 4173
```

Visit:

- http://127.0.0.1:4172/demo-suite to verify the new documentation routes.
- http://127.0.0.1:4173/timeline (plus `/profile`, `/settings`, `/search`) to ensure demo interactions still function.

## 3. Lighthouse + bundle notes

1. Run the playground build preview (see above).
2. Execute Lighthouse against the preview server:

   ```bash
   pnpm dlx lighthouse http://127.0.0.1:4173 --chrome-flags="--headless" --quiet --output=json --output-path=planning-assets/lighthouse-playground-phase5.json
   ```

3. Record the resulting scores (Performance, Accessibility, Best Practices, SEO) in `docs/planning/greater-alignment-log.md`.

## 4. Validation commands

From the repo root:

```bash
pnpm lint
pnpm typecheck
pnpm test
pnpm build
pnpm --filter @equaltoai/greater-components-testing test:demo   # Playwright demo suite
```

The Playwright command relies on the preview server configured in `packages/testing/playwright.demo.config.ts` and validates timeline/profile/settings/search routes (aria landmarks, keyboard flows, state transitions).

## 5. Publish steps

1. Upload `apps/docs/build/` to the docs host (e.g., S3 bucket backing docs.equalto.ai). Invalidate CDN cache.
2. Upload `apps/playground/dist/` to the demo host. If hosted behind Cloudflare/Netlify, point to the new directory or trigger the build pipeline with the prepared artifacts.
3. Verify both hosts load the latest content, then announce completion in the Phase 5 tracker referencing the Lighthouse + Playwright run.
