import{a as n,f as d,s as l}from"../chunks/BykCGqtP.js";import"../chunks/YKgMSjAh.js";import{e as Q,f as J,s as t,c as o,$ as K,r as e,n as z,d as S,g as c}from"../chunks/HviJt0eG.js";import{e as T}from"../chunks/D809QS3d.js";import{h as W}from"../chunks/BIESLWc2.js";import{s as X}from"../chunks/CybMBw0E.js";import{D as Y}from"../chunks/vGJJHm7z.js";import{P as A,A as Z}from"../chunks/D3BlL-1y.js";import{E as ee}from"../chunks/DdSX794w.js";import{C as te}from"../chunks/D4U67pPq.js";var oe=d('<meta name="description" content="Props, handlers, accessibility, and performance notes for the Phase 4 timeline demo."/>'),ie=d("<li><strong><code> </code></strong> <p> </p></li>"),ae=d("<li> </li>"),re=d("<li><code> </code> </li>"),se=d("<section><h2>Packages</h2> <ul></ul> <p>The implementation lives in <code>apps/playground/src/routes/timeline/+page.svelte</code> and\n			wires the shared timeline store (<code>$lib/stores/timelineStore.ts</code>) into\n			`TimelineVirtualized`.</p></section> <section><h2>TimelineVirtualized props</h2> <!></section> <section><h2>Timeline controller options</h2> <!></section> <section><h2>Status action handlers</h2> <!></section> <section><h2>Usage snippet</h2> <!></section> <section><h2>Accessibility</h2> <!></section> <section><h2>Performance &amp; deployment notes</h2> <ul></ul> <p>Run <code>pnpm --filter @equaltoai/playground build</code> followed by <code>pnpm --filter @equaltoai/playground preview</code> before capturing Lighthouse metrics.</p></section> <section><h2>Testing &amp; monitoring</h2> <ul></ul></section>",1);function ve(M){const B=[{name:"items",type:"Status[]",required:!0,description:"Ordered list of timeline items; supports composed drafts merged with hydrated results."},{name:"density",type:"'comfortable' | 'compact'",default:"'comfortable'",description:"Controls card spacing + typography; wired to the preferences modal."},{name:"actionHandlers",type:"StatusActionHandlers",description:"Callback bag for reply/boost/favorite actions surfaced in StatusCard."},{name:"loadingBottom",type:"boolean",default:"false",description:"Shows inline skeletons while `timeline.loadMore()` resolves."}],D=[{name:"seeds",type:"TimelineSeed",required:!0,description:"Static dataset cloned per filter to guarantee deterministic hydration."},{name:"generator",type:"(filter: TimelineFilter, page: number, size: number) => Status[]",required:!0,description:"Mock ActivityPub batch generator used for prefetch + infinite scroll simulations."},{name:"pageSize",type:"number",default:"5",description:"Controls both the hydrated chunk size and load-more increments."},{name:"prefetchTarget",type:"number",default:"pageSize * 2",description:"Minimum queue depth maintained per filter to avoid scroll jank."},{name:"delayMs",type:"number",default:"360",description:"Adds artificial network latency for demo realism and skeleton coverage."}],L=[{name:"onReply",payload:"Status",description:"Queues optimistic compose-to-thread behavior for the selected status."},{name:"onBoost",payload:"Status",description:"Logs boosts in the action rail and triggers moderation hints."},{name:"onFavorite",payload:"Status",description:"Updates the action log + `aria-live` region for assistive tech feedback."}],V=[{name:"@equaltoai/greater-components-social",detail:"TimelineVirtualized, StatusCard, Compose compound, notification mocks."},{name:"@equaltoai/greater-components-primitives",detail:"Button, Switch, Modal, Avatar, and density controls."},{name:"@equaltoai/greater-components-icons",detail:"Sidebar glyphs (Home/Globe/Hash/Settings) with semantic titles."},{name:"@equaltoai/greater-components-testing",detail:"Playwright coverage in packages/testing/tests/demo/timeline.spec.ts"}],H=`<script lang="ts">
  import { TimelineVirtualized, StatusCard } from '@equaltoai/greater-components-social';
  import { createTimelineController } from '$lib/stores/timelineStore';
  import { createTimelineSeeds, generateTimelineBatch } from '$lib/data/fediverse';

  const timeline = createTimelineController({
    seeds: createTimelineSeeds(),
    generator: generateTimelineBatch,
    pageSize: 4,
    prefetchTarget: 8
  });

  const timelineItems = $derived([...drafts, ...$timeline.items]);
  const handlers = {
    onReply: (status) => log('Reply', status.account.acct),
    onBoost: (status) => log('Boost', status.account.acct),
    onFavorite: (status) => log('Favorite', status.account.acct)
  };
<\/script>

<section aria-label="Timeline demo">
  <header>
    <p class="section-eyebrow">Timeline</p>
    <h2>{($timeline.viewDescription)}</h2>
  </header>
  <TimelineVirtualized
    {timelineItems}
    density={preferences.density}
    actionHandlers={handlers}
    loadingBottom={$timeline.loading}
  />
</section>`,R={wcagLevel:"AA",keyboardNav:!0,screenReader:!0,colorContrast:!0,focusManagement:!0,ariaSupport:!0,reducedMotion:!0,notes:["Sidebar filter buttons use aria-pressed to announce selection.",'Compose dock + action log use aria-live="polite" so updates are narrated.',"Preferences modal traps focus and restores to the triggering control.","Notifications + pinned rails expose aria-labels for quick navigation."],axeScore:100},E=["Virtualization keeps DOM nodes under 30 even when the store prefetches 100+ statuses.","Prefetch queues hydrate on idle and re-hydrate when filters repeat to showcase cache hits.","Load-more button disables during fetch to avoid duplicate requests; streaming toggle pauses background work.","Lighthouse 98/100/100/100 on the production playground build (see docs/planning/greater-alignment-log.md)."],F=[{label:"packages/testing/tests/demo/timeline.spec.ts",detail:"Playwright assertions for filter aria-pressed state, density controls, and streaming toggles."},{label:"apps/playground/src/lib/stores/timelineStore.test.ts",detail:"Unit tests covering hydration, loadMore queuing, and error simulation."},{label:"packages/faces/social/tests/timelineStore.test.ts",detail:"TimelineStore prepend/append coverage for transport + pagination APIs."}];W("2flhuv",m=>{var w=oe();Q(()=>{K.title="Timeline Demo Documentation - Greater Components"}),n(m,w)}),Y(M,{eyebrow:"Demo Suite",title:"Timeline application",description:"Nav rail + Compose dock powering the Phase 4 timeline demo at /timeline. Combines @equaltoai/greater-components-social with playground-only stores for draft hydration.",children:(m,w)=>{var k=se(),u=J(k),$=t(o(u),2);T($,5,()=>V,i=>i.name,(i,r)=>{var a=ie(),s=o(a),p=o(s),_=o(p,!0);e(p),e(s);var x=t(s,2),j=o(x,!0);e(x),e(a),S(()=>{l(_,c(r).name),l(j,c(r).detail)}),n(i,a)}),e($),z(2),e(u);var g=t(u,2),I=t(o(g),2);A(I,{get props(){return B}}),e(g);var h=t(g,2),N=t(o(h),2);A(N,{get props(){return D}}),e(h);var f=t(h,2),O=t(o(f),2);ee(O,{get events(){return L}}),e(f);var v=t(f,2),U=t(o(v),2);te(U,{language:"svelte",code:H}),e(v);var y=t(v,2),G=t(o(y),2);Z(G,X(()=>R)),e(y);var b=t(y,2),q=t(o(b),2);T(q,7,()=>E,(i,r)=>`${r}-${i}`,(i,r)=>{var a=ae(),s=o(a,!0);e(a),S(()=>l(s,c(r))),n(i,a)}),e(q),z(2),e(b);var C=t(b,2),P=t(o(C),2);T(P,5,()=>F,i=>i.label,(i,r)=>{var a=re(),s=o(a),p=o(s,!0);e(s);var _=t(s);e(a),S(()=>{l(p,c(r).label),l(_,` â€” ${c(r).detail??""}`)}),n(i,a)}),e(P),e(C),n(m,k)},$$slots:{default:!0}})}export{ve as component};
