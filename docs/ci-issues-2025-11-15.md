# CI Failure Inventory – 2025-11-15

Latest workflow run reviewed: [19390815874](https://github.com/equaltoai/greater-components/actions/runs/19390815874) (`main` @ 691987b) and its fan-out jobs. The items below are ordered by how they block the rest of the automation.

| Priority | Workflow / Job                                        | Symptoms & Logs                                                                                                                                                                                                                                                                                                                           | Suspected Fix / Next Action                                                                                                                                                                                                                                                                                                                                                            |
| -------- | ----------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| P0       | **Release / Quality Gates → `pnpm typecheck`**        | `apps/playground/src/routes/+layout.server.ts(1,21): error TS2307: Cannot find module '$env/dynamic/private'` (run [19390815860](https://github.com/equaltoai/greater-components/actions/runs/19390815860)). The new server layout imports `$env/dynamic/private`, but SvelteKit only generates that module when the adapter supports it. | Switch to `$env/static/private` (if the vars are known at build time) or add the appropriate `@types` reference in `tsconfig`/`ambient.d.ts`. Without this, typecheck blocks every Release / Quality Gates invocation.                                                                                                                                                                 |
| P0       | **E2E Tests → Playwright Tests (chromium / firefox)** | CSR phase fails with `Error: Project(s) "chromium" not found. Available projects: "csr-chromium", "csr-firefox"` (job [55484003846](https://github.com/equaltoai/greater-components/actions/runs/19390815867/job/55484003846)). Firefox job is cancelled once chromium fails.                                                             | Update `.github/workflows/e2e.yml` (or equivalent) so the CSR command passes `--project=csr-chromium` and `--project=csr-firefox`. Alternatively, drop the `--project` flag and let Playwright run both defined projects.                                                                                                                                                              |
| P1       | **Lint → Prettier**                                   | `pnpm format:check` reports 7 files (layouts, reports, tests) out of format (run [19390815857](https://github.com/equaltoai/greater-components/actions/runs/19390815857)).                                                                                                                                                                | Re-run `pnpm format --write apps/playground/src/routes/+layout.server.ts apps/playground/src/routes/+layout.svelte apps/playground/src/routes/settings/+page.svelte packages/testing/tests/demo/a11yReporter.ts packages/testing/tests/demo/settings.spec.ts` and decide whether generated HTML reports should be added to `.prettierignore` or regenerated with compliant formatting. |
| P1       | **Accessibility Testing matrix**                      | Every variant fails in the “Run focus management tests” step with `Error: No tests found` (e.g., job [55484003877](https://github.com/equaltoai/greater-components/actions/runs/19390815850/job/55484003877)). Because the job exits early, the later contrast/compliance/report steps are skipped.                                       | Either (a) add focus-specific Playwright tests and tag them with `/focus/`, or (b) adjust `.github/workflows/a11y.yml` so the focus step targets an existing grep/tag. Until then the workflow will always fail despite axe coverage succeeding earlier in the job.                                                                                                                    |
| P2       | **Documentation → Deploy Documentation**              | The `Deploy Documentation` job (id [55484035597](https://github.com/equaltoai/greater-components/actions/runs/19390815849/job/55484035597)) finishes with conclusion `failure` but produces no logs. GitHub’s follow-up `pages-build-deployment` runs succeed, so this intermediary job is redundant/broken.                              | Inspect `.github/workflows/docs.yml`: the `actions/deploy-pages@v4` step likely lacks required permissions (`pages: write`, `id-token: write`) or is configured against a removed environment. Either remove the redundant job (and rely on the dedicated `deploy-playground.yml`) or fix the permissions so the job completes.                                                        |
| P3       | **Accessibility report signal**                       | The a11y suite now writes `axe-results.json`, but GitHub workflow still tries to run contrast/report steps even when earlier steps fail. (Same run as above.)                                                                                                                                                                             | After resolving the “No tests found” issue, ensure the workflow aggregates the emitted axe JSON. If we keep multiple theme/density permutations, consider collapsing the matrix until the focus suite exists to reduce runtime.                                                                                                                                                        |

## Recommended Triage Order

1. Fix the `$env/dynamic/private` import so Release and Documentation workflows can typecheck.
2. Adjust the Playwright CSR step to run against the correct project IDs; this unblocks E2E.
3. Reformat / ignore the files flagged by Prettier so the Lint workflow is green.
4. Decide how to handle the focus tests in the Accessibility workflow.
5. Clean up the `Deploy Documentation` job (either remove or grant permissions).

Once these are resolved, re-run:

- `pnpm typecheck`, `pnpm format:check`
- `CI=1 pnpm --filter @equaltoai/greater-components-testing run test:e2e`
- `.github/workflows/a11y.yml` via `gh workflow run a11y.yml`
- Documentation workflow to confirm GitHub Pages deploys without the phantom failure.
