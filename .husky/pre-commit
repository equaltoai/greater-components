#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for DCO sign-off
commit_regex='^Signed-off-by: '
if ! grep -qE "$commit_regex" "$1"; then
    echo "Error: Commit message is missing DCO sign-off."
    echo "Please use 'git commit -s' to sign off your commits."
    exit 1
fi

# Run lint-staged if available
if command -v pnpm &> /dev/null; then
    pnpm lint-staged
fi