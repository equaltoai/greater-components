# Status Queries
# Queries for fetching individual statuses and related data

#import "../fragments/status.graphql"
#import "../fragments/account.graphql"
#import "../fragments/media.graphql"
#import "../fragments/common.graphql"

# Get single status
query GetStatus($id: ID!) {
  status(id: $id) {
    ...StatusFields
  }
}

# Get status context (ancestors and descendants)
query GetStatusContext($id: ID!) {
  statusContext(id: $id) {
    ancestors {
      ...StatusFields
    }
    descendants {
      ...StatusFields
    }
  }
}

# Get accounts who favourited a status
query GetStatusFavouritedBy($id: ID!, $limit: Int = 40, $maxId: ID) {
  statusFavouritedBy(id: $id, limit: $limit, maxId: $maxId) {
    edges {
      node {
        ...AccountFields
      }
      cursor
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

# Get accounts who reblogged a status
query GetStatusRebloggedBy($id: ID!, $limit: Int = 40, $maxId: ID) {
  statusRebloggedBy(id: $id, limit: $limit, maxId: $maxId) {
    edges {
      node {
        ...AccountFields
      }
      cursor
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

# Get status source (for editing)
query GetStatusSource($id: ID!) {
  statusSource(id: $id) {
    id
    text
    spoilerText
  }
}

# Get status history (edits)
query GetStatusHistory($id: ID!) {
  statusHistory(id: $id) {
    account {
      ...AccountCompact
    }
    content
    spoilerText
    sensitive
    createdAt
    mediaAttachments {
      ...MediaFields
    }
    poll {
      ...PollFields
    }
    emojis {
      ...EmojiFields
    }
  }
}

