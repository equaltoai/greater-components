# Messages/Conversations Mutations
# Mutations for managing direct messages and conversations

#import "../fragments/common.graphql"
#import "../fragments/status.graphql"
#import "../fragments/account.graphql"

# Get conversations
query GetConversations($limit: Int = 20, $maxId: ID, $minId: ID) {
  conversations(limit: $limit, maxId: $maxId, minId: $minId) {
    edges {
      node {
        ...ConversationFields
      }
      cursor
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

# Get a single conversation
query GetConversation($id: ID!) {
  conversation(id: $id) {
    ...ConversationFields
  }
}

# Mark conversation as read
mutation MarkConversationAsRead($id: ID!) {
  markConversationAsRead(id: $id) {
    ...ConversationFields
  }
}

# Delete conversation
mutation DeleteConversation($id: ID!) {
  deleteConversation(id: $id) {
    id
  }
}

# Send a direct message (creates a conversation)
mutation SendDirectMessage(
  $accountId: ID!
  $status: String!
  $mediaIds: [ID!]
  $sensitive: Boolean = false
  $spoilerText: String
) {
  sendDirectMessage(
    input: {
      accountId: $accountId
      status: $status
      mediaIds: $mediaIds
      sensitive: $sensitive
      spoilerText: $spoilerText
    }
  ) {
    ...StatusFields
  }
}

