
> @equaltoai/greater-components-primitives@3.0.0 test /home/aron/ai-workspace/codebases/penny-advanced-interfaces/greater-components/packages/primitives
> vitest run "tests/tabs.test.ts"


[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90m/home/aron/ai-workspace/codebases/penny-advanced-interfaces/greater-components/packages/primitives[39m

8:07:41 AM [vite-plugin-svelte] tests/harness/TabsHarness.svelte:18:5 This reference only captures the initial value of `props`. Did you mean to reference it inside a closure instead?
https://svelte.dev/e/state_referenced_locally
8:07:41 AM [vite-plugin-svelte] src/components/Tabs.svelte:2:1 The `customElement` option is used when generating a custom element. Did you forget the `customElement: true` compile option?
https://svelte.dev/e/options_missing_custom_element
 [31m‚ùØ[39m tests/tabs.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 5199[2mms[22m[39m
[31m     [31m√ó[31m changes active tab via click and emits onTabChange[39m[33m 1096[2mms[22m[39m
[31m     [31m√ó[31m supports keyboard navigation and skips disabled tabs[39m[33m 1031[2mms[22m[39m
[31m     [31m√ó[31m uses vertical arrow keys with manual activation and wraps focus[39m[33m 1025[2mms[22m[39m
[31m     [31m√ó[31m respects Home/End navigation and ignores disabled tab selection[39m[33m 1023[2mms[22m[39m
[31m     [31m√ó[31m treats keyboard focus separately from selection in manual mode[39m[33m 1025[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Tests 5 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m tests/tabs.test.ts[2m > [22mTabs.svelte[2m > [22mchanges active tab via click and emits onTabChange
[31m[1mAssertionError[22m: expected 'false' to be 'true' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"gr-tabs gr-tabs--horizontal gr-tabs--default"[31m
      [36m>[31m
        [36m<div[31m
          [33maria-orientation[31m=[32m"horizontal"[31m
          [33mclass[31m=[32m"gr-tabs__tablist"[31m
          [33mrole[31m=[32m"tablist"[31m
        [36m>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33maria-selected[31m=[32m"true"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--active"[31m
            [33mdata-tab-index[31m=[32m"0"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [0mOverview[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab"[31m
            [33mdata-tab-index[31m=[32m"1"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mActivity[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33maria-disabled[31m=[32m"true"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--disabled"[31m
            [33mdata-tab-index[31m=[32m"2"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mSettings[0m
          [36m</button>[31m
          [0m[0m
        [36m</div>[31m
        [0m [0m
        [36m<div[31m
          [33mclass[31m=[32m"gr-tabs__panels"[31m
        [36m>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mclass[31m=[32m"gr-tabs__panel gr-tabs__panel--active"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [36m<p[31m
              [33mdata-testid[31m=[32m"tab-panel-overview"[31m
            [36m>[31m
              [0mOverview content[0m
            [36m</p>[31m
            [0m[0m
          [36m</div>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [0m[0m
        [36m</div>[31m
      [36m</div>[31m
      [0m[0m
      [0m[0m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"[7mtru[27me"[39m
Received: [31m"[7mfals[27me"[39m

[36m [2m‚ùØ[22m tests/tabs.test.ts:[2m20:54[22m[39m
    [90m 18| [39m  [34mexpect[39m(onTabChange)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'activity'[39m)[33m;[39m
    [90m 19| [39m  [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m 20| [39m   [34mexpect[39m(activityTab[33m.[39m[34mgetAttribute[39m([32m'aria-selected'[39m))[33m.[39m[34mtoBe[39m([32m'true'[39m)[33m;[39m
    [90m   | [39m                                                     [31m^[39m
    [90m 21| [39m  })[33m;[39m
    [90m 22| [39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/5]‚éØ[22m[39m

[41m[1m FAIL [22m[49m tests/tabs.test.ts[2m > [22mTabs.svelte[2m > [22msupports keyboard navigation and skips disabled tabs
[31m[1mAssertionError[22m: expected 'false' to be 'true' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"gr-tabs gr-tabs--horizontal gr-tabs--default"[31m
      [36m>[31m
        [36m<div[31m
          [33maria-orientation[31m=[32m"horizontal"[31m
          [33mclass[31m=[32m"gr-tabs__tablist"[31m
          [33mrole[31m=[32m"tablist"[31m
        [36m>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33maria-selected[31m=[32m"true"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--active"[31m
            [33mdata-tab-index[31m=[32m"0"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [0mOverview[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab"[31m
            [33mdata-tab-index[31m=[32m"1"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mActivity[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33maria-disabled[31m=[32m"true"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--disabled"[31m
            [33mdata-tab-index[31m=[32m"2"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mSettings[0m
          [36m</button>[31m
          [0m[0m
        [36m</div>[31m
        [0m [0m
        [36m<div[31m
          [33mclass[31m=[32m"gr-tabs__panels"[31m
        [36m>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mclass[31m=[32m"gr-tabs__panel gr-tabs__panel--active"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [36m<p[31m
              [33mdata-testid[31m=[32m"tab-panel-overview"[31m
            [36m>[31m
              [0mOverview content[0m
            [36m</p>[31m
            [0m[0m
          [36m</div>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [0m[0m
        [36m</div>[31m
      [36m</div>[31m
      [0m[0m
      [0m[0m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"[7mtru[27me"[39m
Received: [31m"[7mfals[27me"[39m

[36m [2m‚ùØ[22m tests/tabs.test.ts:[2m37:54[22m[39m
    [90m 35| [39m  [35mconst[39m activityTab [33m=[39m [34mgetByRole[39m([32m'tab'[39m[33m,[39m { name[33m:[39m [32m'Activity'[39m })[33m;[39m
    [90m 36| [39m  [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m 37| [39m   [34mexpect[39m(activityTab[33m.[39m[34mgetAttribute[39m([32m'aria-selected'[39m))[33m.[39m[34mtoBe[39m([32m'true'[39m)[33m;[39m
    [90m   | [39m                                                     [31m^[39m
    [90m 38| [39m  })[33m;[39m
    [90m 39| [39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/5]‚éØ[22m[39m

[41m[1m FAIL [22m[49m tests/tabs.test.ts[2m > [22mTabs.svelte[2m > [22muses vertical arrow keys with manual activation and wraps focus
[31m[1mAssertionError[22m: expected 'false' to be 'true' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"gr-tabs gr-tabs--vertical gr-tabs--default"[31m
      [36m>[31m
        [36m<div[31m
          [33maria-orientation[31m=[32m"vertical"[31m
          [33mclass[31m=[32m"gr-tabs__tablist"[31m
          [33mrole[31m=[32m"tablist"[31m
        [36m>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33maria-selected[31m=[32m"true"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--active"[31m
            [33mdata-tab-index[31m=[32m"0"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [0mOverview[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab"[31m
            [33mdata-tab-index[31m=[32m"1"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mActivity[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33maria-disabled[31m=[32m"true"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--disabled"[31m
            [33mdata-tab-index[31m=[32m"2"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mSettings[0m
          [36m</button>[31m
          [0m[0m
        [36m</div>[31m
        [0m [0m
        [36m<div[31m
          [33mclass[31m=[32m"gr-tabs__panels"[31m
        [36m>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mclass[31m=[32m"gr-tabs__panel gr-tabs__panel--active"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [36m<p[31m
              [33mdata-testid[31m=[32m"tab-panel-overview"[31m
            [36m>[31m
              [0mOverview content[0m
            [36m</p>[31m
            [0m[0m
          [36m</div>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [0m[0m
        [36m</div>[31m
      [36m</div>[31m
      [0m[0m
      [0m[0m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"[7mtru[27me"[39m
Received: [31m"[7mfals[27me"[39m

[36m [2m‚ùØ[22m tests/tabs.test.ts:[2m67:54[22m[39m
    [90m 65| [39m
    [90m 66| [39m  [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m 67| [39m   [34mexpect[39m(activityTab[33m.[39m[34mgetAttribute[39m([32m'aria-selected'[39m))[33m.[39m[34mtoBe[39m([32m'true'[39m)[33m;[39m
    [90m   | [39m                                                     [31m^[39m
    [90m 68| [39m  })[33m;[39m
    [90m 69| [39m  [34mexpect[39m(onTabChange)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'activity'[39m)[33m;[39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/5]‚éØ[22m[39m

[41m[1m FAIL [22m[49m tests/tabs.test.ts[2m > [22mTabs.svelte[2m > [22mrespects Home/End navigation and ignores disabled tab selection
[31m[1mAssertionError[22m: expected 'false' to be 'true' // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"gr-tabs gr-tabs--horizontal gr-tabs--default"[31m
      [36m>[31m
        [36m<div[31m
          [33maria-orientation[31m=[32m"horizontal"[31m
          [33mclass[31m=[32m"gr-tabs__tablist"[31m
          [33mrole[31m=[32m"tablist"[31m
        [36m>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33maria-selected[31m=[32m"true"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--active"[31m
            [33mdata-tab-index[31m=[32m"0"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [0mOverview[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab"[31m
            [33mdata-tab-index[31m=[32m"1"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mActivity[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33maria-disabled[31m=[32m"true"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--disabled"[31m
            [33mdata-tab-index[31m=[32m"2"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mSettings[0m
          [36m</button>[31m
          [0m[0m
        [36m</div>[31m
        [0m [0m
        [36m<div[31m
          [33mclass[31m=[32m"gr-tabs__panels"[31m
        [36m>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mclass[31m=[32m"gr-tabs__panel gr-tabs__panel--active"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [36m<p[31m
              [33mdata-testid[31m=[32m"tab-panel-overview"[31m
            [36m>[31m
              [0mOverview content[0m
            [36m</p>[31m
            [0m[0m
          [36m</div>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [0m[0m
        [36m</div>[31m
      [36m</div>[31m
      [0m[0m
      [0m[0m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m

Expected: [32m"[7mtru[27me"[39m
Received: [31m"[7mfals[27me"[39m

[36m [2m‚ùØ[22m tests/tabs.test.ts:[2m88:54[22m[39m
    [90m 86| [39m  [35mawait[39m fireEvent[33m.[39m[34mkeyDown[39m(overviewTab[33m,[39m { key[33m:[39m [32m'End'[39m })[33m;[39m
    [90m 87| [39m  [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m 88| [39m   [34mexpect[39m(activityTab[33m.[39m[34mgetAttribute[39m([32m'aria-selected'[39m))[33m.[39m[34mtoBe[39m([32m'true'[39m)[33m;[39m
    [90m   | [39m                                                     [31m^[39m
    [90m 89| [39m  })[33m;[39m
    [90m 90| [39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/5]‚éØ[22m[39m

[41m[1m FAIL [22m[49m tests/tabs.test.ts[2m > [22mTabs.svelte[2m > [22mtreats keyboard focus separately from selection in manual mode
[31m[1mAssertionError[22m: expected <button role="tab" ‚Ä¶(6)></button> to be <button role="tab" ‚Ä¶(6)></button> // Object.is equality

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"gr-tabs gr-tabs--horizontal gr-tabs--default"[31m
      [36m>[31m
        [36m<div[31m
          [33maria-orientation[31m=[32m"horizontal"[31m
          [33mclass[31m=[32m"gr-tabs__tablist"[31m
          [33mrole[31m=[32m"tablist"[31m
        [36m>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33maria-selected[31m=[32m"true"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--active"[31m
            [33mdata-tab-index[31m=[32m"0"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mOverview[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab"[31m
            [33mdata-tab-index[31m=[32m"1"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [0mActivity[0m
          [36m</button>[31m
          [36m<button[31m
            [33maria-controls[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33maria-disabled[31m=[32m"true"[31m
            [33maria-selected[31m=[32m"false"[31m
            [33mclass[31m=[32m"gr-tabs__tab gr-tabs__tab--disabled"[31m
            [33mdata-tab-index[31m=[32m"2"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mrole[31m=[32m"tab"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m>[31m
            [0mSettings[0m
          [36m</button>[31m
          [0m[0m
        [36m</div>[31m
        [0m [0m
        [36m<div[31m
          [33mclass[31m=[32m"gr-tabs__panels"[31m
        [36m>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-overview"[31m
            [33mclass[31m=[32m"gr-tabs__panel gr-tabs__panel--active"[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-overview"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"0"[31m
          [36m>[31m
            [36m<p[31m
              [33mdata-testid[31m=[32m"tab-panel-overview"[31m
            [36m>[31m
              [0mOverview content[0m
            [36m</p>[31m
            [0m[0m
          [36m</div>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-activity"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-activity"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [36m<div[31m
            [33maria-labelledby[31m=[32m"tabs-overview-activity-settings-tab-settings"[31m
            [33mclass[31m=[32m"gr-tabs__panel"[31m
            [33mhidden[31m=[32m""[31m
            [33mid[31m=[32m"tabs-overview-activity-settings-panel-settings"[31m
            [33mrole[31m=[32m"tabpanel"[31m
            [33mtabindex[31m=[32m"-1"[31m
          [36m/>[31m
          [0m[0m
        [36m</div>[31m
      [36m</div>[31m
      [0m[0m
      [0m[0m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m

[32m- Expected[39m
[31m+ Received[39m

[2m  <button[22m
[32m-   aria-controls="tabs-overview-activity-settings-panel-overview"[39m
[32m-   aria-selected="true"[39m
[32m-   class="gr-tabs__tab gr-tabs__tab--active"[39m
[32m-   data-tab-index="0"[39m
[32m-   id="tabs-overview-activity-settings-tab-overview"[39m
[31m+   aria-controls="tabs-overview-activity-settings-panel-activity"[39m
[31m+   aria-selected="false"[39m
[31m+   class="gr-tabs__tab"[39m
[31m+   data-tab-index="1"[39m
[31m+   id="tabs-overview-activity-settings-tab-activity"[39m
[2m    role="tab"[22m
[32m-   tabindex="-1"[39m
[31m+   tabindex="0"[39m
[2m  >[22m
[32m-   Overview[39m
[31m+   Activity[39m
[2m  </button>[22m

[36m [2m‚ùØ[22m tests/tabs.test.ts:[2m118:54[22m[39m
    [90m116| [39m
    [90m117| [39m  [35mawait[39m fireEvent[33m.[39m[34mkeyDown[39m(activityTab[33m,[39m { key[33m:[39m [32m'ArrowRight'[39m })[33m;[39m
    [90m118| [39m  await waitFor(() => expect(document.activeElement).toBe(overviewTab)‚Ä¶
    [90m   | [39m                                                     [31m^[39m
    [90m119| [39m  [34mexpect[39m(activityTab[33m.[39m[34mgetAttribute[39m([32m'aria-selected'[39m))[33m.[39m[34mtoBe[39m([32m'true'[39m)[33m;[39m
    [90m120| [39m
[90m [2m‚ùØ[22m runWithExpensiveErrorDiagnosticsDisabled ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m‚ùØ[22m checkCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m‚ùØ[22m Timeout.checkRealTimersCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/5]‚éØ[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[90m (5)[39m
[2m   Start at [22m 08:07:40
[2m   Duration [22m 5.81s[2m (transform 251ms, setup 266ms, import 79ms, tests 5.20s, environment 206ms)[22m

/home/aron/ai-workspace/codebases/penny-advanced-interfaces/greater-components/packages/primitives:
‚ÄâERR_PNPM_RECURSIVE_RUN_FIRST_FAIL‚Äâ @equaltoai/greater-components-primitives@3.0.0 test: `vitest run "tests/tabs.test.ts"`
Exit status 1
